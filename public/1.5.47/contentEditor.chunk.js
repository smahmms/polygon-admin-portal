(self.webpackChunkunlayer=self.webpackChunkunlayer||[]).push([[688],{88343:function(e,t,n){"use strict";n.r(t);var r,o=n(27378),a=n(80715),l=n(83573),i=n(73355),c=n(8441),u=n(60042),s=n.n(u),d=n(29902),g=n(65867),f=n(76136),m=n(38549);function p(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=n(19375),h=o.lazy((function(){return n.e(539).then(n.bind(n,29446))})),x=o.memo((function(e){var t,n,r=e.children,c=e.type,u=e.contentVersion,v=e.mergeTagGroup,x=e.mergeTagRule,w=e.hasDeprecatedFontControls,C=e.fullScreen,T=void 0!==C&&C,E=e.displayMode,A=e.inline,k=e.fixedToolbarContainer,j=e.autoFocus,F=e.trackKeystrokes,L=e.onSettings,M=e.onInit,I=e.onFormatContent,O=e.onChange,z=(t=(0,o.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,l,i=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw o}}return i}}(t,n)||y(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),D=z[0],R=z[1],N=(0,m.Z)(),Z=(0,a.I0)(),_=(0,a.v9)(d.wl.allowCustomFonts),q=(0,a.v9)(d.wl.getAppearance),B=(0,a.v9)(d.wl.getLocale),G=(0,a.v9)(d.wl.getTextDirection),H=(0,a.v9)(d.wl.getMergeTags),K=(0,a.v9)(d.wl.getMergeTagsConfig),P=(0,a.v9)(d.wl.getColors),U=(0,a.v9)(d.wl.getSyncVersion),V=(0,a.v9)(d.wl.getEntitlements),W=(0,l.Z)(),X=(0,o.useRef)(null),$=(0,o.useRef)(void 0),J=(0,o.useRef)(),Q=d.h.getState(),Y=d.wl.getDesignUI(Q),ee=(0,f.p)(O);function te(e){if(ee.current){null==I||I(e);var t=(0,g.L5)(e);t!==J.current&&(t||null!=e&&e.initialized&&e.isDirty())&&(ee.current(t,e),J.current=t)}}var ne=N.hasCallback("mergeTag"),re=(0,o.useCallback)((function(){R(!0)}),[]);(0,o.useEffect)((function(){var e,t={};(0,g.j_)(t,{type:c,hasDeprecatedFontControls:w,fullScreen:T}),(0,g.Kj)(t,{recentColors:P}),(0,g.j)(t,{contentStyle:A?"":b}),(0,g.b4)(t,{type:c,hasDeprecatedFontControls:w,fullScreen:T,displayMode:E,textDirection:G}),(0,g.bl)(t,{fullScreen:T,displayMode:E}),(0,g.Ze)(t),(0,g.ZX)(t,{type:c,mergeTags:H,mergeTagGroup:v,mergeTagRule:x,mergeTagsConfig:K,hasMergeTagCallback:ne,intl:W}),(0,g.hR)(t,{allowCustomFonts:_}),(0,g.vf)(t,{locale:B}),(0,g.al)(t,{textDirection:G}),(0,g.eE)(t,{appearance:q,ui:Y}),(0,g.hG)(t,{type:c,intl:W,entitlements:V,onAction:re}),null==L||L(t);var n=X.current.querySelector(".editable")||X.current;A&&(t.inline=!0),k&&(t.fixed_toolbar_container=k),null===(e=X.current)||void 0===e||e.classList.add("loading"),t.init_instance_callback=function(e){var t,n;if(j){e.focus(!1);try{var r,o,a,l,i=e.targetElm||document.activeElement,c=(null===(r=e.selection)||void 0===r||null===(o=r.getSel)||void 0===o?void 0:o.call(r))||window.getSelection();i&&c&&(null===(a=c.selectAllChildren)||void 0===a||a.call(c,i),null===(l=c.collapseToEnd)||void 0===l||l.call(c))}catch(e){console.error(e)}}M&&M(e),null===(t=X.current)||void 0===t||t.classList.remove("loading"),null===(n=X.current)||void 0===n||n.classList.add("loaded")},t.setup=function(e){var n=["blur","change","focusout"];e.on("BeforeExecCommand",(function(t){-1!==["mceToggleFormat","mceApplyTextcolor","mceRemoveTextcolor","FontName","FontSize","mceInsertLink"].indexOf(t.command)&&p(e.getBody().querySelectorAll(".mceNonEditable")).map((function(e){e.setAttribute("contenteditable",null)}))})),e.on("ExecCommand",(function(t){p(e.getBody().querySelectorAll(".mceNonEditable")).map((function(e){e.setAttribute("contenteditable",!1)}))})),F&&n.push("keyup"),e.on(n.join(" "),(function(){te(e)})),e.on("click",(function(t){t.target.outerHTML.startsWith("<code")&&t.target.outerHTML.includes('data-type="merge-tag"')&&e.selection.select(t.target)})),e.on("TextColorChange",(function(e){var n="".concat((null==e?void 0:e.color)||"").trim().toLowerCase();n&&((t.color_map||[]).some((function(e,t){return t%2==0&&!(n!=="".concat(e||"").trim().toLowerCase())}))||setTimeout((function(){Z(d.Nw.saveColor(n))}),100))}))},$.current&&$.current.remove();var r=d.wl.getCurrentSelection(Q);(null!=r&&r.active||"classic"===Y)&&($.current=i.Z.EditorManager.createEditor(n,t),$.current.render())}),[ne,v,x,P]),(0,o.useEffect)((function(){return function(){$.current&&(te($.current),$.current.destroy())}}),[]),(0,o.useLayoutEffect)((function(){$.current&&te($.current)}),[U,u]);var oe=e.id,ae=e.className,le=e.style;return o.createElement(o.Fragment,null,o.createElement(S.Container,{id:oe,className:s()("content-editor-container",ae),style:le,ref:X},r),D&&o.createElement(h,{isOpened:D,editor:null==$?void 0:$.current,onClose:function(){return R(!1)}}))}));t.default=x;var w,C,S={Container:c.ZP.div(r||(w=["\n    a {\n      pointer-events: none !important;\n\n      code[data-type='merge-tag'] {\n        pointer-events: all !important;\n      }\n    }\n\n    &.disabled-inline-controls {\n      .tox-toolbar:first-child > :last-child {\n        justify-content: flex-start !important;\n      }\n    }\n  "],C||(C=w.slice(0)),r=Object.freeze(Object.defineProperties(w,{raw:{value:Object.freeze(C)}}))))}},19375:function(e){e.exports="code[data-type='merge-tag'] {\n  display: inline-block;\n  padding: 0px 8px;\n  margin-bottom: 1px;\n  border: 1px dashed rgba(106, 184, 229, 0.8);\n  cursor: pointer !important;\n  border-radius: 3px;\n  font-family: inherit;\n  position: relative;\n}\n\ncode[data-type='merge-tag']::before {\n  content: attr(data-merge-tag-label);\n}\n\ncode[data-type='merge-tag'],\n.merge-tag-text,\n.merge-tag-icon {\n  transition: all 0.15s ease-in-out;\n  -moz-transition: all 0.15s ease-in-out;\n  -webkit-transition: all 0.15s ease-in-out;\n  -o-transition: all 0.15s ease-in-out;\n}\n\ncode[data-type='merge-tag']:hover {\n  border-color: #6ab8e5;\n}\n\ncode[data-type='merge-tag']:not([data-mce-selected]):hover .merge-tag-text {\n  opacity: 0.6;\n}\n\ncode[data-type='merge-tag'][data-mce-selected] {\n  border-style: solid;\n  outline: none !important;\n}\n\ncode[data-type='merge-tag'] .merge-tag-icon {\n  background-color: #6f7980;\n  display: flex;\n  position: absolute;\n  top: 13px;\n  right: -8px;\n  justify-content: center;\n  padding: 2px 3px;\n  border-radius: 3px;\n  z-index: 1;\n  opacity: 0;\n}\n\ncode[data-type='merge-tag']:hover .merge-tag-icon {\n  opacity: 1;\n}\n\ncode[data-type='merge-tag'] svg,\nimg {\n  width: auto;\n  font-size: 10px;\n  color: #fff;\n}\n\ncode[data-type='merge-tag'] img {\n  width: 10px;\n  height: 10px;\n}\n"}}]);