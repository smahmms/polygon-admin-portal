(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[351],{1111:function(e,a,t){"use strict";var s=t(0),l=t(452),c=t(450),i=t(451),n=(t(442),t(1277)),r=t.n(n),o=t(1278),d=t(5);r.a.workerClass=o.a,r.a.accessToken="pk.eyJ1Ijoic2hha3VyOTk5IiwiYSI6ImNsODMwYjFvejAxNHgzdnA2dzl5OGVhZnMifQ.wBjwtq5J4UmUw0OBLRJTIQ";a.a=e=>{let{location:a,setLocation:t}=e;return Object(s.useEffect)((()=>{const e=new r.a.Map({container:"Mlajanmap",style:"mapbox://styles/mapbox/streets-v11",center:[a.lng,a.lat],zoom:11}),s=new r.a.Marker({draggable:!0,color:"#b40219"}).setLngLat([a.lng,a.lat]).addTo(e);return e.addControl(new r.a.NavigationControl),e.on("click",(function(e){const a=document.getElementById("Mlajancoordinates");s.setLngLat([e.lngLat.lng,e.lngLat.lat]),t({lat:e.lngLat.lat,lng:e.lngLat.lng}),a.style.display="block"})),s.on("dragend",(function(){const e=document.getElementById("Mlajancoordinates"),a=s.getLngLat();t({lat:a.lat,lng:a.lng}),e.style.display="block"})),()=>e.remove()}),[]),Object(d.jsx)(s.Fragment,{children:Object(d.jsx)(l.a,{children:Object(d.jsx)(c.a,{className:"p-1",children:Object(d.jsxs)(i.a,{md:"12",className:"CustomMapboxDesign",children:[Object(d.jsx)("small",{children:"Drag the marker to your location :"}),Object(d.jsxs)("div",{className:"Mlajanmap-container",children:[Object(d.jsx)("div",{id:"Mlajanmap"}),Object(d.jsxs)("pre",{id:"Mlajancoordinates",className:"Mlajancoordinates",children:["Lng: ",a.lng?a.lng.toFixed(4):""," ",Object(d.jsx)("br",{}),"Lat: ",a.lng?a.lat.toFixed(4):""]})]})]})})})})}},2540:function(e,a,t){"use strict";t.r(a);var s=t(0),l=t(432),c=t(452),i=t(446),n=t(445),r=t(449),o=t(465),d=t(451),u=t(1654),A=t(467),j=t(1657),b=t(463),h=t(1680),g=t(475),p=(t(803),t(711)),m=t(440),O=t(1720),x=t(2318),y=t(437),f=t(450),v=t(5);var _=e=>{let{userInput:a,setUserInput:t,handleChange:l}=e;function c(e){let a=0,t=0,s=0,l=0;for(const o of e)o>="a"&&o<="z"||o>="A"&&o<="Z"?a++:o>="0"&&o<="9"?s++:/[\u{0980}-\u{09FF}\u{1100}-\u{11FF}\u{1A00}-\u{1A1F}\u{1B80}-\u{1BBF}\u{1C00}-\u{1C4F}\u{1C50}-\u{1C7F}\u{1CC0}-\u{1CCF}\u{1CD0}-\u{1CFF}\u{A800}-\u{A82F}]/u.test(o)?t++:l++;const c=a+s+2*t+l;let i=0,n=0;0===t?c>160?(i=c/150,n=c%150):c<=160&&(i=c/160,n=c%160):0===a?c>140?(i=c/130,n=c%130):c<=140&&(i=c/140,n=c%140):c>160?(i=c/150,n=c%150):c<=160&&(i=c/160,n=c%160);const r=a+s+t+l;return console.log(a,s,t,l,c),{finalV:c,actualLength:r,smsCount:i,letterCount:n}}return Object(v.jsx)(s.Fragment,{children:Object(v.jsxs)(f.a,{className:"pr-3",children:[Object(v.jsx)(d.a,{sm:"6",children:Object(v.jsxs)(j.a,{children:[Object(v.jsxs)(b.a,{for:"sms_from",children:["From",Object(v.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(v.jsx)(h.a,{type:"text",name:"sms_from",id:"sms_from",value:a.sms_from,onChange:l,required:!0,placeholder:"from here..."})]})}),Object(v.jsx)(d.a,{sm:"12",children:Object(v.jsxs)(j.a,{children:[Object(v.jsxs)(b.a,{for:"body",children:["body",Object(v.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(v.jsx)(h.a,{type:"textarea",name:"sms_body",id:"sms_body",value:a.sms_body,onChange:e=>{c(a.sms_body).smsCount>5||c(e.target.value).smsCount<=5&&l(e)},required:!0,placeholder:"your message"}),Object(v.jsxs)("p",{className:"text-right",style:c(a.sms_body).smsCount>=5?{margin:"2px",color:"red"}:{margin:"2px",color:"blue"},children:[Math.floor(c(a.sms_body).smsCount),"/",c(a.sms_body).letterCount]})]})})]})})},C=t(2123),I=t.n(C);var S=e=>{let{userInput:a,handleChange:t,emailEditorRef:l,formik:c}=e;const[i,n]=Object(s.useState)(!1),r=e=>{},o=e=>{l.current.editor.exportHtml((e=>{const{design:a,html:t}=e;c.setFieldValue("design",a),c.setFieldValue("html",t)}))};return Object(v.jsx)(s.Fragment,{children:Object(v.jsxs)(f.a,{className:"pr-3",children:[Object(v.jsx)(d.a,{sm:"6",children:Object(v.jsxs)(j.a,{children:[Object(v.jsxs)(b.a,{for:"title",children:["Subject",Object(v.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(v.jsx)(h.a,{type:"text",name:"email_title",id:"email_title",value:a.email_title,onChange:t,required:!0,placeholder:"subject here..."})]})}),Object(v.jsx)(d.a,{sm:"12",children:Object(v.jsxs)(j.a,{style:{overflow:"scroll"},children:[Object(v.jsxs)(b.a,{for:"body",children:["body",Object(v.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(v.jsx)(I.a,{ref:l,onLoad:e=>{e.addEventListener("design:loaded",r),e.addEventListener("design:updated",o),e.registerCallback("image",(function(e,a){console.log("uploading"),a({progress:0});const t=new FormData;t.append("image",e.attachments[0]),g.a.singleImageUpload(t,{onUploadProgress:e=>{const{loaded:t,total:s}=e,l=Math.round(100*t/s);l<100&&a({progress:l})}}).then((e=>{a({progress:100,url:e.data.payload.image_url})})).catch((e=>{Object(y.a)(e)}))}))},onReady:e=>{var a,t,s,r,o;i||(n(!0),Object.keys(null===c||void 0===c||null===(a=c.values)||void 0===a?void 0:a.design).length&&null!==l&&void 0!==l&&null!==(t=l.current)&&void 0!==t&&t.editor&&(null===l||void 0===l||null===(s=l.current)||void 0===s||null===(r=s.editor)||void 0===r||r.loadDesign(null===c||void 0===c||null===(o=c.values)||void 0===o?void 0:o.design)))},scriptUrl:"./embed.js",options:{displayMode:"email",tools:{image:{properties:{src:{value:{url:"data:image/png;base64,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"}}}},form:{enabled:!0}}}})]})})]})})},B=t(1682),k=t(461),N=t(448);var R=e=>{let{userInput:a,uploadImg:t,handleChange:l,pushfilePrevw:c,setPushFilePrevw:i,handleChangeVoucherSelect:n,voucherList:r}=e;return Object(v.jsx)(s.Fragment,{children:Object(v.jsxs)(f.a,{className:"pr-3",children:[Object(v.jsx)(d.a,{sm:"6",children:Object(v.jsxs)(j.a,{children:[Object(v.jsx)(b.a,{for:"voucherid",children:"Select Voucher"}),Object(v.jsx)(k.a,{theme:N.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",onChange:e=>n(e),isClearable:!0,options:r})]})}),Object(v.jsx)(d.a,{sm:"6",children:" "}),Object(v.jsx)(d.a,{sm:"6",children:Object(v.jsxs)(j.a,{children:[Object(v.jsxs)(b.a,{for:"title",children:["Title",Object(v.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(v.jsx)(h.a,{type:"text",name:"push_notification_title",id:"push_notification_title",value:a.push_notification_title,onChange:l,required:!0,placeholder:"your title"})]})}),Object(v.jsx)(d.a,{sm:"12",children:Object(v.jsxs)(j.a,{children:[Object(v.jsxs)(b.a,{for:"body",children:["body",Object(v.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(v.jsx)(h.a,{type:"textarea",name:"push_notification_body",id:"push_notification_body",value:a.push_notification_body,onChange:l,required:!0,placeholder:"your message"})]})}),Object(v.jsx)(d.a,{sm:"12",children:Object(v.jsxs)(j.a,{children:[Object(v.jsx)(b.a,{for:"url",children:"Redirect-url"}),Object(v.jsx)(h.a,{type:"text",name:"url",id:"url",value:a.url,onChange:l,placeholder:"Enter a redirect url"})]})}),Object(v.jsxs)(d.a,{md:"12",className:"mb-1",children:[Object(v.jsx)(b.a,{for:"voucherImage",children:"Upload Image"}),Object(v.jsxs)("div",{className:"d-flex",children:[Object(v.jsxs)("div",{className:"file position-relative overflow-hidden mr-2",children:[Object(v.jsxs)("div",{className:"text-center p-1",style:{height:"102px",width:"102px",border:"1px dashed #d9d9d9",backgroundColor:"#fafafa"},children:[Object(v.jsx)("span",{children:Object(v.jsx)(B.a,{size:20,className:"my-1"})})," ",Object(v.jsx)("br",{}),Object(v.jsx)("span",{children:"Upload"})]}),Object(v.jsx)(h.a,{style:{position:"absolute",opacity:"0",left:"0",top:"0",height:"102px",width:"102px",cursor:"pointer"},type:"file",accept:"image/png, image/jpeg",name:"voucherImage",id:"voucherImage",onChange:e=>{t(e.target.files[0],"push_notification_image",i)}})]}),c&&Object(v.jsx)("img",{src:c,alt:"push notification img",height:"100px"})]})]}),Object(v.jsx)(d.a,{md:"12",className:"mb-1",children:Object(v.jsxs)("ul",{children:[Object(v.jsxs)("li",{children:[Object(v.jsx)("b",{children:"Size:"})," Width must be at least 300px, height at least 200px. Avoid using images wider than 2000 pixels. Also, make sure that your image is not bigger than 1MB."]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("b",{children:"Aspect ratio:"})," Use images in landscape format respecting a 2:1 ratio (e.g. 1000x500px)"]})]})})]})})};var E=e=>{let{c:a,userInput:t,handleChange:l,businesscategorylist:c,catRef:i,handleChangeFBCategory:n,handleChangeFBSubCategory:r,uploadImg:o,fbfilePrevw:u,setFbFilePrevw:g,instafilePrevw:p,setInstaFilePrevw:m,subCategory:O,fbSelectdCategory:x,fbSelectdSubCategory:y,handleChangeInstaCategory:_,handleChangeInstaSubCategory:C,instasubCategory:I,instaSelectdCategory:S,instaSelectdSubCategory:R}=e;return Object(v.jsx)(s.Fragment,{children:Object(v.jsxs)(f.a,{className:"pr-3",children:[Object(v.jsx)(d.a,{sm:"12",children:Object(v.jsxs)(j.a,{children:[Object(v.jsxs)(b.a,{for:"body",children:["body",Object(v.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(v.jsx)(h.a,{type:"textarea",name:"fb_page_post"===a.key_name?"fb_page_post_body":"instagram_body",id:"fb_page_post_body",value:"fb_page_post"===a.key_name?t.fb_page_post_body:t.instagram_body,onChange:l,required:!0,placeholder:"your message"})]})}),Object(v.jsx)(d.a,{md:"6",sm:"6",children:Object(v.jsxs)(j.a,{children:[Object(v.jsxs)(b.a,{for:"fb_page_post_category_ids",children:["Facebook Page Category ",Object(v.jsx)("span",{style:{color:"red"},children:"*"})]}),c.length?Object(v.jsx)(k.a,{ref:i,theme:N.i,className:"basic-multi-select",classNamePrefix:"select",name:"businesscategories",defaultValue:"fb_page_post"===a.key_name?x:S,options:c,onChange:e=>"fb_page_post"===a.key_name?n(e):_(e),isMulti:!0,isClearable:!1}):Object(v.jsx)(A.a,{color:"primary"}),Object(v.jsx)(h.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:e=>i.current.select.focus(),value:t.fb_page_post_category_ids||"",onChange:e=>""})]})}),0!==(null===O||void 0===O?void 0:O.length)&&"fb_page_post"===a.key_name&&Object(v.jsx)(d.a,{sm:"4",children:Object(v.jsxs)(j.a,{children:[Object(v.jsx)(b.a,{for:"facebookpage_subcategory_localuid",children:"Facebook Page Sub Category"}),Object(v.jsx)(k.a,{theme:N.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",defaultValue:y,onChange:e=>r(e),isMulti:!0,isClearable:!1,options:null===O||void 0===O?void 0:O.map((e=>({value:e.uid,label:e.name})))})]})}),0!==(null===I||void 0===I?void 0:I.length)&&"instagram"===a.key_name&&Object(v.jsx)(d.a,{sm:"4",children:Object(v.jsxs)(j.a,{children:[Object(v.jsx)(b.a,{for:"facebookpage_subcategory_localuid",children:"Facebook Page Sub Category"}),Object(v.jsx)(k.a,{theme:N.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",defaultValue:R,onChange:e=>C(e),isMulti:!0,isClearable:!1,options:null===I||void 0===I?void 0:I.map((e=>({value:e.uid,label:e.name})))})]})}),Object(v.jsxs)(d.a,{md:"12",className:"mb-1",children:[Object(v.jsx)(b.a,{for:"voucherImage",children:"Upload Image"}),Object(v.jsxs)("div",{className:"d-flex",children:[Object(v.jsxs)("div",{className:"file position-relative overflow-hidden mr-2",children:[Object(v.jsxs)("div",{className:"text-center p-1",style:{height:"102px",width:"102px",border:"1px dashed #d9d9d9",backgroundColor:"#fafafa"},children:[Object(v.jsx)("span",{children:Object(v.jsx)(B.a,{size:20,className:"my-1"})})," ",Object(v.jsx)("br",{}),Object(v.jsx)("span",{children:"Upload"})]}),Object(v.jsx)(h.a,{style:{position:"absolute",opacity:"0",left:"0",top:"0",height:"102px",width:"102px",cursor:"pointer"},type:"file",accept:"image/png, image/jpeg",name:"voucherImage",id:"voucherImage",onChange:e=>{o(e.target.files[0],"fb_page_post"===a.key_name?"fb_page_post_image":"instagram_image","fb_page_post"===a.key_name?g:m)}})]}),u&&"fb_page_post"===a.key_name?Object(v.jsx)("img",{src:u,alt:"voucher img",height:"100px"}):p&&"instagram"===a.key_name?Object(v.jsx)("img",{src:p,alt:"voucher img",height:"100px"}):null]})]})]})})};var w=e=>{let{userInput:a,setUserInput:t,setSelectedGroup:l,selectedGroup:c,groupList:i,setSelectedCampaignRule:n,selectedCampaignRule:r,campaignList:o,RuleRef:A,GrpRef:g}=e;return Object(v.jsxs)(s.Fragment,{children:[Object(v.jsx)(d.a,{sm:"3",className:"mb-2 mt-1",children:Object(v.jsx)(j.a,{children:Object(v.jsx)(u.a,{type:"switch",onChange:e=>{e.target.checked?(t({...a,is_rule_base_notification:!0}),l({})):(t({...a,is_rule_base_notification:!1}),n({}))},id:"is_rule_base_notification",label:"Is Campaign Base Notification?"})})}),a.is_rule_base_notification&&Object(v.jsx)(d.a,{sm:"3",children:Object(v.jsxs)(j.a,{children:[Object(v.jsxs)(b.a,{for:"groups",children:["Select Campaign",Object(v.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(v.jsx)(k.a,{theme:N.i,maxMenuHeight:200,className:"react-select",id:"group",classNamePrefix:"select",value:{value:r.value,label:r.label?r.label:"select..."},onChange:e=>{n({value:e.value,label:e.label})},options:o,ref:A}),Object(v.jsx)(h.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:e=>A.current.select.focus(),value:(null===r||void 0===r?void 0:r.value)||"",onChange:e=>""})]})}),!a.is_rule_base_notification&&Object(v.jsx)(d.a,{sm:"3",children:Object(v.jsxs)(j.a,{children:[Object(v.jsxs)(b.a,{for:"groups",children:["Group",Object(v.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(v.jsx)(k.a,{theme:N.i,maxMenuHeight:200,className:"react-select",id:"group",classNamePrefix:"select",value:{value:c.value,label:c.label?c.label:"select..."},onChange:e=>{l({value:e.value,label:e.label})},options:null===i||void 0===i?void 0:i.map((e=>({value:e.id,label:e.group_name}))),ref:g}),Object(v.jsx)(h.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:e=>g.current.select.focus(),value:(null===c||void 0===c?void 0:c.value)||"",onChange:e=>""})]})})]})};var Q=()=>Object(v.jsx)(s.Fragment,{});var D=e=>{let{userInput:a,setUserInput:t,adRuleList:l,selectedAdRule:c,setSelectedAdRule:i,handleChange:n,AdRef:r,RptRef:o,MonthRef:A,DayRef:g}=e;return console.log("userInput.repeat_start_date ==> ",a.repeat_start_date),Object(v.jsxs)(s.Fragment,{children:[Object(v.jsx)(d.a,{sm:"3",className:"mb-1 mt-1",children:Object(v.jsx)(j.a,{children:Object(v.jsx)(u.a,{type:"switch",onChange:e=>{e.target.checked?t({...a,is_Ad:!0,isScheduled:!1,isRepeat:!1}):(t({...a,is_Ad:!1,isAdScheduled:!1}),i({}))},id:"is_Ad",label:"Is AD?"})})}),a.is_Ad&&!1,Object(v.jsx)(d.a,{sm:"12"}),a.is_Ad&&Object(v.jsx)(d.a,{sm:"3",className:"mb-1 mt-1",children:Object(v.jsx)(j.a,{children:Object(v.jsx)(u.a,{type:"switch",onChange:e=>{e.target.checked?t({...a,isAdScheduled:!0}):t({...a,isAdScheduled:!1,startDate:null,endDate:null})},id:"isAdScheduled",label:"Is Ad Scheduled?"})})}),a.isAdScheduled&&Object(v.jsx)(d.a,{md:"4",children:Object(v.jsxs)(j.a,{children:[Object(v.jsxs)(b.a,{for:"startDate",children:["Start Date",Object(v.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(v.jsx)(h.a,{type:"datetime-local",min:(new Date).toLocaleDateString("fr-CA"),name:"startDate",id:"startDate",value:a.startDate,onChange:n,required:!0,placeholder:"0"})]})}),a.isAdScheduled&&Object(v.jsx)(d.a,{md:"4",children:Object(v.jsxs)(j.a,{children:[Object(v.jsxs)(b.a,{for:"endDate",children:["End Date",Object(v.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(v.jsx)(h.a,{type:"datetime-local",min:(new Date).toLocaleDateString("fr-CA"),name:"endDate",id:"endDate",value:a.endDate,onChange:n,required:!0,placeholder:"0"})]})}),Object(v.jsx)(d.a,{sm:"3",className:"mb-1 mt-1",children:Object(v.jsx)(j.a,{children:Object(v.jsx)(u.a,{type:"switch",onChange:e=>{e.target.checked?t({...a,isScheduled:!0,isRepeat:!1}):t({...a,isScheduled:!1,effective_date:null})},id:"isScheduled",checked:a.isScheduled,label:"Is Scheduled?"})})}),a.isScheduled&&Object(v.jsx)(d.a,{md:"4",children:Object(v.jsxs)(j.a,{children:[Object(v.jsxs)(b.a,{for:"effective_date",children:["Scheduled Date",Object(v.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(v.jsx)(h.a,{type:"datetime-local",min:(new Date).toLocaleDateString("fr-CA"),name:"effective_date",id:"effective_date",value:a.effective_date,onChange:n,required:!0,placeholder:"0"})]})}),Object(v.jsx)(d.a,{sm:"12"}),Object(v.jsx)(d.a,{sm:"3",className:"mb-1 mt-1",children:Object(v.jsx)(j.a,{children:Object(v.jsx)(u.a,{type:"switch",onChange:e=>{e.target.checked?t({...a,isRepeat:!0,isScheduled:!1}):t({...a,isRepeat:!1,expiry_date:null,repeat_type:"",repeat_time:null})},id:"isRepeat",checked:a.isRepeat,label:"Is Repeat?"})})}),a.isRepeat&&Object(v.jsx)(d.a,{md:"4",children:Object(v.jsxs)(j.a,{children:[Object(v.jsxs)(b.a,{for:"startDate",children:["Start Date",Object(v.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(v.jsx)(h.a,{type:"date",min:(new Date).toLocaleDateString("fr-CA"),name:"repeat_start_date",id:"repeat_start_date",value:a.repeat_start_date,onChange:n,required:!0,placeholder:"0"})]})}),a.isRepeat&&Object(v.jsx)(d.a,{md:"4",children:Object(v.jsxs)(j.a,{children:[Object(v.jsxs)(b.a,{for:"expiry_Date",children:["Expiry Date",Object(v.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(v.jsx)(h.a,{type:"date",min:(new Date).toLocaleDateString("fr-CA"),name:"expiry_date",id:"expiry_date",value:a.expiry_date,onChange:n,required:!0,placeholder:"0"})]})}),a.isRepeat&&Object(v.jsx)(d.a,{sm:"4",children:Object(v.jsxs)(j.a,{children:[Object(v.jsxs)(b.a,{for:"repeat_type",children:["Repeat Type",Object(v.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(v.jsx)(k.a,{theme:N.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",onChange:e=>{t({...a,repeat_type:e.value})},options:[{value:"Daily",label:"Daily"},{value:"Weekly",label:"Weekly"},{value:"Monthly",label:"Monthly"}],ref:o}),Object(v.jsx)(h.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:e=>o.current.select.focus(),value:(null===a||void 0===a?void 0:a.repeat_type)||"",onChange:e=>""})]})}),a.isRepeat&&"Monthly"===a.repeat_type&&Object(v.jsx)(d.a,{md:"3",children:Object(v.jsxs)(j.a,{children:[Object(v.jsxs)(b.a,{for:"startDate",children:["Date of Month",Object(v.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(v.jsx)(k.a,{theme:N.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",onChange:e=>{if(e){const s=e.map((e=>e.label));t({...a,repeat_month_day:s.toString()})}else t({...a,repeat_month_day:""})},options:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"},{value:7,label:"7"},{value:8,label:"8"},{value:9,label:"9"},{value:10,label:"10"},{value:11,label:"11"},{value:12,label:"12"},{value:13,label:"13"},{value:14,label:"14"},{value:15,label:"15"},{value:16,label:"16"},{value:17,label:"17"},{value:18,label:"18"},{value:19,label:"19"},{value:20,label:"20"},{value:21,label:"21"},{value:22,label:"22"},{value:23,label:"23"},{value:24,label:"24"},{value:25,label:"25"},{value:26,label:"26"},{value:27,label:"27"},{value:28,label:"28"},{value:29,label:"29"},{value:30,label:"30"},{value:31,label:"31"}],menuPlacement:"auto",ref:A,isMulti:!0}),Object(v.jsx)(h.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:e=>A.current.select.focus(),value:(null===a||void 0===a?void 0:a.repeat_month_day)||"",onChange:e=>""})]})}),a.isRepeat&&"Weekly"===a.repeat_type&&Object(v.jsx)(d.a,{md:"3",children:Object(v.jsxs)(j.a,{children:[Object(v.jsxs)(b.a,{for:"startDate",children:["Day",Object(v.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(v.jsx)(k.a,{theme:N.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",onChange:e=>{if(e){const s=e.map((e=>e.label));t({...a,repeat_day:s.toString()})}else t({...a,repeat_day:""})},options:[{value:"Saturday",label:"Saturday"},{value:"Sunday",label:"Sunday"},{value:"Monday",label:"Monday"},{value:"Tuesday",label:"Tuesday"},{value:"Wednesday",label:"Wednesday"},{value:"Thursday",label:"Thursday"},{value:"Friday",label:"Friday"}],menuPlacement:"auto",ref:g,isMulti:!0}),Object(v.jsx)(h.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:e=>g.current.select.focus(),value:(null===a||void 0===a?void 0:a.repeat_day)||"",onChange:e=>""})]})}),a.isRepeat&&("Daily"===a.repeat_type||"Weekly"===a.repeat_type||"Monthly"===a.repeat_type)&&Object(v.jsx)(d.a,{md:"3",children:Object(v.jsxs)(j.a,{children:[Object(v.jsxs)(b.a,{for:"startDate",children:["Time",Object(v.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(v.jsx)(h.a,{type:"time",min:(new Date).toLocaleDateString("fr-CA"),name:"repeat_time",id:"repeat_time",value:a.repeat_time,onChange:n,required:!0,placeholder:"0"})]})})]})},F=t(1111);const L={html:"",design:{}};a.default=()=>{const e=Object(p.g)(),a=Object(s.useRef)(),t=Object(s.useRef)(null),f=Object(s.useRef)(),C=Object(s.useRef)(),I=Object(s.useRef)(),B=Object(s.useRef)(),k=Object(s.useRef)(),N=Object(s.useRef)(),M=JSON.parse(localStorage.getItem("userData")),[P,T]=Object(s.useState)([]),[V,z]=Object(s.useState)(null),[H,q]=Object(s.useState)([]),[G,X]=Object(s.useState)([]),[U,W]=Object(s.useState)([]),[Z,K]=Object(s.useState)(null),[J,Y]=Object(s.useState)([]),[$,ee]=Object(s.useState)([]),[ae,te]=Object(s.useState)(null),[se,le]=Object(s.useState)([]),[ce,ie]=Object(s.useState)([]),[ne,re]=Object(s.useState)({}),[oe,de]=Object(s.useState)([]),[ue,Ae]=Object(s.useState)({}),[je,be]=Object(s.useState)([]),[he,ge]=Object(s.useState)(!1),[pe,me]=Object(s.useState)([]),[Oe,xe]=Object(s.useState)({}),[ye,fe]=Object(s.useState)({url:null,radius:0,is_location:!1,fb_page_post_body:"",fb_page_post_image:"",sms_body:"",push_notification_title:"",push_notification_body:"",push_notification_image:"",voucherId:"",email_title:"",email_body:"",email_attachment:"",instagram_body:"",instagram_image:"",rule_id:0,group_id:0,qouta_id:0,adRule_id:0,effective_date:null,expiry_date:null,isScheduled:!1,isRepeat:!1,repeat_type:"",repeat_time:0,is_rule_base_notification:!1,is_Ad:!1,isAdScheduled:!1,startDate:"",endDate:"",repeat_start_date:null,repeat_day:"",repeat_month_day:"",fb_page_post_category_ids:[],facebookpage_subcategory_localuids:[],instafb_page_post_category_ids:[],instafacebookpage_subcategory_localuids:[],black_list_group_id:[],push_from:""}),[ve,_e]=Object(s.useState)({lat:23.8041,lng:90.4152}),[Ce,Ie]=Object(s.useState)(L),[Se,Be]=Object(s.useState)({}),[ke,Ne]=Object(s.useState)([]),[Re,Ee]=Object(s.useState)([]),we=Object(x.a)({initialValues:Ce,enableReinitialize:!0,onSubmit:e=>{}});Object(s.useEffect)((async()=>{Promise.all([g.a.runningcampaignList().then((e=>{be(e.data.payload.map((e=>({value:e.id,label:e.campaign_name}))))})).catch((e=>{Object(y.a)(e)})),g.a.getCampaignChannelList().then((e=>{T(e.data.payload)})).catch((e=>{Object(y.a)(e)})),g.a.getFbpageCategory().then((e=>{q(e.data.payload.map((e=>({value:{id:e.uid,subcategory:e.subcategory},label:null===e||void 0===e?void 0:e.name}))))})).catch((e=>{console.log(e.response),Object(y.a)(e)})),g.a.getCentralGroup().then((e=>{const a=[];for(const t of e.data.payload)!0===t.is_approved&&a.push(t);de(a)})).catch((e=>{Object(y.a)(e)})),g.a.adRuleList().then((e=>{const a=[];for(const t of e.data.payload)!0===t.is_approved&&a.push(t);me(a)})).catch((e=>{Object(y.a)(e)})),g.a.pmsVoucherList().then((async e=>{const{payload:a}=e.data,{approvepending:t=[],mypending:s=[],list:l=[]}=a,c=l.map((e=>({value:e.voucherid,label:e.title})));Ne(c),Ee(l)})).catch((e=>{Object(y.a)(e)}))])}),[]);const Qe=e=>{Y(e);const a=[],t=[];e.length&&e[e.length-1].value.subcategory&&e.map((e=>{e.value.subcategory.map((e=>{a.push(e)})),t.push(e.value.id)})),0===e.length?(X([]),fe({...ye,fb_page_post_category_ids:[]})):(X(a.length?a:G),fe({...ye,fb_page_post_category_ids:t}))},De=e=>{if(e){Be(e);let a="";Re.some((t=>(console.log("item.voucherid === selected.value => ",t.voucherid," ",e.value),t.voucherid===e.value&&(a=t.description,!0)))),console.log("body => ",a),fe({...ye,voucherId:e.value,push_notification_body:a})}else Be({}),fe({...ye,voucherId:"",push_notification_body:""})},Fe=e=>{ee(e),fe({...ye,facebookpage_subcategory_localuids:e.map((e=>e.value))})},Le=e=>{le(e);const a=[],t=[];e.length&&e[e.length-1].value.subcategory&&e.map((e=>{e.value.subcategory.map((e=>{a.push(e)})),t.push(e.value.id)})),0===e.length?(W([]),fe({...ye,instafb_page_post_category_ids:[]})):(W(a.length?a:G),fe({...ye,instafb_page_post_category_ids:t}))},Me=e=>{ie(e),fe({...ye,instafacebookpage_subcategory_localuids:e.map((e=>e.value))})},Pe=async(e,a,t)=>{const s=new FormData;s.append("image",e),await g.a.singleImageUpload(s).then((async s=>{ye[a]=await s.data.payload.image_url,fe({...ye}),e&&t(URL.createObjectURL(e))})).catch((e=>{console.log(e.response)}))},Te=e=>{fe({...ye,[e.target.name]:e.target.value})};console.log("location => ",ve);return Object(v.jsxs)(s.Fragment,{children:[Object(v.jsx)(l.a.Ripple,{className:"mb-1",color:"primary",tag:m.b,to:"vendor"===M.role?"/allBulkNotificationsVendor":"/allBulkNotifications",children:Object(v.jsxs)("div",{className:"d-flex align-items-center",children:[Object(v.jsx)(O.a,{size:17,style:{marginRight:"5px"}}),Object(v.jsx)("span",{children:"Back"})]})}),Object(v.jsxs)(c.a,{children:[Object(v.jsx)(i.a,{className:"border-bottom",children:Object(v.jsx)(n.a,{tag:"h4",children:"Create Bulk Notification"})}),Object(v.jsx)(r.a,{style:{paddingTop:"15px",paddingRight:0},children:Object(v.jsxs)(o.a,{className:"row",onSubmit:a=>{var t;a.preventDefault();const s=null===we||void 0===we||null===(t=we.values)||void 0===t?void 0:t.html;let{group_id:l,qouta_id:c,adRule_id:i,rule_id:n}=ye;l=parseInt(ne.value),c=1,i=parseInt(Oe.value),n=parseInt(ue.value),ge(!0),g.a.createBulkNotification({...ye,is_location_base:ye.is_location,lat:ve.lat,long:ve.lng,distance_radius:ye.radius,email_body:s,group_id:l,qouta_id:c,adRule_id:i,rule_id:n,facebookpage_subcategory_ids:ye.facebookpage_subcategory_localuids}).then((a=>{Object(y.c)(a),e.push("vendor"===M.role?"/allBulkNotificationsVendor":"/allBulkNotifications"),ge(!1)})).catch((e=>{Object(y.a)(e),ge(!1)}))},autoComplete:"off",children:[0!==P.length?P.map((e=>e.bulk_notification&&Object(v.jsx)(d.a,{sm:"12",className:"mb-1",children:Object(v.jsxs)(c.a,{children:[Object(v.jsxs)(i.a,{className:"border-bottom",children:[Object(v.jsx)(n.a,{tag:"h6",children:e.key_name.replace(/_/g," ").toUpperCase()}),Object(v.jsx)(u.a,{type:"switch",onChange:a=>{a.target.checked?fe({...ye,[e.key_name]:!0}):fe({...ye,[e.key_name]:!1})},id:e.channel_name})]}),Object(v.jsxs)(r.a,{style:{paddingRight:0},children:[ye[e.key_name]&&"sms"===e.key_name&&Object(v.jsx)(_,{userInput:ye,handleChange:Te}),ye[e.key_name]&&"email"===e.key_name&&Object(v.jsx)(S,{userInput:ye,handleChange:Te,emailEditorRef:t,formik:we}),ye[e.key_name]&&"push_notification"===e.key_name&&Object(v.jsx)(R,{userInput:ye,setUserInput:fe,handleChange:Te,pushfilePrevw:V,setPushFilePrevw:z,uploadImg:Pe,handleChangeVoucherSelect:De,voucherList:ke}),ye[e.key_name]&&("fb_page_post"===e.key_name||"instagram"===e.key_name)&&Object(v.jsx)(E,{c:e,userInput:ye,handleChange:Te,businesscategorylist:H,catRef:a,handleChangeFBCategory:Qe,handleChangeFBSubCategory:Fe,uploadImg:Pe,fbfilePrevw:Z,setFbFilePrevw:K,instafilePrevw:ae,setInstaFilePrevw:te,subCategory:G,fbSelectdCategory:J,fbSelectdSubCategory:$,handleChangeInstaCategory:Le,handleChangeInstaSubCategory:Me,instasubCategory:U,instaSelectdCategory:se,instaSelectdSubCategory:ce})]})]})},e.id))):Object(v.jsx)(d.a,{sm:"12",className:"text-center",children:Object(v.jsx)(A.a,{color:"blue",size:"md",className:"m-3"})}),Object(v.jsx)(w,{userInput:ye,setUserInput:fe,setSelectedGroup:re,selectedGroup:ne,groupList:oe,setSelectedCampaignRule:Ae,selectedCampaignRule:ue,campaignList:je,RuleRef:f,GrpRef:C}),Object(v.jsx)(Q,{}),Object(v.jsx)(d.a,{sm:"12"}),Object(v.jsx)(D,{userInput:ye,setUserInput:fe,adRuleList:pe,selectedAdRule:Oe,setSelectedAdRule:xe,handleChange:Te,AdRef:I,RptRef:N,MonthRef:k,DayRef:B}),Object(v.jsx)(d.a,{sm:"12"}),Object(v.jsx)(d.a,{sm:"3",className:"mb-1 mt-1",children:Object(v.jsx)(j.a,{children:Object(v.jsx)(u.a,{type:"switch",onChange:e=>{e.target.checked?fe({...ye,is_location:!0}):fe({...ye,is_location:!1})},id:"is_location",label:"Is Location Based?"})})}),ye.is_location&&Object(v.jsxs)(s.Fragment,{children:[Object(v.jsx)(d.a,{sm:"6",children:Object(v.jsxs)(j.a,{children:[Object(v.jsxs)(b.a,{for:"Radius",children:["Radius(KM)",Object(v.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(v.jsx)(h.a,{type:"number",name:"radius",id:"radius",value:ye.radius,onChange:Te,required:!0,placeholder:"Enter radius in km",step:.1,min:.5,onWheel:e=>e.target.blur()})]})}),Object(v.jsx)(d.a,{sm:"12",className:"mb-1",children:Object(v.jsx)(F.a,{location:ve,setLocation:_e})})]}),Object(v.jsx)(d.a,{sm:"12",className:"text-center",children:he?Object(v.jsxs)(l.a.Ripple,{color:"primary",className:"mr-1",disabled:!0,style:{marginTop:"25px"},children:[Object(v.jsx)(A.a,{color:"white",size:"sm"}),Object(v.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(v.jsx)(l.a.Ripple,{className:"ml-2",color:"primary",type:"submit",style:{marginTop:"25px"},children:Object(v.jsx)("span",{children:"Submit"})})})]})})]})]})}},437:function(e,a,t){"use strict";t.d(a,"a",(function(){return l})),t.d(a,"b",(function(){return c})),t.d(a,"c",(function(){return i}));t(0);var s=t(107);const l=e=>{try{const a=e.response;404===a.status||401===a.status||400===a.status||500===a.status||409===a.status?s.f.error(a.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):s.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(a){s.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},c=e=>{try{const a=e.response;404!==a.status&&401!==a.status&&400!==a.status||s.f.error(a.data.errors?a.data.errors[Object.keys(a.data.errors)[0]]:a.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(a){s.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},i=e=>{const a=e.data.message||"success";s.f.success(a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},803:function(e,a,t){"use strict";var s=t(75),l=t.n(s),c=t(788),i=t(503);const n=l.a.create();class r{constructor(e){this.jwtConfig={...c.a},this.isAlreadyFetchingAccessToken=!1,this.subscribers=[],this.jwtConfig={...this.jwtConfig,...e},console.log("jwtOverrideConfig ",e),n.interceptors.request.use((e=>{console.log("config ",e);const a=this.getToken();return e.headers.Authorization="".concat(this.jwtConfig.tokenType," ").concat(a),e}),(e=>Promise.reject(e))),n.interceptors.response.use((e=>e),(e=>{const{config:a,response:t}=e,s=a;if(t&&401===t.status){console.log("response.status ",t.status),this.isAlreadyFetchingAccessToken?window.location.replace("logout"):(this.isAlreadyFetchingAccessToken=!0,this.refreshToken().then((e=>{this.isAlreadyFetchingAccessToken=!1,this.setToken(e.data.jwtToken),this.onAccessTokenFetched(e.data.jwtToken)})));return new Promise((e=>{this.addSubscriber((a=>{s.headers.Authorization="".concat(this.jwtConfig.tokenType," ").concat(a),e(n(s))}))}))}return Promise.reject(e)}))}onAccessTokenFetched(e){this.subscribers=this.subscribers.filter((a=>a(e)))}addSubscriber(e){this.subscribers.push(e)}getToken(){return localStorage.getItem("BMStoken")||null}setToken(e){localStorage.setItem("BMStoken",e)}refreshToken(){return n.post(this.jwtConfig.getBMStoken,{username:i.f,password:i.d})}login(){return n.post(this.jwtConfig.getBMStoken,{username:i.f,password:i.d})}bmsDashboard(){return n.get(this.jwtConfig.bmsDashboardEndpoint)}getServiceList(){return n.get(this.jwtConfig.serviceListEndpoint)}campaignList(){return n.get("".concat(this.jwtConfig.campaignEndpoint))}}const{jwtBMS:o}={jwtBMS:new r({})};a.a=o}}]);
//# sourceMappingURL=351.de2bf7c0.chunk.js.map