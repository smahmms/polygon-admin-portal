(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[367],{2419:function(e,t,a){"use strict";a.r(t);var s=a(0),l=a(711),i=a(440),c=a(461),r=a(448),n=(a(471),a(474),a(1720)),o=a(432),d=a(452),m=a(446),j=a(449),b=a(465),u=a(451),h=a(1657),p=a(463),x=a(1680),O=a(467),f=a(621),y=(a(199),a(442)),g=a(460),N=a.n(g),v=a(444),S=a.n(v),T=a(5);const C=S()(N.a);t.default=()=>{const e=Object(l.g)(),{userID:t}=Object(l.i)(),[a,g]=Object(s.useState)([{value:"",label:""}]),[N,v]=Object(s.useState)([{value:"",label:""}]),[S,U]=Object(s.useState)([]),[L,w]=Object(s.useState)(!0),[R,z]=Object(s.useState)(!1),[E,q]=Object(s.useState)({}),[D,F]=Object(s.useState)({userType:!1,userTitle:!1,storeName:!1,email:!1});Object(s.useEffect)((()=>{y.a.userRoleList().then((e=>{const t=e.data.payload.map((e=>({value:e.id,label:e.statusdesc})));g(t)})).catch((e=>{})),y.a.userTitleList().then((e=>{const t=e.data.payload.map((e=>({value:e.id,label:e.statusdesc})));v(t)})).catch((e=>{})),y.a.adminUserDetails({id:t}).then((e=>{const t=e.data.payload[0];let a={};const s=t.fullname?t.fullname.split(" "):[" "," "];a={id:t.id,firstname:s.length?s[0]:"",lastname:2===s.length?s[1]:"",emailid:t.emailid,roleid:t.roleid,rolename:t.adminstatus.statusdesc,storename:t.adminstore.storename,storeid:t.storeid,title:t.titleinfo.statusdesc,titleid:t.titleinfo.id},q(a),w(!1)})).catch((e=>{})),y.a.storeList().then((e=>{const t=e.data.payload.map((e=>({value:e.storeid,label:e.storename})));U(t)})).catch((e=>{}))}),[]);const k=e=>{const t=/\S+@\S+\.\S+/.test(e.target.value);"emailid"===e.target.name&&t&&F({...D,email:!1});const a={...E};"firstname"===e.target.name&&(a.firstname=e.target.value),"lastname"===e.target.name&&(a.lastname=e.target.value),"emailid"===e.target.name&&(a.emailid=e.target.value),q(a)};return Object(T.jsx)(T.Fragment,{children:L?Object(T.jsxs)(T.Fragment,{children:[" ",Object(T.jsx)(f.a,{active:!0})," ",Object(T.jsx)(f.a,{active:!0})]}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)(o.a.Ripple,{className:"ml-2 mb-2",color:"primary",tag:i.b,to:"/user",children:[Object(T.jsx)(n.a,{size:10}),Object(T.jsx)("span",{className:"align-middle ml-50",children:"Back to staff list"})]}),Object(T.jsxs)(d.a,{children:[Object(T.jsx)(m.a,{className:"border-bottom",children:Object(T.jsx)("h5",{children:"Update Staff Info"})}),Object(T.jsx)(j.a,{style:{paddingTop:"15px"},children:Object(T.jsxs)(b.a,{className:"row",style:{width:"100%"},onSubmit:t=>{t.preventDefault();const{id:a,firstname:s,lastname:l,emailid:i,roleid:c,storeid:r,titleid:n}=E,o=/\S+@\S+\.\S+/.test(i),d={...D};if(d.email=!o,d.userType=!c,d.userTitle=!n,d.storeName=!r,F(d),!o)return;const m="".concat(s," ").concat(l);c&&r&&n&&y.a.adminUserEdit({id:a,fullname:m,roleid:c,emailid:i,storeid:r,title:n}).then((t=>{C.fire({icon:"success",title:"Done!",text:"The Staff Info has been updated.",customClass:{confirmButton:"btn btn-success"}}),setTimeout((function(){e.replace("/user")}),1e3)})).catch((e=>{}))},autoComplete:"off",children:[Object(T.jsx)(u.a,{sm:"3",children:Object(T.jsxs)(h.a,{children:[Object(T.jsxs)(p.a,{for:"firstName",children:["First Name ",Object(T.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(T.jsx)(x.a,{type:"text",name:"firstname",id:"firstName",required:!0,placeholder:"firstName",value:E.firstname,onChange:k})]})}),Object(T.jsx)(u.a,{sm:"3",children:Object(T.jsxs)(h.a,{children:[Object(T.jsxs)(p.a,{for:"lastName",children:["Last Name ",Object(T.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(T.jsx)(x.a,{type:"text",name:"lastname",id:"lastName",onChange:k,required:!0,placeholder:"lastName",value:E.lastname})]})}),Object(T.jsx)(u.a,{sm:"3",children:Object(T.jsxs)(h.a,{children:[Object(T.jsxs)(p.a,{for:"Email",children:["Email ",Object(T.jsx)("span",{style:{color:"red"},children:"*"})]}),"\xa0",D.email&&Object(T.jsx)("span",{style:{color:"red",fontSize:"11px"},children:" is not valid"}),Object(T.jsx)(x.a,{type:"email",name:"emailid",id:"Email",onChange:k,placeholder:"Email",value:E.emailid})]})}),Object(T.jsx)(u.a,{sm:"3",children:Object(T.jsxs)(h.a,{children:[Object(T.jsxs)(p.a,{for:"StoreName",children:["Store Name",Object(T.jsx)("span",{style:{color:"red"},children:"*"})]}),"\xa0",D.storeName&&Object(T.jsx)("span",{style:{color:"red",fontSize:"11px"},children:"Required"}),Object(T.jsx)(c.a,{theme:r.i,className:"react-select",classNamePrefix:"select",name:"StoreName",defaultValue:{label:E.storename,value:E.storeid},onChange:(e,t)=>{let{action:a}=t;if("clear"===a){const e={...E};e.storeid=null,q(e)}else{F({...D,storeName:!1});const t={...E};t.storeid=e.value,q(t)}},options:S,isClearable:!0,isLoading:!1})]})}),Object(T.jsx)(u.a,{sm:"3",children:Object(T.jsxs)(h.a,{children:[Object(T.jsxs)(p.a,{for:"UserType",children:["User Type",Object(T.jsx)("span",{style:{color:"red"},children:"*"})]}),"\xa0",D.userType&&Object(T.jsx)("span",{style:{color:"red",fontSize:"11px"},children:"Required"}),Object(T.jsx)(c.a,{theme:r.i,className:"react-select",classNamePrefix:"select",defaultValue:{label:E.rolename,value:E.roleid},name:"UserType",onChange:(e,t)=>{let{action:a}=t;if("clear"===a){const e={...E};e.roleid=null,q(e)}else{F({...D,userType:!1});const t={...E};t.roleid=e.value,q(t)}},options:a,isClearable:!0,isLoading:!1})]})}),Object(T.jsx)(u.a,{sm:"3",children:Object(T.jsxs)(h.a,{children:[Object(T.jsxs)(p.a,{for:"UserTitle",children:["User Title",Object(T.jsx)("span",{style:{color:"red"},children:"*"})]}),"\xa0",D.userTitle&&Object(T.jsx)("span",{style:{color:"red",fontSize:"11px"},children:"Required"}),Object(T.jsx)(c.a,{theme:r.i,className:"react-select",classNamePrefix:"select",name:"UserTitle",defaultValue:{label:E.title,value:E.titleid},onChange:(e,t)=>{let{action:a}=t;if("clear"===a){const e={...E};e.titleid=null,q(e)}else{F({...D,userTitle:!1});const t={...E};t.titleid=e.value,q(t)}},options:N,isClearable:!0,isLoading:!1})]})}),Object(T.jsx)(u.a,{sm:"3",children:R?Object(T.jsxs)(o.a.Ripple,{color:"primary",className:"mr-1",disabled:!0,style:{marginTop:"25px"},children:[Object(T.jsx)(O.a,{color:"white",size:"sm"}),Object(T.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(T.jsx)(o.a.Ripple,{className:"ml-2",color:"primary",type:"submit",style:{marginTop:"25px"},children:Object(T.jsx)("span",{className:"align-middle ml-50",children:"Update"})})})]})})]})," "]})})}}}]);
//# sourceMappingURL=367.3b1e835c.chunk.js.map