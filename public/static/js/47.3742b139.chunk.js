(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[47],{1076:function(e,a,s){"use strict";var t=s(0),r=s(542),c=s.n(r),o=(s(657),s(738)),l=s(442),n=(s(721),s(720),s(640),s(1840)),i=s(437),d=s(5);a.a=e=>{let{Image_Urls:a,setImage_Urls:s,mobile_img:r}=e;const[u,j]=Object(t.useState)([]),p=new c.a({meta:{type:"avatar"},autoProceed:!0,restrictions:{maxNumberOfFiles:10,allowedFileTypes:["image/*"]},onBeforeUpload:e=>{Object.values(e).map((e=>e.data)).forEach((e=>{if(r){let a=HTMLImageElement;a=document.createElement("img"),a.onload=async function(){if(a.width/a.height===4){const a=new FormData;a.append("image",e),l.a.singleFileupload(a).then((e=>{s((a=>[...a||[],e.data.payload.image_url]))})).catch((e=>{console.log(e.response),Object(i.b)(e)}))}else console.log("Invalid mobile ratio! please check the ratio"),Object(i.b)({response:{status:400,data:{message:"Invalid mobile ratio! please check the image ratio"}}})},a.src=URL.createObjectURL(e)}else{const a=new FormData;a.append("image",e),l.a.singleFileupload(a).then((e=>{s((a=>[...a,e.data.payload.image_url]))})).catch((e=>{console.log(e.response),Object(i.b)(e)}))}}))}});return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(o.a,{uppy:p}),Object(d.jsx)("div",{className:"d-flex flex-wrap",children:null!==a&&void 0!==a&&a.length?a.map(((e,t)=>Object(d.jsxs)("div",{className:"d-flex flex-column",children:[Object(d.jsx)("img",{className:"rounded mt-2 mr-1",src:e,alt:"avatar",height:150}),Object(d.jsx)("div",{className:"text-center",style:{marginTop:"5px"},children:Object(d.jsx)(n.a,{size:18,color:"red",style:{cursor:"pointer"},onClick:e=>s(a.filter(((e,a)=>a!==t)))})})]},t))):null})]})}},2380:function(e,a,s){"use strict";s.r(a);var t=s(0),r=s(1720),c=s(432),o=s(465),l=s(450),n=s(451),i=s(452),d=s(449),u=s(1657),j=s(463),p=s(1680),b=s(1654),m=s(446),h=s(445),g=s(467),O=s(442),f=s(673),x=s(437),v=s(711),y=s(440),N=s(461),_=s(448),T=s(1076),M=s(5);a.default=()=>{var e;const a=JSON.parse(localStorage.getItem("userData")),[s,C]=Object(f.a)(),P=Object(v.g)(),w=Object(t.useRef)(),R=Object(t.useRef)(),k=Object(t.useRef)(),[z,S]=Object(t.useState)(!1),[E,I]=Object(t.useState)([]),[F,H]=Object(t.useState)([]),[U,B]=Object(t.useState)([]),[L,D]=Object(t.useState)({title:"",campaign_id:"",description:"",merchant_id:"",rule_id:"",promotion_type:"Normal",is_global:!1,group_id:""}),[q,G]=Object(t.useState)([]),[J,V]=Object(t.useState)([]),A=e=>{D({...L,[e.target.name]:e.target.value})};Object(t.useEffect)((async()=>{await O.a.customerBusinessList().then((e=>{const{payload:a}=e.data;H(a.map((e=>({value:e.id,label:e.businessname}))))})).catch((e=>{Object(x.a)(e)})),await O.a.adRuleList().then((e=>{const a=[];for(const s of e.data.payload)!0===s.is_approved&&a.push(s);I(a.map((e=>({value:e.id,label:e.rule_name}))))})).catch((e=>{Object(x.a)(e)})),O.a.getCentralGroup().then((e=>{const a=[];for(const s of e.data.payload)!0===s.is_approved&&a.push(s);B(a)})).catch((e=>{Object(x.a)(e)}))}),[]);return Object(M.jsxs)(t.Fragment,{children:[Object(M.jsx)(c.a.Ripple,{className:"mb-1",color:"primary",tag:y.b,to:"vendor"===(null===a||void 0===a?void 0:a.role)?"/promolistVendor":"/promolist",children:Object(M.jsxs)("div",{className:"d-flex align-items-center",children:[Object(M.jsx)(r.a,{size:17,style:{marginRight:"5px"}}),Object(M.jsx)("span",{children:"Back"})]})}),Object(M.jsxs)(o.a,{style:{width:"100%"},onSubmit:e=>{e.preventDefault();const{title:s,description:t,merchant_id:r,group_id:c,rule_id:o,promotion_type:l,is_global:n}=L;S(!0),O.a.createPromotion({title:s,description:t,merchant_id:+r,rule_id:+o,promotion_type:l,is_global:n,image_urls:q,mobile_image_urls:J,group_id:c}).then((e=>{Object(x.c)(e),S(!1),P.push("vendor"===(null===a||void 0===a?void 0:a.role)?"/promolistVendor":"/promolist")})).catch((e=>{S(!1),Object(x.a)(e),console.log(e.response)}))},autoComplete:"off",children:[Object(M.jsx)("h4",{className:"m-1",children:"Promotion Info"}),Object(M.jsxs)(l.a,{className:"match-height",children:[Object(M.jsx)(n.a,{sm:"6",children:Object(M.jsx)(i.a,{children:Object(M.jsx)(d.a,{children:Object(M.jsxs)(l.a,{children:[Object(M.jsx)(n.a,{sm:"12",children:Object(M.jsxs)(u.a,{children:[Object(M.jsxs)(j.a,{for:"title",children:["Title",Object(M.jsx)("span",{className:"text-danger",children:"*"})]}),Object(M.jsx)(p.a,{type:"text",name:"title",id:"title",value:L.title,onChange:A,required:!0,placeholder:"title here..."})]})}),Object(M.jsx)(n.a,{sm:"12",children:Object(M.jsxs)(u.a,{children:[Object(M.jsxs)(j.a,{for:"description",children:["Description",Object(M.jsx)("span",{className:"text-danger",children:"*"})]}),Object(M.jsx)(p.a,{type:"textarea",rows:"6",name:"description",id:"description",value:L.description,onChange:A,required:!0,placeholder:"description here..."})]})})]})})})}),Object(M.jsxs)(n.a,{sm:"6",children:[Object(M.jsx)(i.a,{children:Object(M.jsx)(d.a,{children:Object(M.jsxs)(l.a,{children:[Object(M.jsxs)(n.a,{sm:"12",children:[Object(M.jsxs)(u.a,{children:[Object(M.jsxs)(j.a,{for:"merchant_id",children:["Select a Merchant",Object(M.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(M.jsx)(N.a,{ref:w,theme:_.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",onChange:e=>{D({...L,merchant_id:e.value})},options:F,menuPlacement:"auto"})]}),Object(M.jsx)(p.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:e=>w.current.select.focus(),value:L.merchant_id||"",onChange:e=>""})]}),Object(M.jsxs)(n.a,{sm:"12",children:[Object(M.jsxs)(u.a,{children:[Object(M.jsxs)(j.a,{for:"rule_id",children:["AD Rule",Object(M.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(M.jsx)(N.a,{ref:R,theme:_.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",onChange:e=>{D({...L,rule_id:e.value})},options:E,menuPlacement:"auto"})]}),Object(M.jsx)(p.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:e=>R.current.select.focus(),value:L.rule_id||"",onChange:e=>""})]}),Object(M.jsx)(n.a,{sm:"12",children:Object(M.jsxs)(u.a,{children:[Object(M.jsxs)(j.a,{for:"type",children:["Promotion Type",Object(M.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(M.jsx)(N.a,{theme:_.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",defaultValue:{value:"Normal",label:"Normal"},onChange:e=>{D({...L,promotion_type:e.value})},options:[{value:"Normal",label:"Normal"},{value:"Special",label:"Special"}],menuPlacement:"auto"})]})}),Object(M.jsx)(n.a,{sm:"12",children:Object(M.jsxs)(u.a,{children:[Object(M.jsxs)(j.a,{for:"groups",children:["Group",Object(M.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(M.jsx)(N.a,{theme:_.i,maxMenuHeight:200,className:"react-select",id:"group",classNamePrefix:"select",value:{value:L.group_id,label:(null===(e=U.find((e=>e.id===L.group_id)))||void 0===e?void 0:e.group_name)||"select..."},onChange:e=>{D({...L,group_id:e.value})},options:null===U||void 0===U?void 0:U.map((e=>({value:e.id,label:e.group_name}))),ref:k}),Object(M.jsx)(p.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:e=>k.current.select.focus(),value:(null===L||void 0===L?void 0:L.group_id)||"",onChange:e=>""})]})}),Object(M.jsx)(n.a,{sm:"12",children:Object(M.jsxs)(u.a,{children:[Object(M.jsx)(j.a,{for:"title",children:"Is Global Promotion?"})," ",Object(M.jsx)("br",{}),Object(M.jsx)(b.a,{type:"switch",id:"is_global",name:"is_global",inline:!0,label:"",checked:L.is_global,onChange:e=>D({...L,is_global:e.target.checked})})]})})]})})}),"`"]})]}),Object(M.jsxs)(i.a,{children:[Object(M.jsx)(m.a,{className:"border-bottom",children:Object(M.jsx)(h.a,{tag:"h4",children:"Upload Images"})}),Object(M.jsx)(d.a,{style:{paddingTop:"15px"},children:Object(M.jsx)(l.a,{children:Object(M.jsx)(n.a,{md:"12",className:"mb-2",children:Object(M.jsx)(T.a,{Image_Urls:q,setImage_Urls:G})})})})]}),Object(M.jsxs)(i.a,{children:[Object(M.jsx)(m.a,{className:"border-bottom",children:Object(M.jsx)(h.a,{tag:"h4",children:"Upload Mobile Images"})}),Object(M.jsx)(d.a,{style:{paddingTop:"15px"},children:Object(M.jsx)(l.a,{children:Object(M.jsx)(n.a,{md:"12",className:"mb-2",children:Object(M.jsx)(T.a,{Image_Urls:J,setImage_Urls:V,mobile_img:!0})})})})]}),Object(M.jsx)(i.a,{children:Object(M.jsx)(d.a,{children:Object(M.jsx)(l.a,{children:Object(M.jsx)(n.a,{sm:"12",className:"text-center",children:z?Object(M.jsxs)(c.a.Ripple,{color:"primary",className:"mr-1",disabled:!0,children:[Object(M.jsx)(g.a,{color:"white",size:"sm"}),Object(M.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(M.jsx)(c.a.Ripple,{className:"ml-2",color:"primary",type:"submit",children:Object(M.jsx)("span",{children:"Submit"})})})})})})]})]})}},437:function(e,a,s){"use strict";s.d(a,"a",(function(){return r})),s.d(a,"b",(function(){return c})),s.d(a,"c",(function(){return o}));s(0);var t=s(107);const r=e=>{try{const a=e.response;404===a.status||401===a.status||400===a.status||500===a.status||409===a.status?t.f.error(a.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):t.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(a){t.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},c=e=>{try{const a=e.response;404!==a.status&&401!==a.status&&400!==a.status||t.f.error(a.data.errors?a.data.errors[Object.keys(a.data.errors)[0]]:a.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(a){t.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},o=e=>{const a=e.data.message||"success";t.f.success(a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},445:function(e,a,s){"use strict";var t=s(13),r=s(18),c=s(0),o=s.n(c),l=s(4),n=s.n(l),i=s(52),d=s.n(i),u=s(74),j={tag:u.tagPropType,className:n.a.string,cssModule:n.a.object},p=function(e){var a=e.className,s=e.cssModule,c=e.tag,l=Object(r.a)(e,["className","cssModule","tag"]),n=Object(u.mapToCssModules)(d()(a,"card-title"),s);return o.a.createElement(c,Object(t.a)({},l,{className:n}))};p.propTypes=j,p.defaultProps={tag:"div"},a.a=p},446:function(e,a,s){"use strict";var t=s(13),r=s(18),c=s(0),o=s.n(c),l=s(4),n=s.n(l),i=s(52),d=s.n(i),u=s(74),j={tag:u.tagPropType,className:n.a.string,cssModule:n.a.object},p=function(e){var a=e.className,s=e.cssModule,c=e.tag,l=Object(r.a)(e,["className","cssModule","tag"]),n=Object(u.mapToCssModules)(d()(a,"card-header"),s);return o.a.createElement(c,Object(t.a)({},l,{className:n}))};p.propTypes=j,p.defaultProps={tag:"div"},a.a=p},451:function(e,a,s){"use strict";var t=s(13),r=s(18),c=s(0),o=s.n(c),l=s(4),n=s.n(l),i=s(52),d=s.n(i),u=s(74),j=n.a.oneOfType([n.a.number,n.a.string]),p=n.a.oneOfType([n.a.bool,n.a.number,n.a.string,n.a.shape({size:n.a.oneOfType([n.a.bool,n.a.number,n.a.string]),order:j,offset:j})]),b={tag:u.tagPropType,xs:p,sm:p,md:p,lg:p,xl:p,className:n.a.string,cssModule:n.a.object,widths:n.a.array},m={tag:"div",widths:["xs","sm","md","lg","xl"]},h=function(e,a,s){return!0===s||""===s?e?"col":"col-"+a:"auto"===s?e?"col-auto":"col-"+a+"-auto":e?"col-"+s:"col-"+a+"-"+s},g=function(e){var a=e.className,s=e.cssModule,c=e.widths,l=e.tag,n=Object(r.a)(e,["className","cssModule","widths","tag"]),i=[];c.forEach((function(a,t){var r=e[a];if(delete n[a],r||""===r){var c=!t;if(Object(u.isObject)(r)){var o,l=c?"-":"-"+a+"-",j=h(c,a,r.size);i.push(Object(u.mapToCssModules)(d()(((o={})[j]=r.size||""===r.size,o["order"+l+r.order]=r.order||0===r.order,o["offset"+l+r.offset]=r.offset||0===r.offset,o)),s))}else{var p=h(c,a,r);i.push(p)}}})),i.length||i.push("col");var j=Object(u.mapToCssModules)(d()(a,i),s);return o.a.createElement(l,Object(t.a)({},n,{className:j}))};g.propTypes=b,g.defaultProps=m,a.a=g},452:function(e,a,s){"use strict";var t=s(13),r=s(18),c=s(0),o=s.n(c),l=s(4),n=s.n(l),i=s(52),d=s.n(i),u=s(74),j={tag:u.tagPropType,inverse:n.a.bool,color:n.a.string,body:n.a.bool,outline:n.a.bool,className:n.a.string,cssModule:n.a.object,innerRef:n.a.oneOfType([n.a.object,n.a.string,n.a.func])},p=function(e){var a=e.className,s=e.cssModule,c=e.color,l=e.body,n=e.inverse,i=e.outline,j=e.tag,p=e.innerRef,b=Object(r.a)(e,["className","cssModule","color","body","inverse","outline","tag","innerRef"]),m=Object(u.mapToCssModules)(d()(a,"card",!!n&&"text-white",!!l&&"card-body",!!c&&(i?"border":"bg")+"-"+c),s);return o.a.createElement(j,Object(t.a)({},b,{className:m,ref:p}))};p.propTypes=j,p.defaultProps={tag:"div"},a.a=p},463:function(e,a,s){"use strict";var t=s(13),r=s(18),c=s(0),o=s.n(c),l=s(4),n=s.n(l),i=s(52),d=s.n(i),u=s(74),j=n.a.oneOfType([n.a.number,n.a.string]),p=n.a.oneOfType([n.a.bool,n.a.string,n.a.number,n.a.shape({size:j,order:j,offset:j})]),b={children:n.a.node,hidden:n.a.bool,check:n.a.bool,size:n.a.string,for:n.a.string,tag:u.tagPropType,className:n.a.string,cssModule:n.a.object,xs:p,sm:p,md:p,lg:p,xl:p,widths:n.a.array},m={tag:"label",widths:["xs","sm","md","lg","xl"]},h=function(e,a,s){return!0===s||""===s?e?"col":"col-"+a:"auto"===s?e?"col-auto":"col-"+a+"-auto":e?"col-"+s:"col-"+a+"-"+s},g=function(e){var a=e.className,s=e.cssModule,c=e.hidden,l=e.widths,n=e.tag,i=e.check,j=e.size,p=e.for,b=Object(r.a)(e,["className","cssModule","hidden","widths","tag","check","size","for"]),m=[];l.forEach((function(a,t){var r=e[a];if(delete b[a],r||""===r){var c,o=!t;if(Object(u.isObject)(r)){var l,n=o?"-":"-"+a+"-";c=h(o,a,r.size),m.push(Object(u.mapToCssModules)(d()(((l={})[c]=r.size||""===r.size,l["order"+n+r.order]=r.order||0===r.order,l["offset"+n+r.offset]=r.offset||0===r.offset,l))),s)}else c=h(o,a,r),m.push(c)}}));var g=Object(u.mapToCssModules)(d()(a,!!c&&"sr-only",!!i&&"form-check-label",!!j&&"col-form-label-"+j,m,!!m.length&&"col-form-label"),s);return o.a.createElement(n,Object(t.a)({htmlFor:p},b,{className:g}))};g.propTypes=b,g.defaultProps=m,a.a=g},465:function(e,a,s){"use strict";var t=s(13),r=s(18),c=s(106),o=s(105),l=s(0),n=s.n(l),i=s(4),d=s.n(i),u=s(52),j=s.n(u),p=s(74),b={children:d.a.node,inline:d.a.bool,tag:p.tagPropType,innerRef:d.a.oneOfType([d.a.object,d.a.func,d.a.string]),className:d.a.string,cssModule:d.a.object},m=function(e){function a(a){var s;return(s=e.call(this,a)||this).getRef=s.getRef.bind(Object(c.a)(s)),s.submit=s.submit.bind(Object(c.a)(s)),s}Object(o.a)(a,e);var s=a.prototype;return s.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},s.submit=function(){this.ref&&this.ref.submit()},s.render=function(){var e=this.props,a=e.className,s=e.cssModule,c=e.inline,o=e.tag,l=e.innerRef,i=Object(r.a)(e,["className","cssModule","inline","tag","innerRef"]),d=Object(p.mapToCssModules)(j()(a,!!c&&"form-inline"),s);return n.a.createElement(o,Object(t.a)({},i,{ref:l,className:d}))},a}(l.Component);m.propTypes=b,m.defaultProps={tag:"form"},a.a=m},467:function(e,a,s){"use strict";var t=s(13),r=s(18),c=s(0),o=s.n(c),l=s(4),n=s.n(l),i=s(52),d=s.n(i),u=s(74),j={tag:u.tagPropType,type:n.a.string,size:n.a.string,color:n.a.string,className:n.a.string,cssModule:n.a.object,children:n.a.string},p=function(e){var a=e.className,s=e.cssModule,c=e.type,l=e.size,n=e.color,i=e.children,j=e.tag,p=Object(r.a)(e,["className","cssModule","type","size","color","children","tag"]),b=Object(u.mapToCssModules)(d()(a,!!l&&"spinner-"+c+"-"+l,"spinner-"+c,!!n&&"text-"+n),s);return o.a.createElement(j,Object(t.a)({role:"status"},p,{className:b}),i&&o.a.createElement("span",{className:Object(u.mapToCssModules)("sr-only",s)},i))};p.propTypes=j,p.defaultProps={tag:"div",type:"border",children:"Loading..."},a.a=p},640:function(e,a,s){}}]);
//# sourceMappingURL=47.3742b139.chunk.js.map