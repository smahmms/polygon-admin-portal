(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[340],{2591:function(e,t,a){"use strict";a.r(t);var r=a(0),o=a(1682),i=a(452),s=a(446),n=a(543),c=a(1692),l=a(1693),d=a(546),p=a(547),u=a(445),b=a(432),j=a(442),m=a(475),h=a(440),g=a(448),x=a(1748),O=a(1822),v=a(443),f=a(450),_=a(451),y=a(463),k=a(1680),w=a(437),C=a(460),D=a.n(C),E=a(444),L=a.n(E),S=a(469),N=a(711),T=a(5);const A=L()(D.a);var P=e=>{let{datapackGroupList:t,rule_type:a,TableDataLoading:o,setrefresh:i,refresh:s,setgroupEditData:n}=e;const c=Object(N.g)(),[l,d]=Object(r.useState)(""),[p,u]=Object(r.useState)([]),b=[{name:"Group ID",minWidth:"50px",sortable:!0,selector:"id",wrap:!0},{name:"Group Title",minWidth:"150px",sortable:!0,selector:"group_title",wrap:!0},{name:"Operator",minWidth:"50px",sortable:!0,selector:e=>{var t;return null===e||void 0===e||null===(t=e.group_items)||void 0===t?void 0:t.map((e=>Object(T.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:null===e||void 0===e?void 0:e.keyword})))}},{name:"Pack Code",minWidth:"50px",sortable:!0,wrap:!0,selector:e=>{var t;return null===e||void 0===e||null===(t=e.group_items)||void 0===t?void 0:t.map((e=>Object(T.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.pack_code||"--"})))}},{name:"Disburse-Unit",minWidth:"50px",sortable:!0,selector:e=>{var t;return null===e||void 0===e||null===(t=e.group_items)||void 0===t?void 0:t.map((e=>Object(T.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:"".concat(e.number_of_time_api_hit," X")||!1})))}},{name:"Modified By",minWidth:"150px",sortable:!0,selector:"modified_by",cell:e=>e.modified_by?e.modified_by:e.created_by,wrap:!0},{name:"Modified At",minWidth:"170px",sortable:!0,wrap:!0,sortType:(e,t)=>new Date(t.modified_at)-new Date(e.modified_at),selector:"modified_at",cell:e=>e.modified_at?Object(v.b)(e.modified_at):e.created_at?Object(v.b)(e.created_at):"--"},{name:"Action",minWidth:"150px",selector:e=>Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("span",{title:"Edit",children:Object(T.jsx)(x.a,{size:15,color:"#3b3acb",style:{cursor:"pointer"},onClick:t=>{return a=e,localStorage.setItem("datapackInfo",JSON.stringify(a)),void c.push("/editDatapack");var a}})})," \xa0\xa0",Object(T.jsx)("span",{title:"Delete",children:Object(T.jsx)(O.a,{size:15,color:"red",style:{cursor:"pointer"},onClick:t=>((e,t)=>(e.preventDefault(),A.fire({title:"Do you want to Delete",text:"Information will be delete when another user will approve this operation.",icon:"warning",allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!0,confirmButtonText:"Yes",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-danger ml-1"},showLoaderOnConfirm:!0,preConfirm:()=>j.a.datapackGroupDelete({id:t.id}).then((e=>{console.log(e),Object(w.c)({data:{message:e.data.message}}),i(s+1)})).catch((e=>{Object(w.a)(e),console.log(e.response)})),buttonsStyling:!1,allowOutsideClick:()=>!D.a.isLoading()}).then((function(e){e.isConfirmed}))))(t,e)})})]})}];return Object(T.jsxs)(r.Fragment,{children:[Object(T.jsx)(f.a,{className:"justify-content-end mx-0",children:Object(T.jsxs)(_.a,{className:"d-flex align-items-center justify-content-end mt-1",sm:"3",children:[Object(T.jsx)(y.a,{className:"mr-1",for:"search-input",children:"Search"}),Object(T.jsx)(k.a,{className:"dataTable-filter mb-50",type:"text",bsSize:"sm",id:"search-input",value:l,onChange:e=>{const a=e.target.value;let r=[];d(a),a.length&&(r=t.filter((e=>{var t,r,o,i;const s=(null===(t=e.id)||void 0===t?void 0:t.toLowerCase().startsWith(a.toLowerCase()))||(null===(r=e.group_title)||void 0===r?void 0:r.toLowerCase().startsWith(a.toLowerCase())),n=(null===(o=e.id)||void 0===o?void 0:o.toLowerCase().includes(a.toLowerCase()))||(null===(i=e.group_title)||void 0===i?void 0:i.toLowerCase().includes(a.toLowerCase()));return s||(!s&&n?n:null)})),u(r))}})]})}),Object(T.jsx)(f.a,{children:Object(T.jsx)(_.a,{md:"12",children:Object(T.jsx)(S.a,{column:b,TableData:l.length?p:t,TableDataLoading:o})})})]})};a(598);var I=e=>{let{datapackGroupList:t,rule_type:a,TableDataLoading:o,setgroupIdForView:i,setref_id:s}=e;console.log(t);const n=[{name:"Group Title",minWidth:"200px",sortable:!0,selector:"group_title",wrap:!0},{name:"Operator",minWidth:"50px",sortable:!0,selector:e=>{var t;return null===e||void 0===e||null===(t=e.group_item)||void 0===t?void 0:t.map((e=>Object(T.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:null===e||void 0===e?void 0:e.keyword})))}},{name:"Pack Code",minWidth:"50px",sortable:!0,wrap:!0,selector:e=>{var t;return null===e||void 0===e||null===(t=e.group_item)||void 0===t?void 0:t.map((e=>Object(T.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.pack_code||"--"})))}},{name:"Disburse-Unit",minWidth:"50px",sortable:!0,selector:e=>{var t;return null===e||void 0===e||null===(t=e.group_item)||void 0===t?void 0:t.map((e=>Object(T.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:"".concat(e.number_of_time_api_hit," X")||!1})))}},{name:"Operation",minWidth:"50px",sortable:!0,selector:"action"},{name:"Created At",minWidth:"170px",sortable:!0,wrap:!0,sortType:(e,t)=>new Date(t.modified_at)-new Date(e.modified_at),selector:"modified_at",cell:e=>e.modified_at?Object(v.b)(e.modified_at):null}];return Object(T.jsx)(r.Fragment,{children:Object(T.jsx)(S.a,{column:n,TableData:t,TableDataLoading:o})})},W=a(1717),B=a(1841),G=a(532),R=a(535),F=a(530),M=a(449),z=a(549),U=a(467);var H=e=>{let{modal:t,toggleModal:a,datapackInfo:o,setRefresh:n,refresh:c,action:l}=e;const[d,p]=Object(r.useState)([]),[m,h]=Object(r.useState)(!1);console.log(o),Object(r.useEffect)((()=>{o.id&&j.a.datapackGroupApprovalById(o.id).then((e=>{console.log(e);const t=[];for(const a of e.data.payload.module_data.roles){const r=e.data.payload.approved.find((e=>e.role_id===a.role_id));r?t.push({role_id:a.role_name,approved_by:r.approved_by,approved_at:r.approved_at}):t.push({role_id:a.role_name,approved_by:"--",approved_at:""})}p(t)})).catch((e=>{console.log(e),Object(w.a)(e)}))}),[o.id]);return Object(T.jsxs)(G.a,{size:"xl",isOpen:t,toggle:a,style:1===l?{border:"2px solid green"}:2===l?{border:"2px solid red"}:{},children:[Object(T.jsx)(R.a,{toggle:a,children:1===l?"Approve Datapack":2===l?"Reject Datapack":"Datapack Details"}),Object(T.jsxs)(F.a,{children:[Object(T.jsx)(f.a,{children:Object(T.jsxs)(_.a,{sm:"12",children:[Object(T.jsxs)(i.a,{children:[Object(T.jsx)(s.a,{children:Object(T.jsx)(u.a,{children:"Approval Entry"})}),Object(T.jsx)(M.a,{children:Object(T.jsx)(f.a,{children:Object(T.jsx)(_.a,{sm:"12",children:Object(T.jsxs)(z.a,{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Role Name"}),Object(T.jsx)("th",{children:"Approved By"}),Object(T.jsx)("th",{children:"Approved At"})]}),0!==(null===d||void 0===d?void 0:d.length)?null===d||void 0===d?void 0:d.map(((e,t)=>Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.role_id}),Object(T.jsx)("td",{children:e.approved_by}),Object(T.jsx)("td",{children:e.approved_at?Object(v.b)(e.approved_at||""):"--"})]},t))):Object(T.jsx)(U.a,{className:"text-center"})]})})})})]}),"`"]})}),Object(T.jsx)(f.a,{children:Object(T.jsx)(_.a,{sm:"12",className:"text-center",children:m?Object(T.jsxs)(b.a.Ripple,{color:"primary",className:"mr-1",disabled:!0,style:{marginTop:"25px"},children:[Object(T.jsx)(U.a,{color:"white",size:"sm"}),Object(T.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(T.jsx)(b.a.Ripple,{className:"ml-2",color:"primary",onClick:()=>{h(!0),j.a.datapackGroupApprove({id:o.id,action_id:l}).then((e=>{n(!c),Object(w.c)(e),h(!1),a(),console.log(e)})).catch((e=>{console.log(e.response),h(!1),a(),Object(w.a)(e)}))},type:"button",style:{marginTop:"25px"},children:Object(T.jsx)("span",{children:"Confirm"})})})})]})]})};L()(D.a);var V=e=>{let{datapackGroupList:t,rule_type:a,TableDataLoading:o,refresh:i,setrefresh:s,setref_id:n}=e;console.log(t);const[c,l]=Object(r.useState)(0),[d,p]=Object(r.useState)({}),[u,b]=Object(r.useState)(!1),j=[{name:"Group Title",minWidth:"200px",sortable:!0,selector:"group_title",wrap:!0},{name:"Operator",minWidth:"50px",sortable:!0,selector:e=>{var t;return null===e||void 0===e||null===(t=e.group_item)||void 0===t?void 0:t.map((e=>Object(T.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:null===e||void 0===e?void 0:e.keyword})))}},{name:"Pack Code",minWidth:"50px",sortable:!0,selector:e=>{var t;return null===e||void 0===e||null===(t=e.group_item)||void 0===t?void 0:t.map((e=>Object(T.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.pack_code||"--"})))}},{name:"Disburse-Unit",minWidth:"50px",sortable:!0,selector:e=>{var t;return null===e||void 0===e||null===(t=e.group_item)||void 0===t?void 0:t.map((e=>Object(T.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:"".concat(e.number_of_time_api_hit," X")||!1})))}},{name:"Operation",minWidth:"50px",sortable:!0,selector:"action"},{name:"Modified By",minWidth:"150px",sortable:!0,selector:"modified_by",wrap:!0},{name:"Modified At",minWidth:"170px",sortable:!0,wrap:!0,sortType:(e,t)=>new Date(t.modified_at)-new Date(e.modified_at),selector:"modified_at",cell:e=>e.modified_at?Object(v.b)(e.modified_at):null},{name:"Action",minWidth:"150px",selector:e=>Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("span",{title:"Approve",children:Object(T.jsx)(W.a,{size:15,color:"teal",style:{cursor:"pointer"},onClick:()=>{p(e),b(!0),l(1)}})}),"\xa0\xa0",Object(T.jsx)("span",{title:"Reject",children:Object(T.jsx)(B.a,{size:15,color:"red",style:{cursor:"pointer"},onClick:t=>{p(e),b(!0),l(2)}})})]})}];return Object(T.jsxs)(r.Fragment,{children:[Object(T.jsx)(S.a,{column:j,TableData:t,TableDataLoading:o}),Object(T.jsx)(H,{modal:u,toggleModal:()=>b(!u),datapackInfo:d,refresh:i,setRefresh:s,action:c})]})};t.default=()=>{localStorage.getItem("username");const[e,t]=Object(r.useState)([]),[a,x]=Object(r.useState)([]),[O,v]=Object(r.useState)([]),[f,_]=Object(r.useState)(!0),[y,k]=Object(r.useState)(null),[C,D]=Object(r.useState)(null),[E,L]=Object(r.useState)(null),[S,N]=Object(r.useState)(!1),[A,W]=Object(r.useState)("1"),B=e=>W(e);return Object(r.useEffect)((()=>{Promise.all([j.a.datapackGroupList().then((e=>{console.log("datapack",e),_(!1),t(e.data.payload)})).catch((e=>{Object(w.a)(e),console.log(e),_(!1)})),m.a.datapackGroupMyPendingList().then((e=>{x(e.data.payload)})).catch((e=>{Object(w.a)(e),console.log(e),_(!1)})),m.a.datapackGroupOtherPendingList().then((e=>{v(e.data.payload)})).catch((e=>{Object(w.a)(e),console.log(e),_(!1)}))])}),[S]),Object(T.jsx)(r.Fragment,{children:y?Object(T.jsx)(SKURuleEditPage,{refresh:S,setrefresh:N,groupEditData:y,setgroupEditData:k}):C?Object(T.jsx)(ViewTempDetails,{setgroupIdForView:D,groupIdForView:C,ref_id:E}):Object(T.jsxs)(r.Fragment,{children:[Object(T.jsx)(i.a,{children:Object(T.jsx)(s.a,{children:Object(T.jsxs)(n.a,{tabs:!0,children:[Object(T.jsx)(c.a,{children:Object(T.jsx)(l.a,{active:"1"===A,onClick:()=>B("1"),children:Object(T.jsx)("span",{className:"align-middle d-none d-sm-block",children:"Datapack Group List"})})}),g.j.includes(34)&&Object(T.jsx)(c.a,{children:Object(T.jsx)(l.a,{active:"2"===A,onClick:()=>B("2"),children:Object(T.jsx)("span",{className:"align-middle d-none d-sm-block",children:"My Pending"})})}),g.j.includes(34)&&Object(T.jsx)(c.a,{children:Object(T.jsx)(l.a,{active:"3"===A,onClick:()=>B("3"),children:Object(T.jsx)("span",{className:"align-middle d-none d-sm-block",children:"Approve"})})})]})})}),Object(T.jsx)(i.a,{children:Object(T.jsxs)(d.a,{activeTab:A,children:[Object(T.jsx)(p.a,{tabId:"1",children:Object(T.jsxs)(i.a,{children:[Object(T.jsxs)(s.a,{className:"border-bottom",children:[Object(T.jsx)(u.a,{tag:"h4",children:"Datapack-Group"}),Object(T.jsx)("div",{children:g.j.includes(16)&&Object(T.jsx)(b.a.Ripple,{className:"ml-2",color:"primary",tag:h.b,to:"/createDatapack",children:Object(T.jsxs)("div",{className:"d-flex align-items-center",children:[Object(T.jsx)(o.a,{size:17,style:{marginRight:"5px"}}),Object(T.jsx)("span",{children:"Create Datapack Group"})]})})})]}),Object(T.jsx)(P,{datapackGroupList:e,TableDataLoading:f,refresh:S,setrefresh:N,setgroupEditData:k})]})}),Object(T.jsx)(p.a,{tabId:"2",children:Object(T.jsx)(I,{datapackGroupList:a,TableDataLoading:f,setgroupIdForView:D,setref_id:L})}),Object(T.jsx)(p.a,{tabId:"3",children:Object(T.jsx)(V,{datapackGroupList:O,TableDataLoading:f,refresh:S,setrefresh:N,setgroupIdForView:D,setref_id:L})})]})})]})})}},437:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return s}));a(0);var r=a(107);const o=e=>{try{const t=e.response;404===t.status||401===t.status||400===t.status||500===t.status||409===t.status?r.f.error(t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):r.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){r.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},i=e=>{try{const t=e.response;404!==t.status&&401!==t.status&&400!==t.status||r.f.error(t.data.errors?t.data.errors[Object.keys(t.data.errors)[0]]:t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){r.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},s=e=>{const t=e.data.message||"success";r.f.success(t,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},443:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return n})),a.d(t,"f",(function(){return c})),a.d(t,"e",(function(){return l})),a.d(t,"d",(function(){return d})),a.d(t,"a",(function(){return p}));var r=a(486),o=a.n(r);const i={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},s=e=>new Date(e).toLocaleDateString(void 0,i),n=e=>{e.endsWith("Z")&&(e=e.slice(0,-1));const t=e.indexOf("+");return-1!==t&&(e=e.slice(0,t)),o()(e).format("MMMM D, YYYY [at] h:mm A")},c=e=>String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),l=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),d=async e=>{401===e&&(window.location.href="/Adminlogin",await localStorage.clear())},p=(e,t,a)=>{const r=document.createElement("a");let o=function(e){let a;return a="",a+=t.join(","),a+="\n",e.forEach((e=>{let r=0;t.forEach((t=>{r>0&&(a+=","),a+=e[t],r++})),a+="\n"})),a}(e);if(null===o)return;const i=JSON.parse(localStorage.getItem("userData")),s="".concat(a,"_").concat((new Date).toISOString(),"_").concat(i.fullname.replaceAll(/\s/g,""),".csv");o.match(/^data:text\/csv/i)||(o="data:text/csv;charset=utf-8,".concat(o)),r.setAttribute("href",encodeURI(o)),r.setAttribute("download",s),r.click()}},469:function(e,t,a){"use strict";var r=a(0),o=a(1719),i=a(467),s=a(471),n=a.n(s),c=a(474),l=a.n(c),d=a(5);t.a=e=>{let{column:t,TableData:a,TableDataLoading:s}=e;const[c,p]=Object(r.useState)(0);return Object(d.jsx)(r.Fragment,{children:Object(d.jsx)(l.a,{noHeader:!0,pagination:!0,columns:t,paginationPerPage:10,className:"react-dataTable",sortIcon:Object(d.jsx)(o.a,{size:10}),paginationDefaultPage:c+1,paginationComponent:()=>Object(d.jsx)(n.a,{previousLabel:"",nextLabel:"",forcePage:c,onPageChange:e=>(e=>{p(e.selected)})(e),pageCount:a.length?a.length/10:1,breakLabel:"...",pageRangeDisplayed:2,marginPagesDisplayed:2,activeClassName:"active",pageClassName:"page-item",breakClassName:"page-item",breakLinkClassName:"page-link",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-1"}),data:a,progressPending:s,progressComponent:Object(d.jsx)(i.a,{color:"primary"}),responsive:!0,pointerOnHover:!0,highlightOnHover:!0,striped:!0})})}},598:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return c}));const r={1:{title:"Active",color:"light-success "},0:{title:"Pending",color:"light-primary"},5:{title:"Stopped",color:"light-danger"},11:{title:"Unpaid",color:"light-primary"}},o={1:{title:"Active",color:"light-success "},0:{title:"In-Active",color:"light-primary"}},i={Insert:{title:"Insert",color:"light-success "},Update:{title:"Update",color:"light-primary"},Delete:{title:"Delete",color:"light-danger"},INSERT:{title:"INSERT",color:"light-success "},UPDATE:{title:"UPDATE",color:"light-primary"},DELETE:{title:"DELETE",color:"light-danger"}},s=e=>r[e]||{title:"N/A",color:"light-danger"},n=e=>o[e]||{title:"N/A",color:"light-danger"},c=e=>i[e]||{title:"N/A",color:"light-danger"}}}]);
//# sourceMappingURL=340.84751e13.chunk.js.map