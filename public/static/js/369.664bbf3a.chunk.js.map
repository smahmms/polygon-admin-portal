{"version":3,"sources":["views/tables/data-tables/basic/AdminComponent/RealTimeCommisionRule/CreateRealTimeCommisionRule.js"],"names":["withReactContent","Swal","CreateRealTimeCommisionRule","history","useHistory","pointRuleloading","setPointRuleloading","useState","cashbackFlexibleData","setCashbackFlexibleData","startRange","isPercentage","voucherFlexibleData","setVoucherFlexibleData","datapackFlexibleData","setDatapackFlexibleData","pointFlexibleData","setPointFlexibleData","userInput","setUserInput","commissionRuleName","reward_type","pointExpireDays","isFinBasedOffer","offer_type","offerCount","offerAmount","target","target_type","target_count","target_amount","isQuota","quotaType","quotaCount","quotaAmount","isRxQuota","rxQuotaType","rxQuotaCount","rxQuotaAmount","isTime","startHour","endHour","is_voucher_reward","reward_voucherid","statusFlag","isDefault","isPoint","startDate","endDate","isCertainTimeline","timelineType","isTimelineRange","staticTimeline","startTimeline","endTimeline","commissionType","snAmount","rxAmount","min","max","flexibleRules","returnCommissionId","outsideHourCommissionId","returnCertainTimelineId","isDailyOffer","snreward_voucherid","rxreward_voucherid","is_datapack_reward","snreward_datapack_groupid","rxreward_datapack_groupid","_jsxs","Fragment","children","_jsx","Button","Ripple","className","color","tag","Link","to","ChevronLeft","size","style","marginRight","Card","CardHeader","CardTitle","Form","width","onSubmit","e","preventDefault","flexibleData","finalRequestData","RuleDataReFormat","useJwt2","commissionruleCreate","then","res","push","Success","catch","error","Error","autoComplete","Row","Col","md","RealTimeCommisionRuleLogic","onlyView","sm","disabled","marginTop","Spinner","type"],"mappings":"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","file":"static/js/369.664bbf3a.chunk.js","sourcesContent":["import useJwt from '@src/auth/jwt/useJwt'\nimport useJwt2 from '@src/auth/jwt/useJwt2'\nimport '@styles/react/libs/flatpickr/flatpickr.scss'\nimport { selectThemeColors } from '@utils'\nimport React, { Fragment, useEffect, useMemo, useRef, useState } from 'react'\nimport { ChevronLeft, Minus, Plus } from 'react-feather'\nimport { Link, useHistory } from 'react-router-dom'\nimport Select from 'react-select'\nimport { Button, Card, CardBody, CardHeader, CardTitle, Col, CustomInput, Form, FormGroup, Input, Label, Row, Spinner } from 'reactstrap'\nimport Swal from 'sweetalert2'\nimport withReactContent from 'sweetalert2-react-content'\nimport { Error, Success } from '../../../../../viewhelper'\nimport CommonDataTable from '../DataTable'\nimport RealTimeCommisionRuleLogic from './RealTimeCommisionRuleLogic'\nimport './rStyle.css'\nimport { RuleDataReFormat } from './RuleDataReFormat'\nconst MySwal = withReactContent(Swal)\n\nconst CreateRealTimeCommisionRule = () => {\n\n    const history = useHistory()\n    const [pointRuleloading, setPointRuleloading] = useState(false)\n    // const [tableData, setTableData] = useState([{ startRange: 0, isPercentage: false }])\n    // const [tableData1, setTableData1] = useState([{ startRange: 0 }])\n    // const [tableData2, setTableData2] = useState([{ startRange: 0 }])\n    // const [tableData3, setTableData3] = useState([{ startRange: 0 }])\n\n    const [cashbackFlexibleData, setCashbackFlexibleData] = useState([{ startRange: 0, isPercentage: false }])\n    const [voucherFlexibleData, setVoucherFlexibleData] = useState([{ startRange: 0 }])\n    const [datapackFlexibleData, setDatapackFlexibleData] = useState([{ startRange: 0 }])\n    const [pointFlexibleData, setPointFlexibleData] = useState([{ startRange: 0 }])\n\n    const [userInput, setUserInput] = useState({\n\n        commissionRuleName: '',\n        reward_type: 0,\n        pointExpireDays: 365,\n\n        isFinBasedOffer: false,\n        offer_type: 1,\n        offerCount: 0,\n        offerAmount: 0,\n\n        target: false,\n        target_type: 1,\n        target_count: 0,\n        target_amount: 0,\n\n        isQuota: false,\n        quotaType: 0,\n        quotaCount: 0,\n        quotaAmount: 0,\n\n        isRxQuota: false,\n        rxQuotaType: 0,\n        rxQuotaCount: 0,\n        rxQuotaAmount: 0,\n\n        isTime: false,\n        startHour: ' ',\n        endHour: ' ',\n\n        is_voucher_reward: false,\n        reward_voucherid: null,\n        statusFlag: false,\n        isDefault: false,\n        isPoint: false,\n        startDate: '',\n        endDate: '',\n        isCertainTimeline: false,\n        timelineType: ' ',\n        isTimelineRange: false,\n        staticTimeline: 0,\n        startTimeline: 0,\n        endTimeline: 0,\n        commissionType: 'fixed',\n        snAmount: 0,\n        rxAmount: 0,\n        isPercentage: false,\n        min: 0,\n        max: 0,\n \n        flexibleRules: [],\n        returnCommissionId: 0,\n        outsideHourCommissionId: 0,\n        returnCertainTimelineId: 0,\n        isDailyOffer: false,\n        is_voucher_reward: false,\n        snreward_voucherid : \"\",\n        rxreward_voucherid : \"\",\n        is_datapack_reward: false,\n        snreward_datapack_groupid : \"\",\n        rxreward_datapack_groupid : \"\"\n    })\n\n    // const [userInput, setUserInput] = useState({\n\n    //     commissionRuleName: '333',\n    //     reward_type: 3,\n    //     pointExpireDays: 365,\n\n    //     isFinBasedOffer: true,\n    //     offer_type: 4,\n    //     offerCount: 10,\n    //     offerAmount: 0,\n    // ///// terget_type\n    //     target: true,\n    //     target_type: 3,\n    //     target_count: 10,\n    //     target_amount: 30,\n\n    //     isQuota: true,\n    //     quotaType: 2,\n    //     quotaCount: 10,\n    //     quotaAmount: 40,\n\n    //     isRxQuota: true,\n    //     rxQuotaType: 3,\n    //     rxQuotaCount: 220,\n    //     rxQuotaAmount: 440,\n\n    //     isCertainTimeline: true,\n    //     returnCertainTimelineId: 4,\n    //     timelineType: 'm',\n    //     isTimelineRange: false,\n    //     staticTimeline: 5,\n    //     startTimeline: 2,\n    //     endTimeline: 5,\n\n    //     isTime: true,\n    //     outsideHourCommissionId: 4,\n    //     startHour: '01:20',\n    //     endHour: '19:50',\n\n    //     commissionType: 'flexible',\n    //     isPercentage: false,\n    //     snAmount: 10,\n    //     rxAmount: 10,\n    //     min: 220,\n    //     max: 330,\n        \n    //     snreward_datapack_groupid: 17,\n    //     rxreward_datapack_groupid: 12,\n\n    //     snreward_voucherid : \"PD0044\",\n    //     rxreward_voucherid : \"PD0044\",\n      \n    //     flexibleRules: [\n    //          {\n    //                 startRange: '90', \n    //                 snAmount: '7', \n    //                 rxAmount: '8', \n    //                 endRange: '999'\n    //             },  {\n    //                 startRange: '90', \n    //                 snAmount: '7', \n    //                 rxAmount: '8', \n    //                 endRange: '999'\n    //             }\n    //     ]\n    // })\n\n    /**\n     * Cash-back flexiable rule \n     *     flexibleRules: [\n                {\n                isPercentage: false,\n                max: 0,\n                min: 0,\n                rxAmount: \"10\",\n                snAmount: \"11\",\n                startRange: \"01\",\n                endRange: \"100\"\n            }, {\n                isPercentage: true,\n                max: 10,\n                min: 30,\n                rxAmount: \"10\",\n                snAmount: \"11\",\n                startRange: \"200\",\n                endRange: \"500\"\n            }\n        ]\n\n        Point....\n           flexibleRules: [\n                {\n                    startRange: '90', \n                    snAmount: '7', \n                    rxAmount: '8', \n                    endRange: '999'\n                },  {\n                    startRange: '90', \n                    snAmount: '7', \n                    rxAmount: '8', \n                    endRange: '999'\n                }\n        ]\n        data-pack\n        flexibleRules: [\n            {startRange: '1', snreward_datapack_groupid: '17', rxreward_datapack_groupid: '12', endRange: '32'},\n            {startRange: '1', snreward_datapack_groupid: '17', rxreward_datapack_groupid: '12', endRange: '32'}\n        ]\n\n        voucher..\n         flexibleRules: [\n            {startRange: '10', snreward_voucherid: 'PD0044', rxreward_voucherid: 'PD0044', endRange: '20'},\n            {startRange: '10', snreward_voucherid: 'PD0044', rxreward_voucherid: 'PD0044', endRange: '20'}\n        ]\n     */\n\n    const onSubmit = (e) => {\n        e.preventDefault()\n\n        const flexibleData = {\n            cashbackFlexibleData,\n            voucherFlexibleData,\n            datapackFlexibleData,\n            pointFlexibleData\n        }\n        const finalRequestData = RuleDataReFormat(userInput, flexibleData)\n\n    //    console.log('final Data => ', finalRequestData)\n       setPointRuleloading(true)\n       useJwt2.commissionruleCreate(finalRequestData).then(res => {\n        // console.log(res.data)\n            history.push('/allRealtimeComRule')\n            Success(res)\n        //    setPointRuleloading(false)\n       }).catch((error) => {\n            setPointRuleloading(false)\n            Error(error)\n        })\n\n        // startDate = startDate.replace(/T/, ' ')\n        // endDate = endDate.replace(/T/, ' ')\n\n    }\n\n\n    return (\n        <Fragment>\n            <Button.Ripple className='mb-1' color='primary' tag={Link} to='/allRealtimeComRule' >\n                <div className='d-flex align-items-center'>\n                    <ChevronLeft size={17} style={{ marginRight: '5px' }} />\n                    <span >Back</span>\n                </div>\n            </Button.Ripple>\n            <Card>\n                <CardHeader className='border-bottom'>\n                    <CardTitle tag='h4'>Add Online Campaign Rule</CardTitle>\n                </CardHeader>\n            </Card>\n\n            <Form  style={{ width: '100%' }} onSubmit={onSubmit} autoComplete=\"off\">\n\n                <Row>\n                    <Col md=\"12\">\n                      <RealTimeCommisionRuleLogic \n                            userInput={userInput}\n                            setUserInput={setUserInput}\n                            cashbackFlexibleData={cashbackFlexibleData}\n                            setCashbackFlexibleData={setCashbackFlexibleData}\n                            voucherFlexibleData={voucherFlexibleData}\n                            setVoucherFlexibleData={setVoucherFlexibleData}\n\n                            datapackFlexibleData={datapackFlexibleData}\n                            setDatapackFlexibleData={setDatapackFlexibleData}\n                            pointFlexibleData={pointFlexibleData}\n                            setPointFlexibleData={setPointFlexibleData}\n                            onlyView={false}\n                        />\n                    </Col>\n                </Row>\n\n                <Row>\n                    <Col sm=\"12\" className='text-center'>\n                        {\n                            pointRuleloading ? <Button.Ripple color='primary' className='mr-1' disabled style={{ marginTop: '25px' }}>\n                                <Spinner color='white' size='sm' />\n                                <span className='ml-50'>Loading...</span>\n                            </Button.Ripple> : <Button.Ripple className='ml-2' color='primary' type=\"submit\" style={{ marginTop: '25px' }}>\n                                <span >Submit</span>\n                            </Button.Ripple>\n                        }\n                    </Col>\n                </Row>\n            </Form>\n        </Fragment>\n    )\n}\n\nexport default CreateRealTimeCommisionRule"],"sourceRoot":""}