(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[326],{2404:function(e,t,a){"use strict";a.r(t);var i=a(442),s=(a(495),a(448)),l=a(0),r=a(1720),n=a(711),c=a(440),o=a(461),d=a(432),u=a(465),j=a(452),p=a(446),m=a(445),h=a(449),b=a(450),g=a(451),v=a(1657),x=a(463),y=a(1680),O=a(1654),f=a(467),w=a(460),T=a.n(w),C=a(444),S=a.n(C),I=(a(788),a(503)),N=a(443),M=a(437),R=a(469),k=a(5);S()(T.a);t.default=()=>{var e,t,a,w,T,C,S,D,P;const[_,A]=Object(l.useState)(JSON.parse(localStorage.getItem("campaignInfo"))||{});console.log(_);const[E,B]=Object(l.useState)({}),G=Object(n.g)(),q=Object(l.useRef)(),H=Object(l.useRef)(),L=Object(l.useRef)(),F=Object(l.useRef)(),Q=Object(l.useRef)(),[W,U]=Object(l.useState)(!1),[z,J]=Object(l.useState)(!0),[Y,V]=Object(l.useState)([]),[Z,K]=Object(l.useState)([]),[X,$]=Object(l.useState)(null),[ee,te]=Object(l.useState)({}),[ae,ie]=Object(l.useState)({}),[se,le]=Object(l.useState)({}),[re,ne]=Object(l.useState)([]),[ce,oe]=Object(l.useState)([]),[de,ue]=Object(l.useState)([]),[je,pe]=Object(l.useState)([]),[me,he]=Object(l.useState)(JSON.parse((null===(e=JSON.parse(localStorage.getItem("campaignInfo")))||void 0===e?void 0:e.hrchyPercentage)||"{}")),[be,ge]=Object(l.useState)(!1),ve=[{name:"Voucher-Reward",minWidth:"30px",sortable:!0,selector:e=>e.is_voucher_reward?"True":"False"},{name:"Datapack-Reward",minWidth:"30px",sortable:!0,selector:e=>e.is_datapack_reward?"True":"False"},{name:"Cashback-Reward",minWidth:"30px",sortable:!0,selector:e=>e.is_datapack_reward||e.is_voucher_reward?"False":"True"},{name:"Reward Type",minWidth:"50px",sortable:!0,selector:"commissionType"},{name:"Transaction Amount",minWidth:"180px",sortable:!0,selector:e=>"flexible"===e.commissionType?e.flexibleRules.map((e=>Object(k.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.startRange===e.endRange?"".concat(e.startRange):"".concat(e.startRange," - ").concat(e.endRange)}))):"Any"},{name:"Sender Reward",minWidth:"100px",sortable:!0,wrap:!0,selector:e=>(e=>e.is_voucher_reward?"flexible"===e.commissionType?e.flexibleRules.map((e=>Object(k.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.snreward_voucherid||"--"}))):e.snreward_voucherid||"N/A":e.is_datapack_reward?"flexible"===e.commissionType?e.flexibleRules.map((e=>Object(k.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.snreward_datapack_groupid?"GroupId-".concat(e.snreward_datapack_groupid):"--"}))):e.snreward_datapack_groupid?"GroupId-".concat(e.snreward_datapack_groupid):"--":"flexible"===e.commissionType?e.flexibleRules.map((e=>Object(k.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.snAmount||"--"}))):e.snAmount||0)(e)},{name:"Receiver Reward",minWidth:"100px",sortable:!0,wrap:!0,selector:e=>(e=>e.is_voucher_reward?"flexible"===e.commissionType?e.flexibleRules.map((e=>Object(k.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.rxreward_voucherid||"--"}))):e.rxreward_voucherid||"N/A":e.is_datapack_reward?"flexible"===e.commissionType?e.flexibleRules.map((e=>Object(k.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.rxreward_datapack_groupid?"GroupId-".concat(e.rxreward_datapack_groupid):"--"}))):e.rxreward_datapack_groupid?"GroupId-".concat(e.rxreward_datapack_groupid):"--":"flexible"===e.commissionType?e.flexibleRules.map((e=>Object(k.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.rxAmount||"--"}))):e.rxAmount||0)(e)},{name:"Reward Value",minWidth:"100px",sortable:!0,selector:e=>"flexible"===e.commissionType?e.flexibleRules.map((e=>Object(k.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:null!==e&&void 0!==e&&e.isPercentage?"Percentage":"Flat"}))):null!==e&&void 0!==e&&e.isPercentage?"Percentage":"Flat"},{name:"Reward Range",minWidth:"100px",sortable:!0,selector:e=>"flexible"===e.commissionType?e.flexibleRules.map((e=>Object(k.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:null!==e&&void 0!==e&&e.isPercentage?"".concat(e.min," - ").concat(e.max):"---"}))):"fixed"===e.commissionType&&null!==e&&void 0!==e&&e.isPercentage?"".concat(e.min," - ").concat(e.max):"---"}],xe=e=>{A({..._,[e.target.name]:e.target.value})};Object(l.useEffect)((()=>{null!==_&&void 0!==_&&_.isMultiService&&J(!1);(async()=>{localStorage.setItem("useBMStoken",!0),await i.a.currentRealtimeRuleList().then((e=>{var t;console.log(e),V(null===(t=e.data.filter((e=>!e.isDefault)))||void 0===t?void 0:t.sort(((e,t)=>parseInt(t.commissionId)-parseInt(e.commissionId)))),B(e.data.find((e=>parseInt(e.commissionId)===(null===_||void 0===_?void 0:_.commissionId))))})).catch((e=>{Object(M.a)(e),console.log(e)})),localStorage.setItem("useBMStoken",!1),await i.a.getServiceList().then((e=>{console.log(e),K(e.data.payload),localStorage.setItem("useBMStoken",!1)})).catch((e=>{Object(M.a)(e),console.log(e),localStorage.setItem("useBMStoken",!1)})),localStorage.setItem("useBMStoken",!1),localStorage.setItem("usePMStoken",!1),await i.a.getCentralGroup().then((e=>{console.log(e);const t=[];for(const a of e.data.payload)a.is_approved&&4!==a.type&&a.group_member_count&&t.push(a);$(t)})).catch((e=>{Object(M.a)(e),console.log(e.response)}));const e=new Headers;e.append("Accept","application/json");const t=window.btoa("".concat(I.g,":").concat(I.e)),a="Basic ".concat(t);e.append("Authorization",a)})()}),[]);const ye=e=>{"s"===_.receiver?2===e.senGroupType||0===e.senGroupType?ge(!0):(ge(!1),A({..._,isHierarchy:!1}),he({})):"r"===_.receiver?2===e.recGroupType||0===e.senGroupType?ge(!0):(ge(!1),A({..._,isHierarchy:!1}),he({})):"b"===_.receiver&&(2===e.recGroupType||0===e.senGroupType||2===e.senGroupType||0===e.senGroupType?ge(!0):(ge(!1),A({..._,isHierarchy:!1}),he({})))};Object(l.useEffect)((()=>{0!==Object.keys(_).length&&("0"!==(null===_||void 0===_?void 0:_.serviceId)?(localStorage.setItem("useBMStoken",!0),i.a.getServiceLogicByServiceId(null===_||void 0===_?void 0:_.serviceId).then((e=>{var t,a;console.log(e),te(e.data),"s"===(null===(t=e.data)||void 0===t?void 0:t.ruleProvider)?(ie({groupId:null===_||void 0===_?void 0:_.mapGroupId,groupType:null===_||void 0===_?void 0:_.mapGroupType}),le({groupId:null===_||void 0===_?void 0:_.groupId,groupType:null===_||void 0===_?void 0:_.groupType})):"r"===(null===(a=e.data)||void 0===a?void 0:a.ruleProvider)&&(le({groupId:null===_||void 0===_?void 0:_.mapGroupId,groupType:null===_||void 0===_?void 0:_.mapGroupType}),ie({groupId:null===_||void 0===_?void 0:_.groupId,groupType:null===_||void 0===_?void 0:_.groupType})),0===e.data.recGroupType?oe(X):oe([...null===X||void 0===X?void 0:X.filter((t=>t.type===e.data.recGroupType))]),0===e.data.senGroupType?ne(X):ne([...null===X||void 0===X?void 0:X.filter((t=>t.type===e.data.senGroupType))]),ye(e.data),localStorage.setItem("useBMStoken",!1)})).catch((e=>{console.log(e),localStorage.setItem("useBMStoken",!1)}))):(ie({groupId:null===_||void 0===_?void 0:_.mapGroupId,groupType:null===_||void 0===_?void 0:_.mapGroupType}),le({groupId:null===_||void 0===_?void 0:_.groupId,groupType:null===_||void 0===_?void 0:_.groupType})))}),[_,X]),Object(l.useEffect)((()=>{0!==Object.keys(ee).length&&ye(ee)}),[_.receiver]);const Oe=e=>{var t;let a=0,i=0,s=e;for(;null!==(l=s)&&void 0!==l&&l.match(/<TransactionTime>/)||null!==(r=s)&&void 0!==r&&r.match(/<TransactionId>/)||null!==(n=s)&&void 0!==n&&n.match(/<RewordAmount>/)||null!==(c=s)&&void 0!==c&&c.match(/<Msisdn>/)||null!==(o=s)&&void 0!==o&&o.match(/<TransactionAmount>/)||null!==(d=s)&&void 0!==d&&d.match(/<CampaignName>/);){var l,r,n,c,o,d,u,j,p,m,h,b,g,v,x,y,O,f,w,T;if(null!==(u=s)&&void 0!==u&&u.match(/<TransactionTime>/))a+=19,i+=2,s=null===(g=s)||void 0===g?void 0:g.replace(/<TransactionTime>/,"");if(null!==(j=s)&&void 0!==j&&j.match(/<TransactionId>/))a+=30,i+=15,s=null===(v=s)||void 0===v?void 0:v.replace(/<TransactionId>/,"");if(null!==(p=s)&&void 0!==p&&p.match(/<RewordAmount>/))a+=10,i-=4,s=null===(x=s)||void 0===x?void 0:x.replace(/<RewordAmount>/,"");if(null!==(m=s)&&void 0!==m&&m.match(/<Msisdn>/))a+=11,i-=3,s=null===(y=s)||void 0===y?void 0:y.replace(/<Msisdn>/,"");if(null!==(h=s)&&void 0!==h&&h.match(/<TransactionAmount>/))a+=10,i-=9,s=null===(O=s)||void 0===O?void 0:O.replace(/<TransactionAmount>/,"");if(null!==(b=s)&&void 0!==b&&b.match(/<CampaignName>/))i+=(null===_||void 0===_||null===(f=_.campaignName)||void 0===f?void 0:f.length)-14,a+=null===_||void 0===_||null===(w=_.campaignName)||void 0===w?void 0:w.length,s=null===(T=s)||void 0===T?void 0:T.replace(/<CampaignName>/,"")}return a+=null===(t=s)||void 0===t?void 0:t.length,{charCount:a,actualCharReduce:i}};return Object(k.jsxs)(l.Fragment,{children:[Object(k.jsx)(d.a.Ripple,{className:"mb-1",color:"primary",tag:c.b,to:"/allCampaigns",children:Object(k.jsxs)("div",{className:"d-flex align-items-center",children:[Object(k.jsx)(r.a,{size:17,style:{marginRight:"5px"}}),Object(k.jsx)("span",{children:"Back"})]})}),Object(k.jsxs)(u.a,{style:{width:"100%"},onSubmit:e=>{e.preventDefault(),localStorage.setItem("usePMStoken",!1),localStorage.setItem("useBMStoken",!0),U(!0);let{groupId:t,mapGroupId:a,groupType:s,mapGroupType:l,hrchyPercentage:r}=_;null!==_&&void 0!==_&&_.isMultiService||"s"===ee.ruleProvider?(a=ae.groupId?ae.groupId:0,l=ae.groupType?ae.groupType:" ",t=se.groupId?se.groupId:0,s=se.groupType?se.groupType:" "):"r"===ee.ruleProvider&&(a=se.groupId?se.groupId:0,l=se.groupType?se.groupType:" ",t=ae.groupId?ae.groupId:0,s=ae.groupType?ae.groupType:" "),r=JSON.stringify(me),console.log({..._,mapGroupId:a,groupType:s,groupId:t,mapGroupType:l,hrchyPercentage:r}),i.a.updateCampaign(null===_||void 0===_?void 0:_.id,{..._,mapGroupId:a,groupType:s,groupId:t,mapGroupType:l,hrchyPercentage:r}).then((e=>{U(!1),localStorage.setItem("useBMStoken",!1),Object(M.c)(e),G.push("/allCampaigns")})).catch((e=>{U(!1),localStorage.setItem("useBMStoken",!1),Object(M.a)(e),console.log(e.response)}))},autoComplete:"off",children:[Object(k.jsxs)(j.a,{children:[Object(k.jsx)(p.a,{className:"border-bottom",children:Object(k.jsx)(m.a,{tag:"h4",children:"Update Campaign"})}),Object(k.jsx)(h.a,{style:{paddingTop:"15px"},children:Object(k.jsxs)(b.a,{children:[Object(k.jsx)(g.a,{sm:"4",children:Object(k.jsxs)(v.a,{children:[Object(k.jsxs)(x.a,{for:"campaignName",children:["Campaign Name",Object(k.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(k.jsx)(y.a,{type:"text",name:"campaignName",id:"campaignName",value:null===_||void 0===_?void 0:_.campaignName,onChange:xe,required:!0,placeholder:"name here..."})]})}),!_.isDynamicCamp&&Object(k.jsx)(g.a,{sm:"4",className:"mt-1 mb-1",children:Object(k.jsx)(O.a,{type:"switch",label:"Multi Service Alow?",id:"isMultiService",checked:null===_||void 0===_?void 0:_.isMultiService,onChange:e=>{e.target.checked?(A({..._,isMultiService:!0,serviceId:0,isSubCategory:!1,subTypes:[]}),J(!1)):(A({..._,isMultiService:!1,multiService:[]}),J(!0))}})}),z&&Object(k.jsx)(g.a,{sm:"4",children:Object(k.jsxs)(v.a,{children:[Object(k.jsxs)(x.a,{for:"Businesses",children:["Service Type",Object(k.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(k.jsx)(o.a,{ref:q,theme:s.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",value:{value:null===_||void 0===_?void 0:_.serviceId,label:null===Z||void 0===Z||null===(t=Z.map((e=>({value:{id:e.service_id,subTypes:e.sub_types},label:"".concat(e.service_keyword,": ").concat(e.keyword_description)}))).find((e=>e.value.id===(null===_||void 0===_?void 0:_.serviceId))))||void 0===t?void 0:t.label},onChange:e=>{A({..._,serviceId:e.value.id}),ue(e.value.subTypes)},options:null===Z||void 0===Z?void 0:Z.map((e=>({value:{id:e.service_id,subTypes:e.sub_types},label:"".concat(e.service_keyword,": ").concat(e.keyword_description)}))),isLoading:0===Z.length}),Object(k.jsx)(y.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:e=>q.current.select.focus(),value:(null===_||void 0===_?void 0:_.serviceId)||"",onChange:e=>""})]})}),z&&Object(k.jsx)(g.a,{sm:"4",className:"mt-1 mb-1",children:Object(k.jsx)(O.a,{type:"switch",label:"Allow Subtype",id:"isSubcategory",checked:null===_||void 0===_?void 0:_.isSubCategory,onChange:e=>{e.target.checked?A({..._,isSubCategory:!0}):A({..._,isSubCategory:!1,subTypes:[]})}})}),z&&(null===_||void 0===_?void 0:_.isSubCategory)&&Object(k.jsx)(g.a,{sm:"4",children:Object(k.jsxs)(v.a,{children:[Object(k.jsxs)(x.a,{for:"max_age",children:["Subtypes",Object(k.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(k.jsx)(o.a,{theme:s.i,isClearable:!0,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",menuPlacement:"auto",isMulti:!0,value:null===_||void 0===_?void 0:_.subTypes,onChange:e=>{const t=e.map((e=>e.value));A({..._,subTypes:t})},name:"user_os",isLoading:0===(null===de||void 0===de?void 0:de.length),required:!0,options:null===de||void 0===de?void 0:de.map((e=>({value:e,label:e})))})]})}),(null===_||void 0===_?void 0:_.isMultiService)&&Object(k.jsx)(g.a,{sm:"4",children:Object(k.jsxs)(v.a,{children:[Object(k.jsxs)(x.a,{for:"service id",children:["Select Services",Object(k.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(k.jsx)(o.a,{ref:q,theme:s.i,maxMenuHeight:200,isClearable:!0,menuPlacement:"auto",isMulti:!0,className:"react-select",classNamePrefix:"select",value:Z.map((e=>{for(const t of null===_||void 0===_?void 0:_.multiService)if(t===e.serviceId)return{value:t,label:e.serviceKeyword}})),onChange:e=>{const t=e.map((e=>e.value));A({..._,multiService:t})},options:null===Z||void 0===Z?void 0:Z.map((e=>({value:e.serviceId,label:e.serviceKeyword}))),isLoading:0===Z.length}),Object(k.jsx)(y.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:e=>q.current.select.focus(),value:(null===_||void 0===_?void 0:_.multiService)||[],onChange:e=>""})]})}),Object(k.jsx)(g.a,{sm:"12"}),Object(k.jsx)(g.a,{sm:"4",className:"mt-1 mb-1",children:Object(k.jsx)(O.a,{type:"switch",label:"Allow Dynamic Campaign?",id:"isDynamicCamp",checked:null===_||void 0===_?void 0:_.isDynamicCamp,onChange:e=>{e.target.checked?(A({..._,isDynamicCamp:!0,isMultiService:!0}),J(!0)):A({..._,isDynamicCamp:!1,isMultiService:!1,isSubCategory:!1})}})}),(null===_||void 0===_?void 0:_.isDynamicCamp)&&Object(k.jsx)(g.a,{sm:"4",children:Object(k.jsxs)(v.a,{children:[Object(k.jsxs)(x.a,{for:"dynamicCampExpire",children:["Dynamic Campaign Expiry",Object(k.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(k.jsx)(y.a,{type:"number",name:"dynamicCampExpire",id:"dynamicCampExpire",value:null===_||void 0===_?void 0:_.dynamicCampExpire,onChange:xe,required:!0,placeholder:"0"})]})}),Object(k.jsx)(g.a,{sm:"4",className:"mt-1 mb-1",children:Object(k.jsx)(O.a,{type:"switch",label:"Allow SameUser",id:"isSameUser",checked:null===_||void 0===_?void 0:_.isSameUser,onChange:e=>{e.target.checked?A({..._,isSameUser:!0}):A({..._,isSameUser:!1})}})}),Object(k.jsx)(g.a,{sm:"12"}),Object(k.jsxs)(g.a,{sm:"4",children:[Object(k.jsxs)(v.a,{children:[Object(k.jsxs)(x.a,{for:"Businesses",children:["Sender Group (",null===(a=[{value:1,label:"Customer"},{value:2,label:"Agent"},{value:3,label:"Merchant"},{value:0,label:"Any"}].find((e=>e.value===(ee.senGroupType?ee.senGroupType:0))))||void 0===a?void 0:a.label,") ","s"===ee.ruleProvider||null!==_&&void 0!==_&&_.isMultiService?Object(k.jsx)("span",{className:"text-danger",children:"*"}):"r"===ee.ruleProvider?" (optional)":""]}),Object(k.jsx)(o.a,{ref:H,theme:s.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",value:{value:ae.groupId,label:null===X||void 0===X||null===(w=X.find((e=>parseInt(e.id)===ae.groupId)))||void 0===w?void 0:w.group_name},onChange:e=>{ie(e?{groupId:parseInt(e.value.id),groupType:e.value.type}:{groupId:0,groupType:0})},options:null===re||void 0===re?void 0:re.map((e=>({value:{id:e.id,type:e.type},label:"".concat(e.id,". ").concat(e.group_name)}))),isLoading:0===(null===X||void 0===X?void 0:X.length),isClearable:"r"===ee.ruleProvider})]}),("s"===ee.ruleProvider||(null===_||void 0===_?void 0:_.isMultiService))&&Object(k.jsx)(y.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:e=>H.current.select.focus(),value:ae.groupId||"",onChange:e=>""})]}),Object(k.jsxs)(g.a,{sm:"4",children:[Object(k.jsxs)(v.a,{children:[Object(k.jsxs)(x.a,{for:"Businesses",children:["Receiver Group (",null===(T=[{value:1,label:"Customer"},{value:2,label:"Agent"},{value:3,label:"Merchant"},{value:0,label:"Any"}].find((e=>e.value===(ee.recGroupType?ee.recGroupType:0))))||void 0===T?void 0:T.label,") ","r"===ee.ruleProvider||null!==_&&void 0!==_&&_.isMultiService?Object(k.jsx)("span",{className:"text-danger",children:"*"}):"s"===ee.ruleProvider?" (optional)":""]}),Object(k.jsx)(o.a,{ref:L,theme:s.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",value:{value:se.groupId,label:null===X||void 0===X||null===(C=X.find((e=>parseInt(e.id)===se.groupId)))||void 0===C?void 0:C.group_name},onChange:e=>{e?le({groupId:parseInt(e.value.id),groupType:e.value.type}):ie({groupId:0,groupType:0})},options:null===ce||void 0===ce?void 0:ce.map((e=>({value:{id:e.id,type:e.type},label:"".concat(e.id,". ").concat(e.group_name)}))),isLoading:0===(null===X||void 0===X?void 0:X.length),isClearable:"s"===ee.ruleProvider})]}),("r"===ee.ruleProvider||(null===_||void 0===_?void 0:_.isMultiService))&&Object(k.jsx)(y.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:e=>L.current.select.focus(),value:se.groupId||"",onChange:e=>""})]}),Object(k.jsxs)(g.a,{sm:"4",children:[Object(k.jsxs)(v.a,{children:[Object(k.jsxs)(x.a,{for:"Businesses",children:["Campaign Rule",Object(k.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(k.jsx)(o.a,{ref:F,theme:s.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",value:{value:null===_||void 0===_?void 0:_.commissionId,label:null===(S=Y.find((e=>e.commissionId===(null===_||void 0===_?void 0:_.commissionId))))||void 0===S?void 0:S.commissionRuleName},onChange:e=>{A({..._,commissionId:e.value.commissionId,alertDate:e.value.endDate.replace(/ .*/g,"")}),B({...e.value})},options:null===Y||void 0===Y?void 0:Y.map((e=>({value:{...e},label:"".concat(e.commissionId,". ").concat(e.commissionRuleName)}))),isLoading:0===Y.length,menuPlacement:"auto"})]}),Object(k.jsx)(y.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:e=>F.current.select.focus(),value:(null===_||void 0===_?void 0:_.commissionId)||"",onChange:e=>""})]}),Object(k.jsx)(g.a,{md:"4",children:Object(k.jsxs)(v.a,{children:[Object(k.jsx)(x.a,{for:"alertDate",children:"Alert Date"}),Object(k.jsx)(y.a,{type:"date",min:new Date(null===E||void 0===E||null===(D=E.startDate)||void 0===D?void 0:D.replace(/ .*/g,"")).toLocaleDateString("fr-CA"),max:new Date(null===E||void 0===E||null===(P=E.endDate)||void 0===P?void 0:P.replace(/ .*/g,"")).toLocaleDateString("fr-CA"),name:"alertDate",id:"alertDate",value:null===_||void 0===_?void 0:_.alertDate,onChange:xe,required:!0,placeholder:"0"})]})}),Object(k.jsxs)(g.a,{sm:"4",children:[Object(k.jsxs)(v.a,{children:[Object(k.jsxs)(x.a,{for:"receiver",children:["Reward Receiver",Object(k.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(k.jsx)(o.a,{ref:Q,theme:s.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",defaultValue:{value:null===_||void 0===_?void 0:_.receiver,label:"s"===(null===_||void 0===_?void 0:_.receiver)?"Sender":"r"===(null===_||void 0===_?void 0:_.receiver)?"Receiver":"b"===(null===_||void 0===_?void 0:_.receiver)?"Both":""},onChange:e=>{A({..._,receiver:e.value})},options:[{value:"s",label:"Sender"},{value:"r",label:"Receiver"},{value:"b",label:"both"}]})]}),Object(k.jsx)(y.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:e=>Q.current.select.focus(),value:(null===_||void 0===_?void 0:_.receiver)||"",onChange:e=>""})]}),Object(k.jsx)(g.a,{sm:"4",children:Object(k.jsxs)(v.a,{children:[Object(k.jsxs)(x.a,{for:"campaignMsg",children:["Campaign Message",Object(k.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(k.jsx)(y.a,{type:"textarea",name:"campaignMsg",id:"campaignMsg",value:null===_||void 0===_?void 0:_.campaignMsg,onChange:xe,maxLength:(160-Oe(null===_||void 0===_?void 0:_.campaignMsg).actualCharReduce).toString(),required:!0,placeholder:"message here..."}),Object(k.jsxs)("p",{className:"text-right",style:160===Oe(null===_||void 0===_?void 0:_.campaignMsg).charCount?{margin:"2px",color:"red"}:{margin:"2px",color:"blue"},children:[160-Oe(null===_||void 0===_?void 0:_.campaignMsg).charCount," characters remaining"]})]})}),((null===E||void 0===E?void 0:E.isRxQuota)||(null===E||void 0===E?void 0:E.isQuota))&&Object(k.jsx)(g.a,{sm:"4",children:Object(k.jsxs)(v.a,{children:[Object(k.jsx)(x.a,{for:"qtExpireMsg",children:"Quota Expire Message"}),Object(k.jsx)(y.a,{type:"textarea",name:"qtExpireMsg",id:"qtExpireMsg",value:null===_||void 0===_?void 0:_.qtExpireMsg,onChange:xe,placeholder:"message here...",maxLength:(160-Oe(null===_||void 0===_?void 0:_.qtExpireMsg).actualCharReduce).toString()}),Object(k.jsxs)("p",{className:"text-right",style:160===Oe(null===_||void 0===_?void 0:_.qtExpireMsg).charCount?{margin:"2px",color:"red"}:{margin:"2px",color:"blue"},children:[160-Oe(null===_||void 0===_?void 0:_.qtExpireMsg).charCount," characters remaining"]})]})}),((null===E||void 0===E?void 0:E.isRxQuota)||(null===E||void 0===E?void 0:E.isQuota))&&Object(k.jsx)(g.a,{sm:"4",children:Object(k.jsxs)(v.a,{children:[Object(k.jsx)(x.a,{for:"qtPartialMsg",children:"Quota Partial Message"}),Object(k.jsx)(y.a,{type:"textarea",name:"qtPartialMsg",id:"qtPartialMsg",value:null===_||void 0===_?void 0:_.qtPartialMsg,onChange:xe,placeholder:"message here...",maxLength:(160-Oe(null===_||void 0===_?void 0:_.qtPartialMsg).actualCharReduce).toString()}),Object(k.jsxs)("p",{className:"text-right",style:160===Oe(null===_||void 0===_?void 0:_.qtPartialMsg).charCount?{margin:"2px",color:"red"}:{margin:"2px",color:"blue"},children:[160-Oe(null===_||void 0===_?void 0:_.qtPartialMsg).charCount," characters remaining"]})]})}),be&&Object(k.jsx)(g.a,{sm:"4",className:"mt-1 mb-1",children:Object(k.jsx)(O.a,{type:"switch",label:"Allow Hierarchy?",id:"isHierarchy",checked:null===_||void 0===_?void 0:_.isHierarchy,onChange:e=>{e.target.checked?A({..._,isHierarchy:!0}):(A({..._,isHierarchy:!1}),he({}))}})}),_.isHierarchy&&Object(k.jsx)(g.a,{sm:"12",children:Object(k.jsxs)(b.a,{children:[Object(k.jsx)(g.a,{sm:"12",children:Object(k.jsxs)("h5",{children:["Hierarchy List ",Object(k.jsx)("span",{style:{color:"#F49D1A",fontSize:"12px"},children:"( In total of all hierarchy percentage will not more than 100%! )"})]})}),0===je.length?Object(k.jsx)(g.a,{sm:"4",children:Object(k.jsx)(f.a,{color:"blue"})}):je.map((e=>Object(k.jsx)(g.a,{sm:"4",children:Object(k.jsxs)(v.a,{children:[Object(k.jsx)(x.a,{for:"hierarchy",children:e}),Object(k.jsx)(y.a,{disabled:"/campaignDetails"===location.pathname,type:"number",name:"hierarchy",id:"hierarchy",value:me[e]||0,onChange:t=>{let a=0;for(const e in me)a+=parseInt(me[e]);a+=parseInt(t.target.value)-me[e],a>100?(he({...me,[e]:0}),t.target.value=null):he({...me,[e]:t.target.value})},placeholder:"percentage here..."})]})})))]})})]})})]}),E.commissionId&&Object(k.jsx)(j.a,{children:Object(k.jsx)(h.a,{children:Object(k.jsxs)(b.a,{children:[Object(k.jsx)(g.a,{sm:"12",children:Object(k.jsx)("h4",{children:"Campaign Rule Details"})}),Object(k.jsx)(g.a,{sm:"4",children:Object(k.jsxs)(j.a,{style:{border:"1px solid grey"},children:[Object(k.jsxs)("div",{className:"d-flex justify-content-between border-bottom p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Campaign Rule Name:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:E.commissionRuleName})})]}),Object(k.jsxs)("div",{className:"d-flex justify-content-between border-bottom p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Default Campaign Id:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:E.returnCommissionId})})]}),Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Is Default?:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:E.isDefault?"True":"False"})})]}),Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Distribute Reward Point?:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:E.isPoint?"True":"False"})})]}),Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Start Date:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:null!==E&&void 0!==E&&E.startDate?Object(N.b)(null===E||void 0===E?void 0:E.startDate):"N/A"})})]}),Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"End Date:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:null!==E&&void 0!==E&&E.endDate?Object(N.b)(null===E||void 0===E?void 0:E.endDate):"N/A"})})]})]})}),Object(k.jsxs)(g.a,{sm:"4",children:[Object(k.jsxs)(j.a,{style:{border:"1px solid grey"},children:[Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Set Recurring Timeline?:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:E.isCertainTimeline?"True":"False"})})]}),Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Recurring Type:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:"w"===E.timelineType?"Weekly":"Monthly"})})]}),Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Recurring Type 2:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:"w"===E.timelineType&&E.isTimelineRange?"Day Range":"w"!==E.timelineType||E.isTimelineRange?"m"===E.timelineType&&E.isTimelineRange?"Date Range":"m"!==E.timelineType||E.isTimelineRange?"":"Specific Date":"Specific Day"})})]})]}),Object(k.jsxs)(j.a,{style:{border:"1px solid grey"},children:[Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Set Campaign Quota?:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:E.isQuota?"True":"False"})})]}),Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Quota Type:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:0===E.quotaType?"On Amount":1===E.quotaType?"On Transaction Count":2===E.quotaType?"Both":""})})]}),Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Set Quota Count:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:E.quotaCount})})]}),Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Set Quota Amount Limit:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:E.quotaAmount})})]})]}),Object(k.jsxs)(j.a,{style:{border:"1px solid grey"},children:[Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Set Reward Receivers's Quota?:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:E.isRxQuota?"True":"False"})})]}),Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Quota Type:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:0===E.rxQuotaType?"On Amount":1===E.quotaType?"On Transaction Count":2===E.quotaType?"Both":""})})]}),Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Set Quota Count:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:E.rxQuotaCount})})]}),Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Set Quota Amount Limit:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:E.rxQuotaAmount})})]})]})]}),Object(k.jsxs)(g.a,{sm:"4",children:[Object(k.jsxs)(j.a,{style:{border:"1px solid grey"},children:[Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Is Time?:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:E.isTime?"True":"False"})})]}),Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Start Hour:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:E.startHour})})]}),Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"End Hour:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:E.endHour})})]})]}),Object(k.jsxs)(j.a,{style:{border:"1px solid grey"},children:[Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Add Transaction Condition?:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:E.isFinBasedOffer?"True":"False"})})]}),Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Define TXN no.:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:E.offerCount})})]}),Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Reward Amount:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:E.offerAmount})})]})]}),Object(k.jsxs)(j.a,{style:{border:"1px solid grey"},children:[Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Create By:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:E.createBy})})]}),Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Create Date:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:null!==E&&void 0!==E&&E.createDate?Object(N.b)(null===E||void 0===E?void 0:E.createDate):"N/A"})})]}),Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Modify By:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:E.modifyBy})})]}),Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Create Date:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:null!==E&&void 0!==E&&E.modifyDate?Object(N.b)(null===E||void 0===E?void 0:E.modifyDate):"N/A"})})]}),Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Approved By:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:E.approvedBy})})]}),Object(k.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(k.jsx)("h6",{style:{margin:"0"},children:"Approve Date:"}),Object(k.jsx)("h6",{style:{margin:"0"},children:Object(k.jsx)("b",{children:null!==E&&void 0!==E&&E.approveDate?Object(N.b)(null===E||void 0===E?void 0:E.approveDate):"N/A"})})]})]})]}),Object(k.jsx)(g.a,{sm:"12",children:Object(k.jsx)(j.a,{style:{border:"1px solid grey"},children:Object(k.jsx)(h.a,{children:Object(k.jsx)(R.a,{column:ve,TableData:[E]})})})})]})})}),"/campaignDetails"!==location.pathname&&Object(k.jsx)(j.a,{children:Object(k.jsx)(g.a,{sm:"12",className:"text-center m-1",children:W?Object(k.jsxs)(d.a.Ripple,{color:"primary",className:"mr-1",disabled:!0,children:[Object(k.jsx)(f.a,{color:"white",size:"sm"}),Object(k.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(k.jsx)(d.a.Ripple,{className:"ml-2",color:"primary",type:"submit",children:Object(k.jsx)("span",{children:"Update"})})})})]})]})}},437:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return r}));a(0);var i=a(107);const s=e=>{try{const t=e.response;404===t.status||401===t.status||400===t.status||500===t.status||409===t.status?i.f.error(t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):i.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){i.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},l=e=>{try{const t=e.response;404!==t.status&&401!==t.status&&400!==t.status||i.f.error(t.data.errors?t.data.errors[Object.keys(t.data.errors)[0]]:t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){i.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},r=e=>{const t=e.data.message||"success";i.f.success(t,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},443:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return n})),a.d(t,"f",(function(){return c})),a.d(t,"e",(function(){return o})),a.d(t,"d",(function(){return d})),a.d(t,"a",(function(){return u}));var i=a(486),s=a.n(i);const l={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},r=e=>new Date(e).toLocaleDateString(void 0,l),n=e=>{e.endsWith("Z")&&(e=e.slice(0,-1));const t=e.indexOf("+");return-1!==t&&(e=e.slice(0,t)),s()(e).format("MMMM D, YYYY [at] h:mm A")},c=e=>String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),o=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),d=async e=>{401===e&&(window.location.href="/Adminlogin",await localStorage.clear())},u=(e,t,a)=>{const i=document.createElement("a");let s=function(e){let a;return a="",a+=t.join(","),a+="\n",e.forEach((e=>{let i=0;t.forEach((t=>{i>0&&(a+=","),a+=e[t],i++})),a+="\n"})),a}(e);if(null===s)return;const l=JSON.parse(localStorage.getItem("userData")),r="".concat(a,"_").concat((new Date).toISOString(),"_").concat(l.fullname.replaceAll(/\s/g,""),".csv");s.match(/^data:text\/csv/i)||(s="data:text/csv;charset=utf-8,".concat(s)),i.setAttribute("href",encodeURI(s)),i.setAttribute("download",r),i.click()}},469:function(e,t,a){"use strict";var i=a(0),s=a(1719),l=a(467),r=a(471),n=a.n(r),c=a(474),o=a.n(c),d=a(5);t.a=e=>{let{column:t,TableData:a,TableDataLoading:r}=e;const[c,u]=Object(i.useState)(0);return Object(d.jsx)(i.Fragment,{children:Object(d.jsx)(o.a,{noHeader:!0,pagination:!0,columns:t,paginationPerPage:10,className:"react-dataTable",sortIcon:Object(d.jsx)(s.a,{size:10}),paginationDefaultPage:c+1,paginationComponent:()=>Object(d.jsx)(n.a,{previousLabel:"",nextLabel:"",forcePage:c,onPageChange:e=>(e=>{u(e.selected)})(e),pageCount:a.length?a.length/10:1,breakLabel:"...",pageRangeDisplayed:2,marginPagesDisplayed:2,activeClassName:"active",pageClassName:"page-item",breakClassName:"page-item",breakLinkClassName:"page-link",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-1"}),data:a,progressPending:r,progressComponent:Object(d.jsx)(l.a,{color:"primary"}),responsive:!0,pointerOnHover:!0,highlightOnHover:!0,striped:!0})})}},495:function(e,t,a){}}]);
//# sourceMappingURL=326.fafbcc9e.chunk.js.map