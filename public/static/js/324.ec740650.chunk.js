(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[324],{1200:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/calendar-illustration.42be42ce.png"},2046:function(e,t,a){},2584:function(e,t,a){"use strict";a.r(t);var l=a(0),s=a(52),c=a.n(s),n=a(450),r=a(451),i=a(2323),d=a(2040),o=a(1848),b=a(2043),j=a(2045),u=a(485),p=a(107),h=a(452),m=a(449),v=a(1781),O=a(1718),x=a(5);const g=e=>{let{title:t,icon:a,color:s}=e;return Object(x.jsx)(l.Fragment,{children:Object(x.jsx)("div",{className:"toastify-header pb-0",children:Object(x.jsxs)("div",{className:"title-wrapper",children:[Object(x.jsx)(u.a,{size:"sm",color:s,icon:a}),Object(x.jsx)("h6",{className:"toast-title",children:t})]})})})},f=e=>{const t=Object(l.useRef)(null),{store:a,isRtl:s,dispatch:c,calendarsColor:n,calendarApi:r,setCalendarApi:u,handleAddEventSidebar:f,blankEvent:y,toggleSidebar:E,selectEvent:N,updateEvent:C}=e;Object(l.useEffect)((()=>{null===r&&u(t.current.getApi())}),[r]);const D={events:a.events.length?a.events:[],plugins:[j.a,o.b,b.a,d.a],initialView:"dayGridMonth",headerToolbar:{start:"sidebarToggle, prev,next, title",end:"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},editable:!0,eventResizableFromStart:!0,dragScroll:!0,dayMaxEvents:2,navLinks:!0,eventClassNames(e){let{event:t}=e;const a=n[t._def.extendedProps.calendar];return["bg-light-".concat(a)]},eventClick(e){let{event:t}=e;c(N(t)),f()},customButtons:{sidebarToggle:{text:Object(x.jsx)(v.a,{className:"d-xl-none d-block"}),click(){E(!0)}}},dateClick(e){const t=y;t.start=e.date,t.end=e.date,c(N(t)),f()},eventDrop(e){let{event:t}=e;c(C(t)),p.f.success(Object(x.jsx)(g,{title:"Event Updated",color:"success",icon:Object(x.jsx)(O.a,{})}),{autoClose:2e3,hideProgressBar:!0,closeButton:!1})},eventResize(e){let{event:t}=e;c(C(t)),p.f.success(Object(x.jsx)(g,{title:"Event Updated",color:"success",icon:Object(x.jsx)(O.a,{})}),{autoClose:2e3,hideProgressBar:!0,closeButton:!1})},ref:t,direction:s?"rtl":"ltr"};return Object(x.jsx)(h.a,{className:"shadow-none border-0 mb-0 rounded-0",children:Object(x.jsxs)(m.a,{className:"pb-0",children:[Object(x.jsx)(i.a,{...D})," "]})})};var y=Object(l.memo)(f),E=a(432),N=a(1654),C=a(1200);const D=[{label:"Personal",color:"danger",className:"custom-control-danger mb-1"},{label:"Business",color:"primary",className:"custom-control-primary mb-1"},{label:"Family",color:"warning",className:"custom-control-warning mb-1"},{label:"Holiday",color:"success",className:"custom-control-success mb-1"},{label:"ETC",color:"info",className:"custom-control-info"}];var S=e=>{const{handleAddEventSidebar:t,toggleSidebar:a,updateFilter:s,updateAllFilters:n,store:r,dispatch:i}=e;return Object(x.jsxs)(l.Fragment,{children:[Object(x.jsxs)("div",{className:"sidebar-wrapper",children:[Object(x.jsx)(m.a,{className:"card-body d-flex justify-content-center my-sm-0 mb-3",children:Object(x.jsx)(E.a.Ripple,{color:"primary",block:!0,onClick:()=>{a(!1),t()},children:Object(x.jsx)("span",{className:"align-middle",children:"Add Event"})})}),Object(x.jsxs)(m.a,{children:[Object(x.jsx)("h5",{className:"section-label mb-1",children:Object(x.jsx)("span",{className:"align-middle",children:"Filter"})}),Object(x.jsx)(N.a,{type:"checkbox",className:"mb-1",label:"View All",id:"view-all",checked:r.selectedCalendars.length===D.length,onChange:e=>i(n(e.target.checked))}),Object(x.jsx)("div",{className:"calendar-events-filter",children:D.length&&D.map((e=>Object(x.jsx)(N.a,{type:"checkbox",id:e.label,label:e.label,checked:r.selectedCalendars.includes(e.label),className:c()({[e.className]:e.className}),onChange:t=>i(s(e.label))},e.label)))})]})]}),Object(x.jsx)("div",{className:"mt-auto",children:Object(x.jsx)("img",{className:"img-fluid",src:C.default,alt:"illustration"})})]})},w=a(573),k=a.n(w),A=a(1822),F=a(1656),P=a(1128),B=a(461),T=a(574),R=a(532),L=a(535),U=a(530),V=a(465),_=a(1657),G=a(463),M=a(1680),H=a(448),z=a(21),I=a(57),J=a(56),q=a(81),Y=a(32),W=a(248);a(813),a(495);const K=e=>{let{title:t,icon:a,color:s}=e;return Object(x.jsx)(l.Fragment,{children:Object(x.jsx)("div",{className:"toastify-header pb-0",children:Object(x.jsxs)("div",{className:"title-wrapper",children:[Object(x.jsx)(u.a,{size:"sm",color:s,icon:a}),Object(x.jsx)("h6",{className:"toast-title",children:t})]})})})};var Q=e=>{const{store:t,dispatch:a,open:s,handleAddEventSidebar:n,calendarsColor:r,calendarApi:i,refetchEvents:d,addEvent:o,selectEvent:b,updateEvent:j,removeEvent:h}=e,m=t.selectedEvent,{register:v,errors:g,handleSubmit:f}=Object(T.c)(),[y,C]=Object(l.useState)(""),[D,S]=Object(l.useState)(""),[w,Q]=Object(l.useState)(""),[X,Z]=Object(l.useState)({}),[$,ee]=Object(l.useState)(!1),[te,ae]=Object(l.useState)(""),[le,se]=Object(l.useState)(new Date),[ce,ne]=Object(l.useState)(new Date),[re,ie]=Object(l.useState)([{value:"Business",label:"Business",color:"primary"}]),de=[{value:"Donna Frank",label:"Donna Frank",avatar:z.default},{value:"Jane Foster",label:"Jane Foster",avatar:I.default},{value:"Gabrielle Robertson",label:"Gabrielle Robertson",avatar:J.default},{value:"Lori Spears",label:"Lori Spears",avatar:q.default},{value:"Sandy Vega",label:"Sandy Vega",avatar:Y.default},{value:"Cheryl May",label:"Cheryl May",avatar:W.default}],oe=()=>{const e={id:m.id,title:w,allDay:$,start:ce,end:le,url:y,extendedProps:{location:te,description:D,guests:X,calendar:re[0].label}};a(j(e)),((e,t,a)=>{const l=i.getEventById(e.id);for(let s=0;s<t.length;s++){const a=t[s];l.setProp(a,e[a])}l.setDates(e.start,e.end,{allDay:e.allDay});for(let s=0;s<a.length;s++){const t=a[s];l.setExtendedProp(t,e.extendedProps[t])}})(e,["id","title","url"],["calendar","guests","location","description"]),n(),p.f.success(Object(x.jsx)(K,{title:"Event Updated",color:"success",icon:Object(x.jsx)(O.a,{})}),{autoClose:2e3,hideProgressBar:!0,closeButton:!1})},be=()=>{var e;a(h(m.id)),e=m.id,i.getEventById(e).remove(),n(),p.f.error(Object(x.jsx)(K,{title:"Event Removed",color:"danger",icon:Object(x.jsx)(A.a,{})}),{autoClose:2e3,hideProgressBar:!0,closeButton:!1})},je=()=>Object(H.f)(m)||!Object(H.f)(m)&&!m.title.length?Object(x.jsxs)(l.Fragment,{children:[Object(x.jsx)(E.a.Ripple,{className:"mr-1",type:"submit",color:"primary",children:"Add"}),Object(x.jsx)(E.a.Ripple,{color:"secondary",type:"reset",onClick:n,outline:!0,children:"Cancel"})]}):Object(x.jsxs)(l.Fragment,{children:[Object(x.jsx)(E.a.Ripple,{className:"mr-1",color:"primary",children:"Update"}),Object(x.jsx)(E.a.Ripple,{color:"danger",onClick:be,outline:!0,children:"Delete"})]}),ue=Object(x.jsx)(F.a,{className:"cursor-pointer",size:15,onClick:n});return Object(x.jsxs)(R.a,{isOpen:s,toggle:n,className:"sidebar-lg",contentClassName:"p-0",onOpened:()=>{if(!Object(H.f)(m)){const e=m.extendedProps.calendar,t=()=>e.length?{label:e,value:e,color:r[e]}:{value:"Business",label:"Business",color:"primary"};Q(m.title||w),ee(m.allDay||$),C(m.url||y),ae(m.extendedProps.location||te),S(m.extendedProps.description||D),Z(m.extendedProps.guests||X),ne(new Date(m.start)),se(m.allDay?new Date(m.start):new Date(m.end)),ie([t()])}},onClosed:()=>{a(b({})),Q(""),ee(!1),C(""),ae(""),S(""),Z({}),ie([{value:"Business",label:"Business",color:"primary"}]),ne(new Date),se(new Date)},modalClassName:"modal-slide-in event-sidebar",children:[Object(x.jsx)(L.a,{className:"mb-1",toggle:n,close:ue,tag:"div",children:Object(x.jsxs)("h5",{className:"modal-title",children:[m&&m.title&&m.title.length?"Update":"Add"," Event"]})}),Object(x.jsx)(U.a,{className:"flex-grow-1 pb-sm-0 pb-3",children:Object(x.jsxs)(V.a,{onSubmit:f((e=>{Object(H.f)(g)&&(Object(H.f)(m)||!Object(H.f)(m)&&!m.title.length?(()=>{const e={title:w,start:ce,end:le,allDay:$,display:"block",extendedProps:{calendar:re[0].label,url:y.length?y:void 0,guests:X.length?X:void 0,location:te.length?te:void 0,desc:D.length?D:void 0}};a(o(e)),d(),n(),p.f.success(Object(x.jsx)(K,{title:"Event Added",color:"success",icon:Object(x.jsx)(O.a,{})}),{autoClose:2e3,hideProgressBar:!0,closeButton:!1})})():oe(),n())})),children:[Object(x.jsxs)(_.a,{children:[Object(x.jsxs)(G.a,{for:"title",children:["Title ",Object(x.jsx)("span",{className:"text-danger",children:"*"})]}),Object(x.jsx)(M.a,{id:"title",name:"title",placeholder:"Title",value:w,onChange:e=>Q(e.target.value),innerRef:v({register:!0,validate:e=>""!==e}),className:c()({"is-invalid":g.title})})]}),Object(x.jsxs)(_.a,{children:[Object(x.jsx)(G.a,{for:"label",children:"Label"}),Object(x.jsx)(B.a,{id:"label",value:re,options:[{value:"Business",label:"Business",color:"primary"},{value:"Personal",label:"Personal",color:"danger"},{value:"Family",label:"Family",color:"warning"},{value:"Holiday",label:"Holiday",color:"success"},{value:"ETC",label:"ETC",color:"info"}],theme:H.i,className:"react-select",classNamePrefix:"select",isClearable:!1,onChange:e=>ie([e]),components:{Option:e=>{let{data:t,...a}=e;return Object(x.jsxs)(P.e.Option,{...a,children:[Object(x.jsx)("span",{className:"bullet bullet-".concat(t.color," bullet-sm mr-50")}),t.label]})}}})]}),Object(x.jsxs)(_.a,{children:[Object(x.jsx)(G.a,{for:"startDate",children:"Start Date"}),Object(x.jsx)(k.a,{required:!0,id:"startDate",name:"startDate",className:"form-control",onChange:e=>ne(e[0]),value:ce,options:{enableTime:!1===$,dateFormat:"Y-m-d H:i"}})]}),Object(x.jsxs)(_.a,{children:[Object(x.jsx)(G.a,{for:"endDate",children:"End Date"}),Object(x.jsx)(k.a,{required:!0,id:"endDate",name:"endDate",className:"form-control",onChange:e=>se(e[0]),value:le,options:{enableTime:!1===$,dateFormat:"Y-m-d H:i"}})]}),Object(x.jsx)(_.a,{children:Object(x.jsx)(N.a,{type:"switch",id:"allDay",name:"customSwitch",label:"All Day",checked:$,onChange:e=>ee(e.target.checked),inline:!0})}),Object(x.jsxs)(_.a,{children:[Object(x.jsx)(G.a,{for:"eventURL",children:"Event URL"}),Object(x.jsx)(M.a,{type:"url",id:"eventURL",value:y,onChange:e=>C(e.target.value),placeholder:"https://www.google.com"})]}),Object(x.jsxs)(_.a,{children:[Object(x.jsx)(G.a,{for:"guests",children:"Guests"}),Object(x.jsx)(B.a,{isMulti:!0,id:"guests",className:"react-select",classNamePrefix:"select",isClearable:!1,options:de,theme:H.i,value:X.length?[...X]:null,onChange:e=>Z([...e]),components:{Option:e=>{let{data:t,...a}=e;return Object(x.jsx)(P.e.Option,{...a,children:Object(x.jsxs)("div",{className:"d-flex flex-wrap align-items-center",children:[Object(x.jsx)(u.a,{className:"my-0 mr-1",size:"sm",img:t.avatar}),Object(x.jsx)("div",{children:t.label})]})})}}})]}),Object(x.jsxs)(_.a,{children:[Object(x.jsx)(G.a,{for:"location",children:"Location"}),Object(x.jsx)(M.a,{id:"location",value:te,onChange:e=>ae(e.target.value),placeholder:"Office"})]}),Object(x.jsxs)(_.a,{children:[Object(x.jsx)(G.a,{for:"description",children:"Description"}),Object(x.jsx)(M.a,{type:"textarea",name:"text",id:"description",rows:"3",value:D,onChange:e=>S(e.target.value),placeholder:"Description"})]}),Object(x.jsx)(_.a,{className:"d-flex",children:Object(x.jsx)(je,{})})]})})]})},X=a(673),Z=a(108),$=a(75),ee=a.n($);const te=e=>t=>{ee.a.get("/apps/calendar/events",{calendars:e}).then((e=>{t({type:"FETCH_EVENTS",events:e.data})}))},ae=e=>(t,a)=>{ee.a.post("/apps/calendar/add-event",{event:e}).then((()=>{t({type:"ADD_EVENT"}),t(te(a().calendar.selectedCalendars))}))},le=e=>t=>{ee.a.post("/apps/calendar/update-event",{event:e}).then((()=>{t({type:"UPDATE_EVENT"})}))},se=e=>(t,a)=>{t({type:"UPDATE_FILTERS",filter:e}),t(te(a().calendar.selectedCalendars))},ce=e=>(t,a)=>{t({type:"UPDATE_ALL_FILTERS",value:e}),t(te(a().calendar.selectedCalendars))},ne=e=>t=>{ee.a.delete("/apps/calendar/remove-event",{id:e}).then((()=>{t({type:"REMOVE_EVENT"})}))},re=e=>t=>{t({type:"SELECT_EVENT",event:e})};a(2046);const ie={Business:"primary",Holiday:"success",Personal:"danger",Family:"warning",ETC:"info"};t.default=()=>{const e=Object(Z.b)(),t=Object(Z.c)((e=>e.calendar)),[a,s]=Object(l.useState)(!1),[i,d]=Object(l.useState)(!1),[o,b]=Object(l.useState)(null),[j,u]=Object(X.a)(),p=()=>s(!a),h=e=>d(e);return Object(l.useEffect)((()=>{e(te(t.selectedCalendars))}),[]),Object(x.jsxs)(l.Fragment,{children:[Object(x.jsx)("div",{className:"app-calendar overflow-hidden border",children:Object(x.jsxs)(n.a,{noGutters:!0,children:[Object(x.jsx)(r.a,{id:"app-calendar-sidebar",className:c()("col app-calendar-sidebar flex-grow-0 overflow-hidden d-flex flex-column",{show:i}),children:Object(x.jsx)(S,{store:t,dispatch:e,updateFilter:se,toggleSidebar:h,updateAllFilters:ce,handleAddEventSidebar:p})}),Object(x.jsx)(r.a,{className:"position-relative",children:Object(x.jsx)(y,{isRtl:j,store:t,dispatch:e,blankEvent:{title:"",start:"",end:"",allDay:!1,url:"",extendedProps:{calendar:"",guests:[],location:"",description:""}},calendarApi:o,selectEvent:re,updateEvent:le,toggleSidebar:h,calendarsColor:ie,setCalendarApi:b,handleAddEventSidebar:p})}),Object(x.jsx)("div",{className:c()("body-content-overlay",{show:!0===i}),onClick:()=>h(!1)})]})}),Object(x.jsx)(Q,{store:t,dispatch:e,addEvent:ae,open:a,selectEvent:re,updateEvent:le,removeEvent:ne,calendarApi:o,refetchEvents:()=>{null!==o&&o.refetchEvents()},calendarsColor:ie,handleAddEventSidebar:p})]})}},495:function(e,t,a){}}]);
//# sourceMappingURL=324.ec740650.chunk.js.map