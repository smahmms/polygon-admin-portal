(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[360],{1554:function(e,t,a){"use strict";var s=a(442),c=a(448),r=a(0),o=a(1694),n=a(1804),l=a(461),d=a(452),i=a(465),j=a(450),m=a(451),b=a(644),u=a(463),h=a(1680),p=a(1657),O=a(1678),x=a(1679),y=a(1319),g=a(432),v=a(467),f=a(1654),C=a(460),N=a.n(C),S=a(444),k=a.n(S),_=a(437),w=a(5);k()(N.a);t.a=e=>{const{setConditionalRendering:t,showCompanyName:a,setshowCompanyName:C,continueBtn:N,setcontinueBtn:S}=e,[k,B]=Object(r.useState)({...JSON.parse(localStorage.getItem("registration_data")),isnewaccount:!0,isibn:!1,accountnumber:"",sortcode:"",accountholdername:"",isneedmorethenonepersontoauth:!1,addpaymentid:0,payment_method_id:1,sub_type:"monthly"}),[q,P]=Object(r.useState)({email:!1,address:!1,accountNumber:!1,sortcode:!1}),[E,I]=Object(r.useState)(!1),[A,M]=Object(r.useState)(!1),[R,Y]=Object(r.useState)(!0),[H,z]=Object(r.useState)(!1),[D,T]=Object(r.useState)(!1),[J,F]=Object(r.useState)([]),[L,K]=Object(r.useState)([]),[G,U]=Object(r.useState)(!1),[V,W]=Object(r.useState)([]),Q=e=>{if("email"===e.target.name){const t=/\S+@\S+\.\S+/.test(e.target.value),a={...q};a.email=!t,P({...a})}if("sortcode"===e.target.name){const t={...q};6!==e.target.value.length?t.sortcode=!0:t.sortcode=!1,P({...t})}if("accountnumber"===e.target.name){const t={...q};8!==e.target.value.length?t.accountNumber=!0:t.accountNumber=!1,P({...t})}B({...k,[e.target.name]:e.target.value})};return Object(w.jsx)("div",{className:"m-0",children:Object(w.jsx)(d.a,{children:Object(w.jsx)(i.a,{className:"p-2",style:{width:"100%"},onSubmit:e=>{e.preventDefault();const{accountnumber:t,address:a,city:c,email:r,firstname:o,lastname:n,postcode:l,sortcode:d,accountholdername:i}=k,j={...q};j.address=!a,P({...j}),!a||q.email||q.sortcode||q.accountNumber||(U(!0),s.a.customerBusinessRegistration({...k}).then((e=>{window.location.href=e.data.payload.payment_url})).catch((e=>{U(!1),Object(_.a)(e.response),console.log(e.response)})))},autoComplete:"off",children:Object(w.jsxs)(j.a,{children:[!!V.length&&Object(w.jsx)(m.a,{md:"12",children:Object(w.jsx)(b.a,{color:"danger",className:"p-1",children:Object(w.jsx)("ul",{children:V.map(((e,t)=>Object(w.jsx)("li",{children:"".concat(e.message)},t)))})})}),Object(w.jsxs)(m.a,{md:"4",className:"mb-1",children:[Object(w.jsx)(u.a,{children:a?"Company name":"First Name"}),a?Object(w.jsx)(h.a,{required:!0,placeholder:"Your Company Name",type:"text",name:"companyname",value:k.companyname,onChange:Q}):Object(w.jsx)(h.a,{required:!0,placeholder:"Firstname",type:"text",name:"firstname",value:k.firstname,onChange:Q})]}),!a&&Object(w.jsxs)(m.a,{md:"4",className:"mb-1",children:[Object(w.jsx)(u.a,{children:"Last Name"}),Object(w.jsx)(h.a,{required:!0,placeholder:"Lastname",type:"text",name:"lastname",value:k.lastname,onChange:Q})]}),Object(w.jsxs)(m.a,{md:"4",className:"mb-1",children:[Object(w.jsx)(u.a,{children:"Email"}),Object(w.jsx)(h.a,{required:!0,placeholder:"Your Email",type:"email",name:"email",value:k.email,onChange:Q}),q.email&&Object(w.jsx)("small",{style:{color:"red"},children:"Please enter a valid email"})]}),Object(w.jsxs)(m.a,{md:"4",className:"mb-1",children:[Object(w.jsx)(u.a,{children:"Account Holder Name"}),Object(w.jsx)(h.a,{required:!0,placeholder:"Account Holder Name",type:"text",name:"accountholdername",value:k.accountholdername,onChange:Q,disabled:!k.isnewaccount})]}),Object(w.jsxs)(m.a,{md:"4",className:"mb-1",children:[Object(w.jsxs)(u.a,{children:[k.isibn&&"IBAN"," Sort Code"]}),Object(w.jsx)(h.a,{required:!0,placeholder:"Sort Code",type:"number",name:"sortcode",value:k.sortcode,onChange:Q,disabled:!k.isnewaccount}),q.sortcode&&Object(w.jsx)("small",{style:{color:"red"},children:"must be 6 character"})]}),Object(w.jsxs)(m.a,{md:"4",className:"mb-1",children:[Object(w.jsxs)(u.a,{children:[k.isibn?"IBAN":"Account Number"," "]}),Object(w.jsx)(h.a,{required:!0,placeholder:"Account Number",type:"number",name:"accountnumber",value:k.accountnumber,onChange:Q,disabled:!k.isnewaccount}),q.accountNumber&&Object(w.jsx)("small",{style:{color:"red"},children:"must be 8 character"})]}),Object(w.jsxs)(m.a,{md:"12",children:[Object(w.jsx)("hr",{}),Object(w.jsx)(d.a,{children:Object(w.jsxs)(j.a,{children:[Object(w.jsx)(m.a,{md:"4",children:Object(w.jsxs)(p.a,{children:[Object(w.jsxs)(u.a,{for:"postcode",children:["Post Code",Object(w.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(w.jsxs)(O.a,{className:"input-group-merge mb-1",children:[Object(w.jsx)(x.a,{addonType:"prepend",children:Object(w.jsx)(y.a,{children:Object(w.jsx)(o.a,{size:14})})}),Object(w.jsx)(h.a,{type:"text",name:"postcode",id:"postcode",placeholder:"Post Code",value:k.postcode,onChange:Q,required:!0}),Object(w.jsx)(x.a,{addonType:"append",children:D?Object(w.jsx)(g.a,{style:{paddingBottom:"9px"},color:"primary",outline:!0,disabled:!0,children:Object(w.jsx)(v.a,{color:"primary",size:"sm"})}):Object(w.jsx)(g.a,{color:"primary",outline:!0,onClick:()=>{k.postcode&&(T(!0),F([]),B({...k,address:"",country:"",city:""}),s.a.ukAddressEndpoint({postCode:k.postcode}).then((e=>{const{addresses:t}=e.data.payload;t.length?M(!1):M(!0),Y(!0);const a=t.map(((e,t)=>({value:t,label:e.formatted_address.filter((e=>e)).splice(0,1).toString()})));T(!1),F(a),K(t)})).catch((e=>{T(!1),Object(_.a)(e),M(!0)})))},children:"Search"})}),Object(w.jsx)("div",{className:"p-0 m-0 w-100",children:A&&!H&&Object(w.jsx)("small",{style:{color:"red"},children:" postcode notfound"})}),Object(w.jsx)("div",{className:"p-0 m-0 w-100",children:H&&Object(w.jsx)("small",{style:{color:"red"},children:" postcode must be 6 to 8 character"})})]}),A&&Object(w.jsx)(f.a,{type:"checkbox",id:"postcode1",value:"CPC",onChange:e=>{B({...k,country:"",address:"",city:""}),e.target.checked?Y(!1):Y(!0)},inline:!0,label:"Click here to enter your address manually"})]})}),Object(w.jsx)(m.a,{md:"3",sm:"12",children:Object(w.jsxs)(p.a,{children:[Object(w.jsxs)(u.a,{for:"address",children:["Address ",Object(w.jsx)("span",{style:{color:"red"},children:"*"})]}),J.length?Object(w.jsx)(l.a,{styles:{control:(e,t)=>({...e,borderColor:"#7367f0"})},maxMenuHeight:150,theme:c.i,className:"react-select",classNamePrefix:"select",name:"address",required:!0,onChange:e=>{const t=+e.value;B({...k,address:e.label,country:L[t].country,city:L[t].town_or_city})},options:J,isClearable:!1}):Object(w.jsx)(h.a,{type:"text",required:!0,onChange:Q,value:k.address,disabled:R,name:"address",placeholder:"Address"}),q.address&&!k.address&&Object(w.jsx)("small",{style:{color:"red"},children:"Address is required"})]})}),Object(w.jsx)(m.a,{md:"3",sm:"12",children:Object(w.jsxs)(p.a,{children:[Object(w.jsxs)(u.a,{for:"country",children:["Country ",Object(w.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(w.jsx)(h.a,{onChange:Q,type:"text",required:!0,name:"country",value:k.country,disabled:R,id:"country",placeholder:"Country"})]})}),Object(w.jsx)(m.a,{md:"2",sm:"12",children:Object(w.jsxs)(p.a,{children:[Object(w.jsxs)(u.a,{for:"city",children:["City ",Object(w.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(w.jsx)(h.a,{onChange:Q,type:"text",required:!0,name:"city",value:k.city,disabled:R,id:"city",placeholder:"City"})]})})]})})]}),Object(w.jsx)(m.a,{md:"12",children:Object(w.jsx)("small",{children:"You may cancel this Direct Debit at any time by contacting Rilac or your bank"})}),Object(w.jsx)(m.a,{md:"12",className:"text-center",children:G?Object(w.jsxs)(g.a.Ripple,{className:"ml-2",color:"primary",disabled:!0,style:{marginTop:"22px"},children:[Object(w.jsx)(v.a,{size:"sm"}),Object(w.jsx)("span",{className:"align-middle ml-50",children:"Loading..."})]}):Object(w.jsxs)(g.a.Ripple,{className:"ml-2",color:"primary",style:{marginTop:"22px"},type:"submit",children:[Object(w.jsx)(n.a,{size:15}),Object(w.jsx)("span",{className:"align-middle ml-50",children:"Submit"})]})})]})})})})}},2654:function(e,t,a){"use strict";a.r(t);var s=a(622),c=a(442),r=a(109),o=(a(632),a(448),a(52),a(0)),n=a(574),l=a(108),d=a(711),i=a(452),j=a(449),m=a(543),b=a(1692),u=a(1693),h=a(432),p=a(546),O=a(547),x=a(467),y=(a(111),a(1115)),g=a(1116),v=(a(485),a(1734),a(1804)),f=a(465),C=a(450),N=a(451),S=a(1657),k=a(463),_=(a(814),a(503),a(437)),w=a(5);var B=()=>{Object(o.useContext)(r.a);const[e,t]=Object(s.a)(),i=Object(d.g)(),{register:j,errors:m,handleSubmit:b,trigger:u}=(Object(l.b)(),Object(n.c)()),[p,O]=Object(o.useState)({}),[g,B]=Object(o.useState)({}),[q,P]=Object(o.useState)(""),[E,I]=Object(o.useState)(!1),[A,M]=Object(o.useState)(0),[R,Y]=Object(o.useState)(!1),H=Object(y.useStripe)(),z=Object(y.useElements)(),D=(Object(o.useRef)(null),{style:{base:{lineHeight:"27px",color:"#212529",fontSize:"1.1rem","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}}),[T,J]=Object(o.useState)({...JSON.parse(localStorage.getItem("planDetails")),card_name:"",card_number:"",card_address:"",card_expiry:"",card_cvc:"",paymentMethodId:"",payment_method_id:2,sub_type:"monthly"}),F="dark"===e?"register-v2-dark.svg":"register-v2.svg";a(709)("./".concat(F)).default;return Object(w.jsx)("div",{className:"",children:Object(w.jsx)(f.a,{action:"/",className:"auth-register-form",onSubmit:async e=>{if(e.preventDefault(),I(!0),!H||!z)return void I(!1);const t={type:"card",card:z.getElement(y.CardNumberElement)};console.log(t),await H.createPaymentMethod(t).then((async e=>{console.log(e.paymentMethod.id),console.log({...T,paymentMethodId:e.paymentMethod.id});const t=async e=>{if(e.data.payload.error)I(!1),alert(e.data.payload.error);else if(e.data.payload.requiresAction){const{error:a,paymentIntent:s}=await H.handleCardAction(e.data.payload.clientSecret);a?(I(!1),alert(a)):c.a.payByStripe({paymentIntentId:null===s||void 0===s?void 0:s.id}).then((async e=>{const a=e.data.payload;t(a)})).catch((e=>{Object(_.a)(e)}))}else I(!1),console.log(e),Object(_.c)(e),i.push("/vendordashboard")};await c.a.quotaRequestPayByStripe({...T,paymentMethodId:e.paymentMethod.id}).then((async e=>{console.log(e);e.data.payload;I(!1),t(e)})).catch((e=>{I(!1),Object(_.a)(e.response),Object(_.a)(e),console.log(e.response)}))})).catch((e=>{console.log(e)}))},children:Object(w.jsxs)(C.a,{children:[Object(w.jsx)(N.a,{sm:"12",children:Object(w.jsxs)(S.a,{children:[Object(w.jsx)(k.a,{className:"form-label",for:"businessname",children:"Card Number"}),Object(w.jsx)(y.CardNumberElement,{type:"text",value:T.card_number,placeholder:"1234****",id:"cc-number",name:"businessname",options:D,onBlur:()=>{console.log("CardNumberElement [blur]",event.target.value)}})]})}),Object(w.jsx)(N.a,{sm:"6",children:Object(w.jsxs)(S.a,{children:[Object(w.jsx)(k.a,{className:"form-label",for:"card-expiry",children:"Card Expiry"}),Object(w.jsx)(y.CardExpiryElement,{type:"text",value:T.card_expiry,placeholder:"MM/YYYY",id:"expiry",name:"expiry",options:D})]})}),Object(w.jsx)(N.a,{sm:"6",children:Object(w.jsxs)(S.a,{children:[Object(w.jsx)(k.a,{className:"form-label",for:"businessname",children:"CVC"}),Object(w.jsx)(y.CardCvcElement,{type:"text",value:T.card_cvc,placeholder:"MM/YYYY",id:"cvc",name:"cvc",options:D})]})}),Object(w.jsx)(N.a,{md:"12",className:"text-center",children:E?Object(w.jsxs)(h.a.Ripple,{className:"ml-2",color:"primary",disabled:!0,style:{marginTop:"22px"},children:[Object(w.jsx)(x.a,{size:"sm"}),Object(w.jsx)("span",{className:"align-middle ml-50",children:"Loading..."})]}):Object(w.jsxs)(h.a.Ripple,{className:"ml-2",color:"primary",style:{marginTop:"22px"},type:"submit",children:[Object(w.jsx)(v.a,{size:15}),Object(w.jsx)("span",{className:"align-middle ml-50",children:"Submit"})]})})]})})})};a(1554);t.default=()=>{Object(o.useContext)(r.a);const[e,t]=Object(s.a)(),v=Object(d.g)(),{register:f,errors:C,handleSubmit:N,trigger:S}=(Object(l.b)(),Object(n.c)()),[k,_]=Object(o.useState)({}),[q,P]=Object(o.useState)({}),[E,I]=Object(o.useState)(""),[A,M]=Object(o.useState)(!1),[R,Y]=Object(o.useState)(0),H=Object(o.useRef)(null),[z,D]=Object(o.useState)({...JSON.parse(localStorage.getItem("planDetails"))}),[T,J]=Object(o.useState)({...JSON.parse(localStorage.getItem("registration_data")),country:"UK",payment_method_id:2});Object(o.useEffect)((async()=>{console.log("start use effect"),c.a.stripeData().then((async e=>{const t=e.data.payload;I(Object(g.a)(t.publishableKey)),M(!0),console.log(t),console.log("inside then use effect")})).catch((e=>{console.log("inside catch use effect"),console.log(e),Error(e)})),Y(parseFloat(50)),console.log(z)}),[]);const F="dark"===e?"register-v2-dark.svg":"register-v2.svg";a(709)("./".concat(F)).default;return Object(w.jsx)("div",{children:Object(w.jsx)(i.a,{style:{maxWidth:"768px"},className:"mx-auto my-4",children:Object(w.jsxs)(j.a,{className:"pt-2",children:[Object(w.jsx)(m.a,{pills:!0,className:"border-bottom pb-1",children:Object(w.jsx)(b.a,{children:Object(w.jsx)(u.a,{children:Object(w.jsx)(h.a.Ripple,{color:"primary",style:{cursor:"pointer"},onClick:e=>{v.goBack()},children:"Go Back"})})})}),Object(w.jsx)(m.a,{pills:!0,className:"border-bottom pb-1",children:Object(w.jsx)(b.a,{children:Object(w.jsx)("h4",{children:"Payment Info"})})}),Object(w.jsx)(p.a,{children:Object(w.jsx)(O.a,{children:A?Object(w.jsx)(y.Elements,{stripe:E,children:Object(w.jsx)(B,{amount:z.price_onetime,childFunc:H})}):Object(w.jsx)("div",{className:"d-flex justify-content-center",children:Object(w.jsx)(x.a,{className:"mt-5"})})})})]})})})}},437:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o}));a(0);var s=a(107);const c=e=>{try{const t=e.response;404===t.status||401===t.status||400===t.status||500===t.status||409===t.status?s.f.error(t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):s.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){s.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},r=e=>{try{const t=e.response;404!==t.status&&401!==t.status&&400!==t.status||s.f.error(t.data.errors?t.data.errors[Object.keys(t.data.errors)[0]]:t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){s.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},o=e=>{const t=e.data.message||"success";s.f.success(t,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}}}]);
//# sourceMappingURL=360.34622e1f.chunk.js.map