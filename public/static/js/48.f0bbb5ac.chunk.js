(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[48],{1075:function(e,a,s){"use strict";var t=s(0),r=s(542),o=s.n(r),c=(s(657),s(738)),l=s(442),i=(s(721),s(720),s(640),s(1840)),n=s(437),d=s(5);a.a=e=>{let{Image_Urls:a,setImage_Urls:s,mobile_img:r}=e;const[u,p]=Object(t.useState)([]),m=new o.a({meta:{type:"avatar"},autoProceed:!0,restrictions:{maxNumberOfFiles:10,allowedFileTypes:["image/*"]},onBeforeUpload:e=>{Object.values(e).map((e=>e.data)).forEach((e=>{if(r){let a=HTMLImageElement;a=document.createElement("img"),a.onload=async function(){if(a.width/a.height===4){const a=new FormData;a.append("image",e),l.a.singleFileupload(a).then((e=>{s((a=>[...a||[],e.data.payload.image_url]))})).catch((e=>{console.log(e.response),Object(n.b)(e)}))}else console.log("Invalid mobile ratio! please check the ratio"),Object(n.b)({response:{status:400,data:{message:"Invalid mobile ratio! please check the image ratio"}}})},a.src=URL.createObjectURL(e)}else{const a=new FormData;a.append("image",e),l.a.singleFileupload(a).then((e=>{s((a=>[...a,e.data.payload.image_url]))})).catch((e=>{console.log(e.response),Object(n.b)(e)}))}}))}});return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(c.a,{uppy:m}),Object(d.jsx)("div",{className:"d-flex flex-wrap",children:null!==a&&void 0!==a&&a.length?a.map(((e,t)=>Object(d.jsxs)("div",{className:"d-flex flex-column",children:[Object(d.jsx)("img",{className:"rounded mt-2 mr-1",src:e,alt:"avatar",height:150}),Object(d.jsx)("div",{className:"text-center",style:{marginTop:"5px"},children:Object(d.jsx)(i.a,{size:18,color:"red",style:{cursor:"pointer"},onClick:e=>s(a.filter(((e,a)=>a!==t)))})})]},t))):null})]})}},1881:function(e,a,s){"use strict";s.r(a);var t=s(0),r=s(1720),o=s(432),c=s(465),l=s(450),i=s(451),n=s(452),d=s(449),u=s(1657),p=s(463),m=s(1680),b=s(1654),j=s(446),h=s(445),g=s(467),O=s(442),f=(s(673),s(437)),x=s(711),v=s(440),y=s(461),_=s(448),N=s(1075),T=s(5);a.default=()=>{var e;const a=JSON.parse(localStorage.getItem("userData")),{promo_id:s}=Object(x.i)(),M=Object(x.g)(),C=Object(t.useRef)(),P=Object(t.useRef)(),w=Object(t.useRef)(),[R,k]=Object(t.useState)(!1),[z,S]=Object(t.useState)([]),[E,I]=Object(t.useState)([]),[F,U]=Object(t.useState)([]),[H,B]=Object(t.useState)({title:"",campaign_id:"",description:"",merchant_id:"",rule_id:"",promotion_type:"Normal",is_global:!1,group_id:""}),[L,D]=Object(t.useState)([]),[q,G]=Object(t.useState)([]),J=e=>{B({...H,[e.target.name]:e.target.value})};Object(t.useEffect)((async()=>{await O.a.campgnPromotionList().then((e=>{const a=e.data.payload.find((e=>e.id===s)),{is_global:t,promotion_type:r,rule_id:o,merchant_id:c,description:l,title:i,image_urls:n,mobile_image_urls:d,group_id:u}=a;D(n),G(d),B({title:i,description:l,merchant_id:c,rule_id:o,promotion_type:r,is_global:t,group_id:u})})).catch((e=>{Object(f.a)(e)})),await O.a.customerBusinessList().then((e=>{const{payload:a}=e.data;I(a.map((e=>({value:e.id,label:e.businessname}))))})).catch((e=>{Object(f.a)(e)})),await O.a.adRuleList().then((e=>{const a=[];for(const s of e.data.payload)!0===s.is_approved&&a.push(s);S(a.map((e=>({value:e.id,label:e.rule_name}))))})).catch((e=>{Object(f.a)(e)})),O.a.getCentralGroup().then((e=>{const a=[];for(const s of e.data.payload)!0===s.is_approved&&a.push(s);U(a)})).catch((e=>{Object(f.a)(e)}))}),[]);return Object(T.jsxs)(t.Fragment,{children:[Object(T.jsx)(o.a.Ripple,{className:"mb-1",color:"primary",tag:v.b,to:"vendor"===(null===a||void 0===a?void 0:a.role)?"/promolistVendor":"/promolist",children:Object(T.jsxs)("div",{className:"d-flex align-items-center",children:[Object(T.jsx)(r.a,{size:17,style:{marginRight:"5px"}}),Object(T.jsx)("span",{children:"Back"})]})}),Object(T.jsxs)(c.a,{style:{width:"100%"},onSubmit:e=>{e.preventDefault();const{title:t,description:r,merchant_id:o,rule_id:c,promotion_type:l,is_global:i,group_id:n}=H;k(!0),O.a.updatePromotion({id:s,title:t,description:r,merchant_id:+o,rule_id:+c,promotion_type:l,is_global:i,image_urls:L,mobile_image_urls:q,group_id:n}).then((e=>{Object(f.c)(e),k(!1),M.push("vendor"===(null===a||void 0===a?void 0:a.role)?"/promolistVendor":"/promolist")})).catch((e=>{k(!1),Object(f.a)(e),console.log(e.response)}))},autoComplete:"off",children:[Object(T.jsx)("h4",{className:"m-1",children:"Update Promotion Info"}),Object(T.jsxs)(l.a,{className:"match-height",children:[Object(T.jsx)(i.a,{sm:"6",children:Object(T.jsx)(n.a,{children:Object(T.jsx)(d.a,{children:Object(T.jsxs)(l.a,{children:[Object(T.jsx)(i.a,{sm:"12",children:Object(T.jsxs)(u.a,{children:[Object(T.jsxs)(p.a,{for:"title",children:["Title",Object(T.jsx)("span",{className:"text-danger",children:"*"})]}),Object(T.jsx)(m.a,{type:"text",name:"title",id:"title",value:H.title,onChange:J,required:!0,placeholder:"title here..."})]})}),Object(T.jsx)(i.a,{sm:"12",children:Object(T.jsxs)(u.a,{children:[Object(T.jsxs)(p.a,{for:"description",children:["Description",Object(T.jsx)("span",{className:"text-danger",children:"*"})]}),Object(T.jsx)(m.a,{type:"textarea",rows:"6",name:"description",id:"description",value:H.description,onChange:J,required:!0,placeholder:"description here..."})]})})]})})})}),Object(T.jsxs)(i.a,{sm:"6",children:[Object(T.jsx)(n.a,{children:Object(T.jsx)(d.a,{children:Object(T.jsxs)(l.a,{children:[Object(T.jsxs)(i.a,{sm:"12",children:[Object(T.jsxs)(u.a,{children:[Object(T.jsxs)(p.a,{for:"merchant_id",children:["Select a Merchant",Object(T.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(T.jsx)(y.a,{ref:C,theme:_.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",value:E.find((e=>+e.value===+H.merchant_id)),onChange:e=>{B({...H,merchant_id:e.value})},options:E,menuPlacement:"auto"})]}),Object(T.jsx)(m.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:e=>C.current.select.focus(),value:H.merchant_id||"",onChange:e=>""})]}),Object(T.jsxs)(i.a,{sm:"12",children:[Object(T.jsxs)(u.a,{children:[Object(T.jsxs)(p.a,{for:"rule_id",children:["AD Rule",Object(T.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(T.jsx)(y.a,{ref:P,theme:_.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",value:z.find((e=>+e.value===+H.rule_id)),onChange:e=>{B({...H,rule_id:e.value})},options:z,menuPlacement:"auto"})]}),Object(T.jsx)(m.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:e=>P.current.select.focus(),value:H.rule_id||"",onChange:e=>""})]}),Object(T.jsx)(i.a,{sm:"12",children:Object(T.jsxs)(u.a,{children:[Object(T.jsxs)(p.a,{for:"type",children:["Promotion Type",Object(T.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(T.jsx)(y.a,{theme:_.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",value:{value:H.promotion_type,label:H.promotion_type},onChange:e=>{B({...H,promotion_type:e.value})},options:[{value:"Normal",label:"Normal"},{value:"Special",label:"Special"}],menuPlacement:"auto"})]})}),Object(T.jsx)(i.a,{sm:"12",children:Object(T.jsxs)(u.a,{children:[Object(T.jsxs)(p.a,{for:"groups",children:["Group",Object(T.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(T.jsx)(y.a,{theme:_.i,maxMenuHeight:200,className:"react-select",id:"group",classNamePrefix:"select",value:{value:H.group_id,label:(null===(e=F.find((e=>e.id===H.group_id)))||void 0===e?void 0:e.group_name)||"select..."},onChange:e=>{B({...H,group_id:e.value})},options:null===F||void 0===F?void 0:F.map((e=>({value:e.id,label:e.group_name}))),ref:w}),Object(T.jsx)(m.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:e=>w.current.select.focus(),value:(null===H||void 0===H?void 0:H.group_id)||"",onChange:e=>""})]})}),Object(T.jsx)(i.a,{sm:"12",children:Object(T.jsxs)(u.a,{children:[Object(T.jsx)(p.a,{for:"title",children:"Is Global Promotion?"})," ",Object(T.jsx)("br",{}),Object(T.jsx)(b.a,{type:"switch",id:"is_global",name:"is_global",inline:!0,label:"",checked:H.is_global,onChange:e=>B({...H,is_global:e.target.checked})})]})})]})})}),"`"]})]}),Object(T.jsxs)(n.a,{children:[Object(T.jsx)(j.a,{className:"border-bottom",children:Object(T.jsx)(h.a,{tag:"h4",children:"Upload Images"})}),Object(T.jsx)(d.a,{style:{paddingTop:"15px"},children:Object(T.jsx)(l.a,{children:Object(T.jsx)(i.a,{md:"12",className:"mb-2",children:Object(T.jsx)(N.a,{Image_Urls:L,setImage_Urls:D})})})})]}),Object(T.jsxs)(n.a,{children:[Object(T.jsx)(j.a,{className:"border-bottom",children:Object(T.jsx)(h.a,{tag:"h4",children:"Upload Mobile Images"})}),Object(T.jsx)(d.a,{style:{paddingTop:"15px"},children:Object(T.jsx)(l.a,{children:Object(T.jsx)(i.a,{md:"12",className:"mb-2",children:Object(T.jsx)(N.a,{Image_Urls:q,setImage_Urls:G,mobile_img:!0})})})})]}),Object(T.jsx)(n.a,{children:Object(T.jsx)(d.a,{children:Object(T.jsx)(l.a,{children:Object(T.jsx)(i.a,{sm:"12",className:"text-center",children:R?Object(T.jsxs)(o.a.Ripple,{color:"primary",className:"mr-1",disabled:!0,children:[Object(T.jsx)(g.a,{color:"white",size:"sm"}),Object(T.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(T.jsx)(o.a.Ripple,{className:"ml-2",color:"primary",type:"submit",children:Object(T.jsx)("span",{children:"Submit"})})})})})})]})]})}},437:function(e,a,s){"use strict";s.d(a,"a",(function(){return r})),s.d(a,"b",(function(){return o})),s.d(a,"c",(function(){return c}));s(0);var t=s(107);const r=e=>{try{const a=e.response;404===a.status||401===a.status||400===a.status||500===a.status||409===a.status?t.f.error(a.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):t.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(a){t.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},o=e=>{try{const a=e.response;404!==a.status&&401!==a.status&&400!==a.status||t.f.error(a.data.errors?a.data.errors[Object.keys(a.data.errors)[0]]:a.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(a){t.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},c=e=>{const a=e.data.message||"success";t.f.success(a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},445:function(e,a,s){"use strict";var t=s(13),r=s(18),o=s(0),c=s.n(o),l=s(4),i=s.n(l),n=s(52),d=s.n(n),u=s(74),p={tag:u.tagPropType,className:i.a.string,cssModule:i.a.object},m=function(e){var a=e.className,s=e.cssModule,o=e.tag,l=Object(r.a)(e,["className","cssModule","tag"]),i=Object(u.mapToCssModules)(d()(a,"card-title"),s);return c.a.createElement(o,Object(t.a)({},l,{className:i}))};m.propTypes=p,m.defaultProps={tag:"div"},a.a=m},446:function(e,a,s){"use strict";var t=s(13),r=s(18),o=s(0),c=s.n(o),l=s(4),i=s.n(l),n=s(52),d=s.n(n),u=s(74),p={tag:u.tagPropType,className:i.a.string,cssModule:i.a.object},m=function(e){var a=e.className,s=e.cssModule,o=e.tag,l=Object(r.a)(e,["className","cssModule","tag"]),i=Object(u.mapToCssModules)(d()(a,"card-header"),s);return c.a.createElement(o,Object(t.a)({},l,{className:i}))};m.propTypes=p,m.defaultProps={tag:"div"},a.a=m},451:function(e,a,s){"use strict";var t=s(13),r=s(18),o=s(0),c=s.n(o),l=s(4),i=s.n(l),n=s(52),d=s.n(n),u=s(74),p=i.a.oneOfType([i.a.number,i.a.string]),m=i.a.oneOfType([i.a.bool,i.a.number,i.a.string,i.a.shape({size:i.a.oneOfType([i.a.bool,i.a.number,i.a.string]),order:p,offset:p})]),b={tag:u.tagPropType,xs:m,sm:m,md:m,lg:m,xl:m,className:i.a.string,cssModule:i.a.object,widths:i.a.array},j={tag:"div",widths:["xs","sm","md","lg","xl"]},h=function(e,a,s){return!0===s||""===s?e?"col":"col-"+a:"auto"===s?e?"col-auto":"col-"+a+"-auto":e?"col-"+s:"col-"+a+"-"+s},g=function(e){var a=e.className,s=e.cssModule,o=e.widths,l=e.tag,i=Object(r.a)(e,["className","cssModule","widths","tag"]),n=[];o.forEach((function(a,t){var r=e[a];if(delete i[a],r||""===r){var o=!t;if(Object(u.isObject)(r)){var c,l=o?"-":"-"+a+"-",p=h(o,a,r.size);n.push(Object(u.mapToCssModules)(d()(((c={})[p]=r.size||""===r.size,c["order"+l+r.order]=r.order||0===r.order,c["offset"+l+r.offset]=r.offset||0===r.offset,c)),s))}else{var m=h(o,a,r);n.push(m)}}})),n.length||n.push("col");var p=Object(u.mapToCssModules)(d()(a,n),s);return c.a.createElement(l,Object(t.a)({},i,{className:p}))};g.propTypes=b,g.defaultProps=j,a.a=g},452:function(e,a,s){"use strict";var t=s(13),r=s(18),o=s(0),c=s.n(o),l=s(4),i=s.n(l),n=s(52),d=s.n(n),u=s(74),p={tag:u.tagPropType,inverse:i.a.bool,color:i.a.string,body:i.a.bool,outline:i.a.bool,className:i.a.string,cssModule:i.a.object,innerRef:i.a.oneOfType([i.a.object,i.a.string,i.a.func])},m=function(e){var a=e.className,s=e.cssModule,o=e.color,l=e.body,i=e.inverse,n=e.outline,p=e.tag,m=e.innerRef,b=Object(r.a)(e,["className","cssModule","color","body","inverse","outline","tag","innerRef"]),j=Object(u.mapToCssModules)(d()(a,"card",!!i&&"text-white",!!l&&"card-body",!!o&&(n?"border":"bg")+"-"+o),s);return c.a.createElement(p,Object(t.a)({},b,{className:j,ref:m}))};m.propTypes=p,m.defaultProps={tag:"div"},a.a=m},463:function(e,a,s){"use strict";var t=s(13),r=s(18),o=s(0),c=s.n(o),l=s(4),i=s.n(l),n=s(52),d=s.n(n),u=s(74),p=i.a.oneOfType([i.a.number,i.a.string]),m=i.a.oneOfType([i.a.bool,i.a.string,i.a.number,i.a.shape({size:p,order:p,offset:p})]),b={children:i.a.node,hidden:i.a.bool,check:i.a.bool,size:i.a.string,for:i.a.string,tag:u.tagPropType,className:i.a.string,cssModule:i.a.object,xs:m,sm:m,md:m,lg:m,xl:m,widths:i.a.array},j={tag:"label",widths:["xs","sm","md","lg","xl"]},h=function(e,a,s){return!0===s||""===s?e?"col":"col-"+a:"auto"===s?e?"col-auto":"col-"+a+"-auto":e?"col-"+s:"col-"+a+"-"+s},g=function(e){var a=e.className,s=e.cssModule,o=e.hidden,l=e.widths,i=e.tag,n=e.check,p=e.size,m=e.for,b=Object(r.a)(e,["className","cssModule","hidden","widths","tag","check","size","for"]),j=[];l.forEach((function(a,t){var r=e[a];if(delete b[a],r||""===r){var o,c=!t;if(Object(u.isObject)(r)){var l,i=c?"-":"-"+a+"-";o=h(c,a,r.size),j.push(Object(u.mapToCssModules)(d()(((l={})[o]=r.size||""===r.size,l["order"+i+r.order]=r.order||0===r.order,l["offset"+i+r.offset]=r.offset||0===r.offset,l))),s)}else o=h(c,a,r),j.push(o)}}));var g=Object(u.mapToCssModules)(d()(a,!!o&&"sr-only",!!n&&"form-check-label",!!p&&"col-form-label-"+p,j,!!j.length&&"col-form-label"),s);return c.a.createElement(i,Object(t.a)({htmlFor:m},b,{className:g}))};g.propTypes=b,g.defaultProps=j,a.a=g},465:function(e,a,s){"use strict";var t=s(13),r=s(18),o=s(106),c=s(105),l=s(0),i=s.n(l),n=s(4),d=s.n(n),u=s(52),p=s.n(u),m=s(74),b={children:d.a.node,inline:d.a.bool,tag:m.tagPropType,innerRef:d.a.oneOfType([d.a.object,d.a.func,d.a.string]),className:d.a.string,cssModule:d.a.object},j=function(e){function a(a){var s;return(s=e.call(this,a)||this).getRef=s.getRef.bind(Object(o.a)(s)),s.submit=s.submit.bind(Object(o.a)(s)),s}Object(c.a)(a,e);var s=a.prototype;return s.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},s.submit=function(){this.ref&&this.ref.submit()},s.render=function(){var e=this.props,a=e.className,s=e.cssModule,o=e.inline,c=e.tag,l=e.innerRef,n=Object(r.a)(e,["className","cssModule","inline","tag","innerRef"]),d=Object(m.mapToCssModules)(p()(a,!!o&&"form-inline"),s);return i.a.createElement(c,Object(t.a)({},n,{ref:l,className:d}))},a}(l.Component);j.propTypes=b,j.defaultProps={tag:"form"},a.a=j},467:function(e,a,s){"use strict";var t=s(13),r=s(18),o=s(0),c=s.n(o),l=s(4),i=s.n(l),n=s(52),d=s.n(n),u=s(74),p={tag:u.tagPropType,type:i.a.string,size:i.a.string,color:i.a.string,className:i.a.string,cssModule:i.a.object,children:i.a.string},m=function(e){var a=e.className,s=e.cssModule,o=e.type,l=e.size,i=e.color,n=e.children,p=e.tag,m=Object(r.a)(e,["className","cssModule","type","size","color","children","tag"]),b=Object(u.mapToCssModules)(d()(a,!!l&&"spinner-"+o+"-"+l,"spinner-"+o,!!i&&"text-"+i),s);return c.a.createElement(p,Object(t.a)({role:"status"},m,{className:b}),n&&c.a.createElement("span",{className:Object(u.mapToCssModules)("sr-only",s)},n))};m.propTypes=p,m.defaultProps={tag:"div",type:"border",children:"Loading..."},a.a=m},640:function(e,a,s){}}]);
//# sourceMappingURL=48.f0bbb5ac.chunk.js.map