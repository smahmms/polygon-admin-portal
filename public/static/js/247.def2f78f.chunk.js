(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[247],{2413:function(e,s,t){"use strict";t.r(s);var a=t(0),r=t(1720),n=t(1682),o=t(1681),c=t(432),l=t(452),i=t(446),d=t(445),u=t(449),b=t(465),p=t(451),j=t(1657),g=t(463),h=t(1680),m=t(1654),O=t(549),f=t(467),x=t(475),v=(t(442),t(437)),y=t(711),k=t(440),_=t(461),N=t(448),T=t(5);const C=[{value:1,label:"Active"},{value:0,label:"InActive"}];s.default=()=>{const e=Object(y.g)(),[s,t]=(Object(a.useRef)(),Object(a.useState)([])),[M,P]=Object(a.useState)(""),[R,w]=Object(a.useState)({}),[S,z]=Object(a.useState)(!0),[E,D]=Object(a.useState)(!1),[B,A]=Object(a.useState)(!0),[H,L]=Object(a.useState)([]),[q,F]=Object(a.useState)({value:"",label:"select..."}),[W,I]=Object(a.useState)(!1),[K,U]=Object(a.useState)([{value:null,label:"All"}]),[V,J]=Object(a.useState)([{skustartrange:"",skuendrange:"",skupoints:""}]),[G,Q]=Object(a.useState)({status:1,skuamount:0,skupoints:0,skustartrange:0,skuendrange:0,product_id:null,isrange:!1,title:"",business_id:null,Tier:null,startdate:"",expiryDate:"",point_expiry_interval_days:365,productId:null});Object(a.useEffect)((async()=>{const[e,s]=await Promise.all([x.a.customerBusinessList().then((e=>{const{payload:s}=e.data,a=s.map((e=>({value:e.id,label:e.businessname})));return t(a),s.length?(P(s[0].id),w(a[0]),s[0].id):null})).catch((e=>(console.log(e.response),Object(v.a)(e),null))),x.a.tierList().then((e=>{console.log(e);const{payload:s}=e.data,t=s.map((e=>({value:e.id,label:e.tier})));return U([{value:null,label:"All"},...t]),null})).catch((e=>(console.log(e.response),Object(v.a)(e),null)))]);z(!1),Q({...G,business_id:e})}),[]);const X=e=>{Q({...G,[e.target.name]:e.target.value})},Y=(e,s)=>{(()=>{let e=!0;for(let s=0;s<V.length;s++)if(e=Object.values(V[s]).includes(""),e)return;A(e)})();const t=[...V];t[s]={...t[s],[e.target.name]:parseFloat(e.target.value)},J(t)};console.log("RangeArray ",V);return Object(T.jsxs)(a.Fragment,{children:[Object(T.jsx)(c.a.Ripple,{className:"mb-1",color:"primary",tag:k.b,to:"/overallPointRuleListForAdmin",children:Object(T.jsxs)("div",{className:"d-flex align-items-center",children:[Object(T.jsx)(r.a,{size:17,style:{marginRight:"5px"}}),Object(T.jsx)("span",{children:"Back"})]})}),Object(T.jsxs)(l.a,{children:[Object(T.jsx)(i.a,{className:"border-bottom",children:Object(T.jsx)(d.a,{tag:"h4",children:"Set Rule"})}),Object(T.jsx)(u.a,{style:{paddingTop:"15px"},children:Object(T.jsxs)(b.a,{className:"row",style:{width:"100%"},onSubmit:s=>{s.preventDefault();const{title:t,Tier:a,business_id:r,status:n,startdate:o,expiryDate:c,point_expiry_interval_days:l,skuamount:i,skupoints:d,skustartrange:u,skuendrange:b,productId:p,isrange:j}=G,g=[],h={rule_name:t,is_sku_rule:!1,is_global_rule:!0,is_service_rule:!1,bussiness_id:+r,is_range:j,is_active:1===n||!1,start_date:o,end_date:c,point_expiry_interval_days:+l,tire_id:a?+a:a,items:[]};h.is_range?V.map((e=>{g.push({product_id:null,service_id:null,start_range:e.skustartrange,end_range:e.skuendrange,point_receiver_type:"sender",sender_reward_point:e.skupoints,receiver_reward_point:0})})):g.push({product_id:null,service_id:null,start_range:i,end_range:null,point_receiver_type:"sender",sender_reward_point:d,receiver_reward_point:0}),h.items=g,console.log("body ",h),D(!0),x.a.pmsPointRuleCreate(h).then((s=>{D(!1),Object(v.c)({data:{message:s.data.payload.msg}}),e.push("/overallPointRuleListForAdmin")})).catch((e=>{D(!1),Object(v.a)(e),console.log(e.response)}))},autoComplete:"off",children:[Object(T.jsx)(p.a,{md:"4",children:Object(T.jsxs)(j.a,{children:[Object(T.jsx)(g.a,{for:"voucherValue",children:"Title"}),Object(T.jsx)(h.a,{type:"text",name:"title",id:"title",value:G.title,onChange:X,required:!0,placeholder:"title"})]})}),Object(T.jsx)(p.a,{sm:"4",children:Object(T.jsxs)(j.a,{children:[Object(T.jsxs)(g.a,{for:"Business",children:["Select a Business ",Object(T.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(T.jsx)(_.a,{theme:N.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",onChange:e=>{Q((s=>({...s,business_id:e.value}))),P(e.value),w(e)},value:R,options:s,isLoading:S})]})}),Object(T.jsx)(p.a,{md:"4",children:Object(T.jsxs)(j.a,{children:[Object(T.jsx)(g.a,{for:"Business",children:"Select a Tier"}),Object(T.jsx)(_.a,{theme:N.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",defaultValue:K[0],onChange:e=>Q({...G,Tier:e.value}),options:K})]})}),Object(T.jsx)(p.a,{md:"3",children:Object(T.jsxs)(j.a,{children:[Object(T.jsxs)(g.a,{for:"startdate",children:["Start Date",Object(T.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(T.jsx)(h.a,{type:"date",min:(new Date).toLocaleDateString("fr-CA"),name:"startdate",id:"startdate",value:G.startdate,onChange:X,required:!0,placeholder:"0"})]})}),Object(T.jsx)(p.a,{md:"3",children:Object(T.jsxs)(j.a,{children:[Object(T.jsxs)(g.a,{for:"expiryDate",children:["Expiry Date",Object(T.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(T.jsx)(h.a,{type:"date",min:(new Date).toLocaleDateString("fr-CA"),name:"expiryDate",id:"expiryDate",value:G.expiryDate,onChange:X,required:!0,placeholder:"0"})]})}),Object(T.jsx)(p.a,{md:"3",children:Object(T.jsxs)(j.a,{children:[Object(T.jsx)(g.a,{for:"Business",children:"Status"}),Object(T.jsx)(_.a,{theme:N.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",defaultValue:C[0],onChange:e=>{Q({...G,status:e.value})},options:C})]})}),Object(T.jsx)(p.a,{md:"3",children:Object(T.jsxs)(j.a,{children:[Object(T.jsx)(g.a,{for:"point_expiry_interval_days",children:"Point Expiry Interval (Days)"}),Object(T.jsx)(h.a,{type:"number",name:"point_expiry_interval_days",id:"point_expiry_interval_days",value:G.point_expiry_interval_days,onChange:X,min:0,placeholder:"0",onWheel:e=>e.target.blur()})]})}),Object(T.jsx)(p.a,{sm:"12",className:"mb-1",children:Object(T.jsx)(j.a,{children:Object(T.jsx)(m.a,{type:"switch",id:"isrange",name:"isrange",label:"Is Range?",onChange:e=>{e.target.checked?Q({...G,isrange:!0}):Q({...G,isrange:!1})}})})}),G.isrange?null:Object(T.jsxs)(a.Fragment,{children:[Object(T.jsx)(p.a,{sm:"6",children:Object(T.jsxs)(j.a,{children:[Object(T.jsxs)(g.a,{for:"skuamount",children:["SKU Amount",Object(T.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(T.jsx)(h.a,{type:"number",name:"skuamount",id:"skuamount",value:G.skuamount,onChange:X,required:!0,min:1,placeholder:"0",onWheel:e=>e.target.blur()})]})}),Object(T.jsx)(p.a,{sm:"6",children:Object(T.jsxs)(j.a,{children:[Object(T.jsxs)(g.a,{for:"skupoints",children:["SKU Points",Object(T.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(T.jsx)(h.a,{type:"number",name:"skupoints",id:"skupoints",value:G.skupoints,onChange:X,required:!0,min:0,placeholder:"0",step:1,onWheel:e=>e.target.blur()})]})}),"  "]}),!!G.isrange&&Object(T.jsx)(p.a,{md:"12",children:Object(T.jsxs)(O.a,{bordered:!0,responsive:!0,children:[Object(T.jsx)("thead",{style:{background:"white"},children:Object(T.jsxs)("tr",{children:[Object(T.jsxs)("th",{style:{background:"white"},children:["SKU Start Range",Object(T.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(T.jsxs)("th",{style:{background:"white"},children:["SKU End Range",Object(T.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(T.jsxs)("th",{style:{background:"white"},children:["SKU Point",Object(T.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(T.jsx)("th",{style:{background:"white"},children:"Action"})]})}),Object(T.jsx)("tbody",{children:V.map(((e,s)=>(console.log("row ",e),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:Object(T.jsx)(h.a,{type:"number",name:"skustartrange",id:"skustartrange".concat(s),value:e.skustartrange,min:s>0?Number(V[s-1].skuendrange)+.01:0,onChange:e=>Y(e,s),required:!0,placeholder:"0",onWheel:e=>e.target.blur(),step:"any"})}),Object(T.jsx)("td",{children:Object(T.jsx)(h.a,{type:"number",name:"skuendrange",id:"skuendrange".concat(s),value:e.skuendrange,min:e.skustartrange||0,step:"any",onChange:e=>Y(e,s),required:!0,placeholder:"0",onWheel:e=>e.target.blur()})}),Object(T.jsx)("td",{children:Object(T.jsx)(h.a,{type:"number",name:"skupoints",id:"skupoints".concat(s),value:e.skupoints,min:0,step:1,onChange:e=>Y(e,s),required:!0,placeholder:"0",onWheel:e=>e.target.blur()})}),Object(T.jsxs)("td",{children:[Object(T.jsx)(c.a.Ripple,{size:"sm",color:"info",type:B?"submit":"button",onClick:e=>{let s=!0;for(let t=0;t<V.length;t++){if(s=Object.values(V[t]).includes(""),s)return}J([...V,{skustartrange:Number(V[V.length-1].skuendrange)+.01,skuendrange:"",skupoints:""}]),A(!0)},children:Object(T.jsx)(n.a,{size:15})}),"\xa0\xa0",V.length>1&&Object(T.jsx)(c.a.Ripple,{size:"sm",color:"danger",onClick:e=>{J(V.filter(((e,t)=>t!==s)))},children:Object(T.jsx)(o.a,{size:15})})]})]},s))))})]})}),Object(T.jsx)(p.a,{sm:"12",className:"text-center",children:E?Object(T.jsxs)(c.a.Ripple,{color:"primary",className:"mr-1",disabled:!0,style:{marginTop:"25px"},children:[Object(T.jsx)(f.a,{color:"white",size:"sm"}),Object(T.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(T.jsx)(c.a.Ripple,{className:"ml-2",color:"primary",type:"submit",style:{marginTop:"25px"},children:Object(T.jsx)("span",{children:"Submit"})})})]})})]})]})}},437:function(e,s,t){"use strict";t.d(s,"a",(function(){return r})),t.d(s,"b",(function(){return n})),t.d(s,"c",(function(){return o}));t(0);var a=t(107);const r=e=>{try{const s=e.response;404===s.status||401===s.status||400===s.status||500===s.status||409===s.status?a.f.error(s.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):a.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(s){a.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},n=e=>{try{const s=e.response;404!==s.status&&401!==s.status&&400!==s.status||a.f.error(s.data.errors?s.data.errors[Object.keys(s.data.errors)[0]]:s.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(s){a.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},o=e=>{const s=e.data.message||"success";a.f.success(s,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},445:function(e,s,t){"use strict";var a=t(13),r=t(18),n=t(0),o=t.n(n),c=t(4),l=t.n(c),i=t(52),d=t.n(i),u=t(74),b={tag:u.tagPropType,className:l.a.string,cssModule:l.a.object},p=function(e){var s=e.className,t=e.cssModule,n=e.tag,c=Object(r.a)(e,["className","cssModule","tag"]),l=Object(u.mapToCssModules)(d()(s,"card-title"),t);return o.a.createElement(n,Object(a.a)({},c,{className:l}))};p.propTypes=b,p.defaultProps={tag:"div"},s.a=p},446:function(e,s,t){"use strict";var a=t(13),r=t(18),n=t(0),o=t.n(n),c=t(4),l=t.n(c),i=t(52),d=t.n(i),u=t(74),b={tag:u.tagPropType,className:l.a.string,cssModule:l.a.object},p=function(e){var s=e.className,t=e.cssModule,n=e.tag,c=Object(r.a)(e,["className","cssModule","tag"]),l=Object(u.mapToCssModules)(d()(s,"card-header"),t);return o.a.createElement(n,Object(a.a)({},c,{className:l}))};p.propTypes=b,p.defaultProps={tag:"div"},s.a=p},449:function(e,s,t){"use strict";var a=t(13),r=t(18),n=t(0),o=t.n(n),c=t(4),l=t.n(c),i=t(52),d=t.n(i),u=t(74),b={tag:u.tagPropType,className:l.a.string,cssModule:l.a.object,innerRef:l.a.oneOfType([l.a.object,l.a.string,l.a.func])},p=function(e){var s=e.className,t=e.cssModule,n=e.innerRef,c=e.tag,l=Object(r.a)(e,["className","cssModule","innerRef","tag"]),i=Object(u.mapToCssModules)(d()(s,"card-body"),t);return o.a.createElement(c,Object(a.a)({},l,{className:i,ref:n}))};p.propTypes=b,p.defaultProps={tag:"div"},s.a=p},451:function(e,s,t){"use strict";var a=t(13),r=t(18),n=t(0),o=t.n(n),c=t(4),l=t.n(c),i=t(52),d=t.n(i),u=t(74),b=l.a.oneOfType([l.a.number,l.a.string]),p=l.a.oneOfType([l.a.bool,l.a.number,l.a.string,l.a.shape({size:l.a.oneOfType([l.a.bool,l.a.number,l.a.string]),order:b,offset:b})]),j={tag:u.tagPropType,xs:p,sm:p,md:p,lg:p,xl:p,className:l.a.string,cssModule:l.a.object,widths:l.a.array},g={tag:"div",widths:["xs","sm","md","lg","xl"]},h=function(e,s,t){return!0===t||""===t?e?"col":"col-"+s:"auto"===t?e?"col-auto":"col-"+s+"-auto":e?"col-"+t:"col-"+s+"-"+t},m=function(e){var s=e.className,t=e.cssModule,n=e.widths,c=e.tag,l=Object(r.a)(e,["className","cssModule","widths","tag"]),i=[];n.forEach((function(s,a){var r=e[s];if(delete l[s],r||""===r){var n=!a;if(Object(u.isObject)(r)){var o,c=n?"-":"-"+s+"-",b=h(n,s,r.size);i.push(Object(u.mapToCssModules)(d()(((o={})[b]=r.size||""===r.size,o["order"+c+r.order]=r.order||0===r.order,o["offset"+c+r.offset]=r.offset||0===r.offset,o)),t))}else{var p=h(n,s,r);i.push(p)}}})),i.length||i.push("col");var b=Object(u.mapToCssModules)(d()(s,i),t);return o.a.createElement(c,Object(a.a)({},l,{className:b}))};m.propTypes=j,m.defaultProps=g,s.a=m},452:function(e,s,t){"use strict";var a=t(13),r=t(18),n=t(0),o=t.n(n),c=t(4),l=t.n(c),i=t(52),d=t.n(i),u=t(74),b={tag:u.tagPropType,inverse:l.a.bool,color:l.a.string,body:l.a.bool,outline:l.a.bool,className:l.a.string,cssModule:l.a.object,innerRef:l.a.oneOfType([l.a.object,l.a.string,l.a.func])},p=function(e){var s=e.className,t=e.cssModule,n=e.color,c=e.body,l=e.inverse,i=e.outline,b=e.tag,p=e.innerRef,j=Object(r.a)(e,["className","cssModule","color","body","inverse","outline","tag","innerRef"]),g=Object(u.mapToCssModules)(d()(s,"card",!!l&&"text-white",!!c&&"card-body",!!n&&(i?"border":"bg")+"-"+n),t);return o.a.createElement(b,Object(a.a)({},j,{className:g,ref:p}))};p.propTypes=b,p.defaultProps={tag:"div"},s.a=p},463:function(e,s,t){"use strict";var a=t(13),r=t(18),n=t(0),o=t.n(n),c=t(4),l=t.n(c),i=t(52),d=t.n(i),u=t(74),b=l.a.oneOfType([l.a.number,l.a.string]),p=l.a.oneOfType([l.a.bool,l.a.string,l.a.number,l.a.shape({size:b,order:b,offset:b})]),j={children:l.a.node,hidden:l.a.bool,check:l.a.bool,size:l.a.string,for:l.a.string,tag:u.tagPropType,className:l.a.string,cssModule:l.a.object,xs:p,sm:p,md:p,lg:p,xl:p,widths:l.a.array},g={tag:"label",widths:["xs","sm","md","lg","xl"]},h=function(e,s,t){return!0===t||""===t?e?"col":"col-"+s:"auto"===t?e?"col-auto":"col-"+s+"-auto":e?"col-"+t:"col-"+s+"-"+t},m=function(e){var s=e.className,t=e.cssModule,n=e.hidden,c=e.widths,l=e.tag,i=e.check,b=e.size,p=e.for,j=Object(r.a)(e,["className","cssModule","hidden","widths","tag","check","size","for"]),g=[];c.forEach((function(s,a){var r=e[s];if(delete j[s],r||""===r){var n,o=!a;if(Object(u.isObject)(r)){var c,l=o?"-":"-"+s+"-";n=h(o,s,r.size),g.push(Object(u.mapToCssModules)(d()(((c={})[n]=r.size||""===r.size,c["order"+l+r.order]=r.order||0===r.order,c["offset"+l+r.offset]=r.offset||0===r.offset,c))),t)}else n=h(o,s,r),g.push(n)}}));var m=Object(u.mapToCssModules)(d()(s,!!n&&"sr-only",!!i&&"form-check-label",!!b&&"col-form-label-"+b,g,!!g.length&&"col-form-label"),t);return o.a.createElement(l,Object(a.a)({htmlFor:p},j,{className:m}))};m.propTypes=j,m.defaultProps=g,s.a=m},465:function(e,s,t){"use strict";var a=t(13),r=t(18),n=t(106),o=t(105),c=t(0),l=t.n(c),i=t(4),d=t.n(i),u=t(52),b=t.n(u),p=t(74),j={children:d.a.node,inline:d.a.bool,tag:p.tagPropType,innerRef:d.a.oneOfType([d.a.object,d.a.func,d.a.string]),className:d.a.string,cssModule:d.a.object},g=function(e){function s(s){var t;return(t=e.call(this,s)||this).getRef=t.getRef.bind(Object(n.a)(t)),t.submit=t.submit.bind(Object(n.a)(t)),t}Object(o.a)(s,e);var t=s.prototype;return t.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},t.submit=function(){this.ref&&this.ref.submit()},t.render=function(){var e=this.props,s=e.className,t=e.cssModule,n=e.inline,o=e.tag,c=e.innerRef,i=Object(r.a)(e,["className","cssModule","inline","tag","innerRef"]),d=Object(p.mapToCssModules)(b()(s,!!n&&"form-inline"),t);return l.a.createElement(o,Object(a.a)({},i,{ref:c,className:d}))},s}(c.Component);g.propTypes=j,g.defaultProps={tag:"form"},s.a=g},467:function(e,s,t){"use strict";var a=t(13),r=t(18),n=t(0),o=t.n(n),c=t(4),l=t.n(c),i=t(52),d=t.n(i),u=t(74),b={tag:u.tagPropType,type:l.a.string,size:l.a.string,color:l.a.string,className:l.a.string,cssModule:l.a.object,children:l.a.string},p=function(e){var s=e.className,t=e.cssModule,n=e.type,c=e.size,l=e.color,i=e.children,b=e.tag,p=Object(r.a)(e,["className","cssModule","type","size","color","children","tag"]),j=Object(u.mapToCssModules)(d()(s,!!c&&"spinner-"+n+"-"+c,"spinner-"+n,!!l&&"text-"+l),t);return o.a.createElement(b,Object(a.a)({role:"status"},p,{className:j}),i&&o.a.createElement("span",{className:Object(u.mapToCssModules)("sr-only",t)},i))};p.propTypes=b,p.defaultProps={tag:"div",type:"border",children:"Loading..."},s.a=p},549:function(e,s,t){"use strict";var a=t(13),r=t(18),n=t(0),o=t.n(n),c=t(4),l=t.n(c),i=t(52),d=t.n(i),u=t(74),b={className:l.a.string,cssModule:l.a.object,size:l.a.string,bordered:l.a.bool,borderless:l.a.bool,striped:l.a.bool,dark:l.a.bool,hover:l.a.bool,responsive:l.a.oneOfType([l.a.bool,l.a.string]),tag:u.tagPropType,responsiveTag:u.tagPropType,innerRef:l.a.oneOfType([l.a.func,l.a.string,l.a.object])},p=function(e){var s=e.className,t=e.cssModule,n=e.size,c=e.bordered,l=e.borderless,i=e.striped,b=e.dark,p=e.hover,j=e.responsive,g=e.tag,h=e.responsiveTag,m=e.innerRef,O=Object(r.a)(e,["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"]),f=Object(u.mapToCssModules)(d()(s,"table",!!n&&"table-"+n,!!c&&"table-bordered",!!l&&"table-borderless",!!i&&"table-striped",!!b&&"table-dark",!!p&&"table-hover"),t),x=o.a.createElement(g,Object(a.a)({},O,{ref:m,className:f}));if(j){var v=Object(u.mapToCssModules)(!0===j?"table-responsive":"table-responsive-"+j,t);return o.a.createElement(h,{className:v},x)}return x};p.propTypes=b,p.defaultProps={tag:"table",responsiveTag:"div"},s.a=p}}]);
//# sourceMappingURL=247.def2f78f.chunk.js.map