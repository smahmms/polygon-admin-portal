(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[322],{1446:function(e,a,o){"use strict";o(0),o(1447);var t=o(39),c=o(5);a.a=e=>{let{style:a}=e;return Object(c.jsx)("div",{className:"background",style:a,children:Object(c.jsx)("img",{src:t.a.app.appLogoImage,alt:"logo",style:{height:"90px",width:"90px"}})})}},1447:function(e,a,o){},1643:function(e,a,o){"use strict";var t=o(0),c=o(1882),s=o.n(c),l=o(5);a.a=e=>{let{appId:a,userInput:o,setUserInput:c,setHaveFacebookResponse:r}=e;const i=Object(t.useRef)();return Object(l.jsxs)(t.Fragment,{children:[Object(l.jsx)("div",{style:{display:"none"},children:Object(l.jsx)(s.a,{appId:a,autoLoad:!1,fields:"name,email,picture",scope:"public_profile,pages_manage_posts,pages_manage_metadata",cookie:!1,state:"ren",callback:e=>{e.userID&&(r(!0),c({...o,facebook_user_id:e.userID,user_access_token:e.accessToken}))},render:e=>Object(l.jsx)("button",{type:"button",onClick:e.onClick,ref:i,children:"FB Login"})})}),Object(l.jsxs)("div",{style:{textAlign:"center"},className:"facebookconnectDiv",children:[Object(l.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAUwSURBVHgB1ZpdTBxVFMfPuTOwUL52rdrF2JQ+kDRpiokopqmJlFp9UHxpjTGxEW2NDz6IaS0kBgV5YUEifbCJTUD6amzig5oYo+JTk0pJDDyYyANEAoNQlu/dZWfu8dwtW752lt3pLLv8EnZ25s6duf/7ce7Zc0BwCX9jqALyorUkoEoAnSYALwCWcZFPlfO5iUATfG2MTwdJ0hBq8rbR4RsDF0B4CLyNQW9Bvv4hIL3Op8fBETiMhD+QiN54GFGOhPivLNWSBi3cw3XgLv2AVpsTQWkJKb+8+Cjp+BVPlHN8qkGG4Eb1gmm1T3X7xtOokxqHmhff5YnejbG5vyeMgYQ2o6u0P5WbUxLib1oOAMirkAUQsGcqUPLR7vclQS3mwnztF0J4BrIJ4VB4zTwz3+Obt7tF2BXELJJH+znrIhRIT6u2qDbZ3WIrpNCj/8qHGsgdagp4dtgVJpxa5U1LXxJQI2SAx4tRlh1AOJCP0pIAEZP0e8tkzq2SntoTRKcRKG7afnWHEP/Hiw08Tt+Aixw7JMy3nsvTXjuRB4+VYMLOkwRydpno1eur2r9BmfR5RHBpurO0d/O1LQ8tvxw8Qro2wF8rwCUuncqXV8/mi5KC1Cx9TWAFdhPCT5pfNqFyqbt0Nn5tyxqRutYCLor4vL6A2us9KYtIFeXHFcU25g0eCPE3Byv4dRfBJS7U5Mn3TuW5q2ALdI7bXBs/2xgR0j4Dl1CroLHOIyCzaNzmlvhJ7GVqNPjQAC7x0jFdPuHN4GBsUBffW2ImD0l7n8A96qv0XR+3GCb4aSRKY3NgsQk249fvrUgPpOEDFuQLtU20xoSwjXjFzf477BNJPeOJeaDzN1ZhfE6q1+rrf85APM+frWJ9kZ8AF3mkCM1k5c3fh+Ii3OB4+SehI4IscRJcxqOjbQ8vR4j+HE+qM21oLXpaIFI17CHBVcLFELhqCQjpKQEo9lRIRkCoVea3AvY5/OPLyyMCT8L+p0xnx8WR6fPoYHrybK1TQbK6pYUYTlyCvH5i+0i6+NDftOhoL3yhUoebbxcmbBCLTCokYkLCesOTlqy/vnoAHKBGIwjr0cB0ELh7g+2wq2cskFO7bKrFvgA5wsikdOpoTgginIcc4W/DAoeMcQ/IAcgRZlccuq4k7woOIP8FOUA4SvKfGQlOIIF3BWjWAOQAozOSTS85WiMI8nbM5/E3L41waCKttECRB+XRgyJhF/ZdKNQP+xK7UxwpkW/2hXbUC5skRv9zsthx2AiUVN3fDKX8jveitISsREiMTFppvzgUdVbPDk5t/KiOsQeG12QP7FMIra/VMSZkPTj8G+w/+uNJoY0hRqudPx0b8qzA2a341wdCWNkAl9yCfQKB6N2cotuy6LCQPuAtKWd2entoTJjR9s1XtgiZauVYKskrkOsgtm3PL+4wg9Od3l4ety7IUTjdcc3o2JlXTGjPjc5SzhfSIOQY/JN2aDpQljBvY7sxhSPyLB/uQO5wJxQxz9gV2gpRe0s4Yr2sEpGQfQZVWxwlQxWqotFZUs1uwDXIFii7jEDps8lEKFLyeabUvER4R5k92CN4Uc+rFJvR4U0pv5+y86YsBZqylj3MPsggFPMu6NtVEyu35wmTkZYXqmy3EfBeZNfgKLv9N8FtCH5HtF40AmVvbM4PpoKjmNa6a9DAkfxWlVtZT0s4i+gTjICgW+Gw7NltHSTDtWCySk+QRScRRPXIp2XVB4tjoVgVxYx3lgo7LYzOUPD5L5b+QCHVT+wBt/7x7H8V+e72tzhGsAAAAABJRU5ErkJggg=="}),Object(l.jsx)("p",{style:{paddingTop:10},children:"Facebook Access"}),o.page_name?Object(l.jsx)("p",{style:{marginTop:"-10px"},children:o.page_name}):null,Object(l.jsx)("button",{type:"button",className:"facebbokConnectBtn",onClick:()=>i.current.click(),children:Object(l.jsx)("p",{children:o.page_access_token?"Connected":"Connect"})})]})]})}},2472:function(e,a,o){"use strict";o.r(a);var t=o(442),c=o(448),s=o(0),l=o(461),r=o(452),i=o(446),n=o(445),d=o(1654),p=o(465),g=o(449),b=o(450),u=o(451),_=o(644),j=o(1657),h=o(463),f=o(1680),k=o(432),v=o(467),m=o(437),O=o(1643),y=o(1446),x=o(5);a.default=()=>{var e,a;Object(s.useRef)();const o=Object(s.useRef)(),[A,C]=(JSON.parse(localStorage.getItem("userData")),Object(s.useState)(!1)),[w,I]=Object(s.useState)(),[B,N]=Object(s.useState)(!1),[P,R]=Object(s.useState)([]),[F,L]=Object(s.useState)(!1),[S,T]=Object(s.useState)(null),[U,Q]=Object(s.useState)([]),[J,E]=Object(s.useState)(!0),[H,q]=Object(s.useState)({pageId:"",instagram_actor_id:"",allow_admin_facebook_page_post:!1,allow_other_merchant_facebook_page_post:!1,facebook_pagepost_page_id:"",facebook_user_id:"",user_access_token:"",facebook_page_category_localuid:"",facebookpage_subcategory_localuid:"",page_name:null,page_access_token:null}),[D,W]=Object(s.useState)({fb_page:!0});Object(s.useEffect)((()=>{(async()=>{localStorage.setItem("useBMStoken",!1),localStorage.setItem("usePMStoken",!1),await t.a.getFbpageCategory().then((e=>{console.log(e),R(e.data.payload.map((e=>({value:{id:e.uid,subcategory:e.subcategory},label:null===e||void 0===e?void 0:e.name}))))})).catch((e=>{Object(m.a)(e),console.log(e.response)})),await t.a.getMerchentCampaignSettings().then((e=>{var a,o,t,c,s,l,r,i,n,d,p,g,b;console.log(e),e.data.payload.facebook_page_category_localuid&&e.data.payload.facebookpage_subcategory_localuid&&Q(null===(b=P.find((a=>{var o;return a.value.id===(null===(o=e.data.payload)||void 0===o?void 0:o.facebook_page_category_localuid)})))||void 0===b?void 0:b.value.subcategory),q({pageId:null===(a=e.data.payload)||void 0===a?void 0:a.page_id,instagram_actor_id:null===(o=e.data.payload)||void 0===o?void 0:o.instagram_actor_id,allow_admin_facebook_page_post:null===(t=e.data.payload)||void 0===t?void 0:t.allow_admin_facebook_page_post,allow_other_merchant_facebook_page_post:null===(c=e.data.payload)||void 0===c?void 0:c.allow_other_merchant_facebook_page_post,facebook_pagepost_page_id:null===(s=e.data.payload)||void 0===s?void 0:s.global_facebook_page_id,user_access_token:null===(l=e.data.payload)||void 0===l?void 0:l.user_access_token,facebook_page_category_localuid:null===(r=e.data.payload)||void 0===r?void 0:r.facebook_page_category_localuid,facebookpage_subcategory_localuid:null===(i=e.data.payload)||void 0===i?void 0:i.facebookpage_subcategory_localuid,facebook_user_id:null===(n=e.data.payload)||void 0===n?void 0:n.facebook_user_id,page_name:(null===(d=e.data.payload)||void 0===d?void 0:d.page_name)||null,page_access_token:(null===(p=e.data.payload)||void 0===p?void 0:p.page_access_token)||null}),null!==(g=e.data.payload)&&void 0!==g&&g.global_facebook_page_id||T("This feature will active after create a facebook app by this site admin!"),E(!1)})).catch((e=>{E(!1),Object(m.a)(e),console.log(e.response)}))})()}),[]);return Object(x.jsxs)(s.Fragment,{children:[J&&Object(x.jsx)(r.a,{className:"p-2 position-relative",style:{height:"80vh"},children:Object(x.jsx)(y.a,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50% ,-50%)"}})}),!J&&Object(x.jsxs)(r.a,{children:[Object(x.jsxs)(i.a,{className:"border-bottom",children:[Object(x.jsx)(n.a,{tag:"h4",children:"Facebook Page"}),Object(x.jsx)(d.a,{onChange:e=>{e.target.checked?(W({...D,fb_page:!0}),T(null),L(!1)):W({...D,fb_page:!1})},type:"switch",id:"fb_page",inline:!0,label:"",defaultChecked:!0})]}),Object(x.jsx)(p.a,{style:{width:"100%"},onSubmit:e=>{e.preventDefault();const{facebook_pagepost_page_id:a,allow_admin_facebook_page_post:o,allow_other_merchant_facebook_page_post:c,facebook_user_id:s,app_secret:l,user_access_token:r,pageId:i,facebook_page_category_localuid:n,facebookpage_subcategory_localuid:d}=H;C(!0),t.a.updateFacebookPageCrd({allow_admin_facebook_page_post:o,allow_other_merchant_facebook_page_post:c,app_secret:l,facebook_pagepost_page_id:a,facebook_user_id:s,user_access_token:r,pageId:i,facebook_page_category_localuid:n,facebookpage_subcategory_localuid:d}).then((e=>{console.log(e),C(!1),Object(m.c)(e)})).catch((e=>{var a,o;T((null===(a=e.response)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.message)||"Error Occurred !"),console.log(e.response),C(!1)}))},autoComplete:"off",children:D.fb_page&&Object(x.jsx)(g.a,{style:{paddingTop:"15px"},children:Object(x.jsxs)(b.a,{children:[S?Object(x.jsx)(u.a,{md:"12",sm:"12",children:Object(x.jsx)(_.a,{color:"danger",children:Object(x.jsxs)("div",{className:"alert-body",children:[" ",S," "]})})}):null,F?Object(x.jsxs)(s.Fragment,{children:[Object(x.jsx)(u.a,{sm:"4",children:Object(x.jsxs)(j.a,{children:[Object(x.jsxs)(h.a,{for:"pageId",children:["Page Id",Object(x.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(x.jsx)(f.a,{type:"text",name:"pageId",id:"pageId",value:(null===H||void 0===H?void 0:H.pageId)||"",onChange:e=>{q({...H,[e.target.name]:e.target.value})},required:!0,placeholder:"page id"})]})}),Object(x.jsx)(u.a,{sm:"4",children:Object(x.jsxs)(j.a,{children:[Object(x.jsxs)(h.a,{for:"facebook_page_category_localuid",children:["Facebook Page Category",Object(x.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(x.jsx)(l.a,{ref:o,theme:c.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",value:{value:H.facebook_page_category_localuid,label:(null===(e=P.find((e=>e.value.id===H.facebook_page_category_localuid)))||void 0===e?void 0:e.label)||"select a category"},onChange:e=>{q({...H,facebook_page_category_localuid:e.value.id}),Q(null===e||void 0===e?void 0:e.value.subcategory)},options:P,isLoading:0===P.length}),Object(x.jsx)(f.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:e=>o.current.select.focus(),value:H.facebook_page_category_localuid||"",onChange:e=>""})]})}),0!==(null===U||void 0===U?void 0:U.length)&&Object(x.jsx)(u.a,{sm:"4",children:Object(x.jsxs)(j.a,{children:[Object(x.jsx)(h.a,{for:"facebookpage_subcategory_localuid",children:"Facebook page Sub Category"}),Object(x.jsx)(l.a,{theme:c.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",value:{value:H.facebookpage_subcategory_localuid,label:(null===U||void 0===U||null===(a=U.find((e=>e.uid===H.facebookpage_subcategory_localuid)))||void 0===a?void 0:a.name)||"select a subcategory"},onChange:e=>{q({...H,facebookpage_subcategory_localuid:e.value})},isClearable:!0,options:null===U||void 0===U?void 0:U.map((e=>({value:e.uid,label:e.name}))),isLoading:0===(null===U||void 0===U?void 0:U.length)})]})}),Object(x.jsx)(u.a,{sm:"4",className:"mb-2 mt-1",children:Object(x.jsx)(j.a,{children:Object(x.jsx)(d.a,{type:"switch",onChange:e=>{e.target.checked?q({...H,allow_admin_facebook_page_post:!0}):q({...H,allow_admin_facebook_page_post:!1})},id:"allow_admin_facebook_page_post",label:"Allow admin facebook page post?",checked:null===H||void 0===H?void 0:H.allow_admin_facebook_page_post})})}),Object(x.jsx)(u.a,{sm:"4",className:"mb-2 mt-1",children:Object(x.jsx)(j.a,{children:Object(x.jsx)(d.a,{type:"switch",onChange:e=>{e.target.checked?q({...H,allow_other_merchant_facebook_page_post:!0}):q({...H,allow_other_merchant_facebook_page_post:!1})},id:"allow_other_merchant_facebook_page_post",label:"Allow other merchant facebook page post?",checked:null===H||void 0===H?void 0:H.allow_other_merchant_facebook_page_post})})}),Object(x.jsx)(u.a,{sm:"12",className:"text-center mt-2",children:A?Object(x.jsxs)(k.a.Ripple,{color:"primary",className:"mr-1",disabled:!0,style:{marginTop:"25px"},children:[Object(x.jsx)(v.a,{color:"white",size:"sm"}),Object(x.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(x.jsx)(k.a.Ripple,{className:"ml-2",color:"primary",type:"submit",children:Object(x.jsx)("span",{children:H.page_access_token?"Update":"Submit"})})})]}):Object(x.jsx)(s.Fragment,{children:Object(x.jsx)(u.a,{sm:"3",className:"d-flex justify-content-right",children:Object(x.jsx)(O.a,{appId:H.facebook_pagepost_page_id,userInput:H,setUserInput:q,setHaveFacebookResponse:L})})})]})})})]})]})}},437:function(e,a,o){"use strict";o.d(a,"a",(function(){return c})),o.d(a,"b",(function(){return s})),o.d(a,"c",(function(){return l}));o(0);var t=o(107);const c=e=>{try{const a=e.response;404===a.status||401===a.status||400===a.status||500===a.status||409===a.status?t.f.error(a.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):t.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(a){t.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},s=e=>{try{const a=e.response;404!==a.status&&401!==a.status&&400!==a.status||t.f.error(a.data.errors?a.data.errors[Object.keys(a.data.errors)[0]]:a.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(a){t.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},l=e=>{const a=e.data.message||"success";t.f.success(a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}}}]);
//# sourceMappingURL=322.04dd2515.chunk.js.map