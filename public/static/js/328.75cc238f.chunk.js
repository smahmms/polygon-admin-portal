(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[328],{1118:function(e,s,a){"use strict";a.r(s),s.default=a.p+"static/media/coming-soon.539770ed.svg"},2511:function(e,s,a){"use strict";a.r(s);var t=a(442),o=a(485),r=a(0),c=a(467),n=a(1118),i=a(711),l=a(437),d=a(108),u=a(814),g=a(109),p=a(107),m=a(1734),b=(a(879),a(503)),h=a(448),j=a(5);const O=e=>{let{name:s,role:a}=e;return Object(j.jsxs)(r.Fragment,{children:[Object(j.jsx)("div",{className:"toastify-header",children:Object(j.jsxs)("div",{className:"title-wrapper",children:[Object(j.jsx)(o.a,{size:"sm",color:"success",icon:Object(j.jsx)(m.a,{size:12})}),Object(j.jsxs)("h6",{className:"toast-title font-weight-bold",children:["Welcome, ",s]})]})}),Object(j.jsx)("div",{className:"toastify-body",children:Object(j.jsxs)("span",{children:["You have successfully logged in as an ",a," user to system. Now you can start to explore. Enjoy!"]})})]})};s.default=()=>{const[e,s]=Object(r.useState)(null),a=Object(d.b)(),{search:o}=Object(i.h)(),m=Object(i.g)(),y=Object(r.useContext)(g.a),f=new URLSearchParams(location.search);JSON.parse(localStorage.getItem("registration_data"));return Object(r.useEffect)((async()=>{const e=f.get("card_id"),o=f.get("user_id");localStorage.setItem("usePMStoken",!1),localStorage.setItem("useBMStoken",!1),s("pending"),await t.a.goCardLessPaymentSuccess({card_id:e,user_id:o}).then((async e=>{s("success");const o={...e.data.payload.payload.user_info,accessToken:e.data.payload.payload.token,refreshToken:e.data.payload.payload.token,extras:{eCommerceCartItemsCount:5},role:"vendor",ability:[{action:"manage",subject:"VENDOR"},{action:"manage",subject:"Auth"}]};a(Object(u.a)(o)),y.update(o.ability),p.f.success(Object(j.jsx)(O,{name:o.username,role:o.role}),{transition:p.c,hideProgressBar:!0,autoClose:2e3}),localStorage.setItem("usePMStoken",!1),localStorage.setItem("BMSCall",!0),await t.a.getBMStoken({username:b.f,password:b.d}).then((e=>{localStorage.setItem("BMStoken",e.data.jwtToken),localStorage.setItem("BMSCall",!1)})).catch((e=>{localStorage.setItem("BMSCall",!1)})),await t.a.customerbusinesslistbymobileno({mobile:Number(e.data.payload.payload.user_info.mobileno)}).then((e=>{localStorage.setItem("customerBusinesses",JSON.stringify(e.data.payload)),m.push(Object(h.d)(o.role))})).catch((e=>{Object(l.a)(e)}))})).catch((e=>{Object(l.a)(e)}))}),[]),Object(j.jsxs)("div",{className:"misc-wrapper",children:[Object(j.jsx)("a",{className:"brand-logo",href:"/",children:Object(j.jsx)("h2",{style:{color:window.TukitakiThemeColor},className:"brand-text ml-1",children:"RILAC"})}),Object(j.jsx)("div",{className:"misc-inner p-2 p-sm-3",children:Object(j.jsxs)("div",{className:"w-100 text-center",children:["pending"===e?Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{className:"mb-1",children:"Payment is Processing... "}),Object(j.jsx)(c.a,{})]}):"success"===e?Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{className:"mb-1",children:"Payment Successful \ud83d\ude80"}),Object(j.jsx)("p",{className:"mb-3",children:"Logging into Dashboard"})]}):"",Object(j.jsx)("img",{className:"img-fluid",src:n.default,alt:"Coming soon page"})]})})]})}},437:function(e,s,a){"use strict";a.d(s,"a",(function(){return o})),a.d(s,"b",(function(){return r})),a.d(s,"c",(function(){return c}));a(0);var t=a(107);const o=e=>{try{const s=e.response;404===s.status||401===s.status||400===s.status||500===s.status||409===s.status?t.f.error(s.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):t.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(s){t.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},r=e=>{try{const s=e.response;404!==s.status&&401!==s.status&&400!==s.status||t.f.error(s.data.errors?s.data.errors[Object.keys(s.data.errors)[0]]:s.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(s){t.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},c=e=>{const s=e.data.message||"success";t.f.success(s,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},467:function(e,s,a){"use strict";var t=a(13),o=a(18),r=a(0),c=a.n(r),n=a(4),i=a.n(n),l=a(52),d=a.n(l),u=a(74),g={tag:u.tagPropType,type:i.a.string,size:i.a.string,color:i.a.string,className:i.a.string,cssModule:i.a.object,children:i.a.string},p=function(e){var s=e.className,a=e.cssModule,r=e.type,n=e.size,i=e.color,l=e.children,g=e.tag,p=Object(o.a)(e,["className","cssModule","type","size","color","children","tag"]),m=Object(u.mapToCssModules)(d()(s,!!n&&"spinner-"+r+"-"+n,"spinner-"+r,!!i&&"text-"+i),a);return c.a.createElement(g,Object(t.a)({role:"status"},p,{className:m}),l&&c.a.createElement("span",{className:Object(u.mapToCssModules)("sr-only",a)},l))};p.propTypes=g,p.defaultProps={tag:"div",type:"border",children:"Loading..."},s.a=p},879:function(e,s,a){}}]);
//# sourceMappingURL=328.75cc238f.chunk.js.map