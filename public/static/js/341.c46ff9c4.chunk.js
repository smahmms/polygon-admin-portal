(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[341],{2590:function(e,a,t){"use strict";t.r(a);var s=t(0),n=t(1682),r=t(452),c=t(446),o=t(543),i=t(1692),l=t(1693),d=t(546),p=t(547),j=t(445),b=t(432),m=t(448),g=(t(52),t(440)),h=t(442),u=(t(558),t(437)),O=t(460),x=t.n(O),f=t(444),k=t.n(f),v=t(443),C=(t(503),t(469)),y=t(1748),L=t(1822),D=t(711),w=t(5);const N=k()(x.a);var A=e=>{let{datapackList:a,TableDataLoading:t,refresh:n,setrefresh:o}=e;const[i,l]=Object(s.useState)(""),d=Object(D.g)(),p=[{name:"Name",minWidth:"250px",sortable:!0,selector:"name",wrap:!0},{name:"Operator",minWidth:"100px",sortable:!0,selector:"operator"},{name:"Volume In MB",minWidth:"100px",sortable:!0,selector:"volumeInMB"},{name:"Pack Code",minWidth:"100px",sortable:!0,selector:"packcode",wrap:!0},{name:"Created By",minWidth:"150px",sortable:!0,selector:"createdBy",wrap:!0},{name:"Created At",minWidth:"170px",sortable:!0,wrap:!0,sortType:(e,a)=>new Date(a.createdAt)-new Date(e.createdAt),selector:"created_at",cell:e=>e.createdAt?Object(v.b)(e.createdAt):null},{name:"Action",minWidth:"100px",selector:e=>Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("span",{title:"Edit",children:Object(w.jsx)(y.a,{size:15,color:"teal",style:{cursor:"pointer"},onClick:a=>{d.push("/editDatapackList"),localStorage.setItem("datapackInfo",JSON.stringify(e))}})})," \xa0\xa0",Object(w.jsx)("span",{title:"Delete",children:Object(w.jsx)(L.a,{size:15,color:"red",style:{cursor:"pointer"},onClick:()=>{return a=e.id,N.fire({title:"Do you want to Delete?",text:"Information will be delete when another user will approve this operation.",icon:"warning",allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!0,confirmButtonText:"Yes",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-danger ml-1"},showLoaderOnConfirm:!0,preConfirm:()=>h.a.datapackDelete({id:parseInt(a)}).then((e=>{console.log(e),Object(u.c)(e),o(!n)})).catch((e=>{Object(u.a)(e),console.log(e)})),buttonsStyling:!1,allowOutsideClick:()=>!x.a.isLoading()}).then((function(e){e.isConfirmed}));var a}})})]})}];return Object(w.jsxs)(r.a,{children:[Object(w.jsxs)(c.a,{children:[Object(w.jsx)(j.a,{}),Object(w.jsx)(b.a.Ripple,{className:"ml-1 text-dark",color:"light",onClick:e=>{Object(v.a)(a,Object.keys(a[0]),"Datapack List")},children:"Export CSV"})]}),Object(w.jsx)(C.a,{column:p,TableData:i.length?filteredData:a,TableDataLoading:t})]})};var S=e=>{let{datapackList:a,TableDataLoading:t,refresh:n,setrefresh:r}=e;const c=[{name:"Name",minWidth:"250px",sortable:!0,selector:"name",wrap:!0},{name:"Operator",minWidth:"100px",sortable:!0,selector:"operator"},{name:"Volume In MB",minWidth:"100px",sortable:!0,selector:"volumeInMB"},{name:"Pack Code",minWidth:"100px",sortable:!0,selector:"packcode",wrap:!0},{name:"Operation",minWidth:"150px",sortable:!0,selector:"action"},{name:"Created By",minWidth:"150px",sortable:!0,selector:"createdBy",wrap:!0},{name:"Created At",minWidth:"170px",sortable:!0,wrap:!0,sortType:(e,a)=>new Date(a.createdAt)-new Date(e.createdAt),selector:"created_at",cell:e=>e.createdAt?Object(v.b)(e.createdAt):null}];return Object(w.jsx)(s.Fragment,{children:Object(w.jsx)(C.a,{column:c,TableData:a,TableDataLoading:t})})},P=t(1717),B=t(1841),T=(t(475),t(532)),I=t(535),W=t(530),_=t(450),M=t(451),R=t(449),z=t(549),H=t(467);var E=e=>{let{modal:a,toggleModal:t,datapackListInfo:n,setRefresh:o,refresh:i,action:l}=e;const[d,p]=Object(s.useState)([]),[m,g]=Object(s.useState)(!1),[O,x]=Object(s.useState)([]);console.log(O),Object(s.useEffect)((()=>{n.id&&h.a.datapackListApprovalById(n.id).then((e=>{console.log(e);const a=[];for(const t of e.data.payload.module_data.roles){const s=e.data.payload.approved.find((e=>e.role_id===t.role_id));s?a.push({role_id:t.role_name,approved_by:s.approved_by,approved_at:s.approved_at}):a.push({role_id:t.role_name,approved_by:"--",approved_at:""})}p(a)})).catch((e=>{console.log(e),Object(u.a)(e)}))}),[n.id]);return Object(w.jsxs)(T.a,{size:"xl",isOpen:a,toggle:t,style:1===l?{border:"2px solid green"}:2===l?{border:"2px solid red"}:{},children:[Object(w.jsx)(I.a,{toggle:t,children:1===l?"Approve Datapack List":2===l?"Reject Datapack List":"Datapack List Details"}),Object(w.jsxs)(W.a,{children:[Object(w.jsx)(_.a,{children:Object(w.jsx)(M.a,{sm:"12",children:Object(w.jsxs)(r.a,{children:[Object(w.jsx)(c.a,{children:Object(w.jsx)(j.a,{children:"Approval Entry"})}),Object(w.jsx)(R.a,{children:Object(w.jsx)(_.a,{children:Object(w.jsx)(M.a,{sm:"12",children:Object(w.jsxs)(z.a,{children:[Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Role Id"}),Object(w.jsx)("th",{children:"Approved By"}),Object(w.jsx)("th",{children:"Approved At"})]}),0!==(null===d||void 0===d?void 0:d.length)?null===d||void 0===d?void 0:d.map(((e,a)=>Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:e.role_id}),Object(w.jsx)("td",{children:e.approved_by}),Object(w.jsx)("td",{children:e.approved_at?Object(v.b)(e.approved_at||""):"--"})]},a))):Object(w.jsx)(H.a,{className:"text-center"})]})})})})]})})}),Object(w.jsx)(_.a,{children:Object(w.jsx)(M.a,{sm:"12",className:"text-center",children:m?Object(w.jsxs)(b.a.Ripple,{color:"primary",className:"mr-1",disabled:!0,style:{marginTop:"25px"},children:[Object(w.jsx)(H.a,{color:"white",size:"sm"}),Object(w.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(w.jsx)(b.a.Ripple,{className:"ml-2",color:"primary",onClick:()=>{g(!0),h.a.datapackListApprove({id:n.id,action_id:l}).then((e=>{o(!i),Object(u.c)(e),g(!1),t(),console.log(e)})).catch((e=>{console.log(e.response),g(!1),t(),Object(u.a)(e)})),h.a.datapackListApprovalById(n.id).then((e=>{x(e.data.payload)}))},type:"button",style:{marginTop:"25px"},children:Object(w.jsx)("span",{children:"Confirm"})})})})]})]})};k()(x.a);var F=e=>{let{datapackList:a,TableDataLoading:t,refresh:n,setrefresh:r}=e;const[c,o]=Object(s.useState)(0),[i,l]=Object(s.useState)({}),[d,p]=Object(s.useState)(!1),j=[{name:"Name",minWidth:"250px",sortable:!0,selector:"name",wrap:!0},{name:"Operator",minWidth:"100px",sortable:!0,selector:"operator"},{name:"Volume In MB",minWidth:"100px",sortable:!0,selector:"volumeInMB"},{name:"Pack Code",minWidth:"100px",sortable:!0,selector:"packcode",wrap:!0},{name:"Operation",minWidth:"150px",sortable:!0,selector:"action"},{name:"Modified By",minWidth:"150px",sortable:!0,selector:"modifiedBy",wrap:!0},{name:"Modified At",minWidth:"170px",sortable:!0,wrap:!0,sortType:(e,a)=>new Date(a.modifiedAt)-new Date(e.modifiedAt),selector:"created_at",cell:e=>e.modifiedAt?Object(v.b)(e.modifiedAt):null},{name:"Action",minWidth:"150px",selector:e=>Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("span",{title:"Approve",children:Object(w.jsx)(P.a,{size:15,color:"teal",style:{cursor:"pointer"},onClick:()=>{l(e),p(!0),o(1)}})}),"\xa0\xa0",Object(w.jsx)("span",{title:"Reject",children:Object(w.jsx)(B.a,{size:15,color:"red",style:{cursor:"pointer"},onClick:()=>{l(e),p(!0),o(2)}})})]})}];return Object(w.jsxs)(s.Fragment,{children:[Object(w.jsx)(C.a,{column:j,TableData:a,TableDataLoading:t}),Object(w.jsx)(E,{modal:d,toggleModal:()=>p(!d),datapackListInfo:i,refresh:n,setRefresh:r,action:c})]})};k()(x.a);a.default=()=>{const e=localStorage.getItem("username"),[a,t]=Object(s.useState)([]),[O,x]=Object(s.useState)([]),[f,k]=Object(s.useState)([]),[v,C]=Object(s.useState)(!0),[y,L]=Object(s.useState)([]),[D,N]=Object(s.useState)(null),[P,B]=Object(s.useState)(1),[T,I]=Object(s.useState)("1"),W=e=>I(e);return Object(s.useEffect)((async()=>{await h.a.datapackList().then((e=>{console.log(e),t(e.data.payload),C(!1)})).catch((e=>{Object(u.a)(e),console.log(e.response),C(!1)})),await h.a.datapackPendingList().then((a=>{console.log(a);const t=[],s=[];for(const n of a.data.payload)n.modifiedBy===e?s.push(n):t.push(n);k(s),x(t),C(!1)})).catch((e=>{Object(u.a)(e),console.log(e.response),C(!1)}))}),[P]),Object(w.jsxs)(s.Fragment,{children:[Object(w.jsx)(r.a,{children:Object(w.jsx)(c.a,{children:Object(w.jsxs)(o.a,{tabs:!0,children:[Object(w.jsx)(i.a,{children:Object(w.jsx)(l.a,{active:"1"===T,onClick:()=>W("1"),children:Object(w.jsx)("span",{className:"align-middle d-none d-sm-block",children:"Datapack List"})})}),m.j.includes(34)&&Object(w.jsx)(i.a,{children:Object(w.jsx)(l.a,{active:"2"===T,onClick:()=>W("2"),children:Object(w.jsx)("span",{className:"align-middle d-none d-sm-block",children:"My Pending"})})}),m.j.includes(34)&&Object(w.jsx)(i.a,{children:Object(w.jsx)(l.a,{active:"3"===T,onClick:()=>W("3"),children:Object(w.jsx)("span",{className:"align-middle d-none d-sm-block",children:"Approve"})})})]})})}),Object(w.jsx)(r.a,{children:Object(w.jsxs)(d.a,{activeTab:T,children:[Object(w.jsx)(p.a,{tabId:"1",children:Object(w.jsxs)(r.a,{children:[Object(w.jsxs)(c.a,{className:"border-bottom",children:[Object(w.jsx)(j.a,{tag:"h4",children:"Datapack"}),Object(w.jsx)("div",{children:m.j.includes(16)&&Object(w.jsx)(b.a.Ripple,{className:"ml-2",color:"primary",tag:g.b,to:"/createDatapackList",children:Object(w.jsxs)("div",{className:"d-flex align-items-center",children:[Object(w.jsx)(n.a,{size:17,style:{marginRight:"5px"}}),Object(w.jsx)("span",{children:"Create Datapack"})]})})})]}),Object(w.jsx)(A,{datapackList:a,TableDataLoading:v,refresh:P,setrefresh:B})]})}),Object(w.jsx)(p.a,{tabId:"2",children:Object(w.jsx)(S,{datapackList:f,TableDataLoading:v})}),Object(w.jsx)(p.a,{tabId:"3",children:Object(w.jsx)(F,{datapackList:O,TableDataLoading:v,refresh:P,setrefresh:B})})]})})]})}},437:function(e,a,t){"use strict";t.d(a,"a",(function(){return n})),t.d(a,"b",(function(){return r})),t.d(a,"c",(function(){return c}));t(0);var s=t(107);const n=e=>{try{const a=e.response;404===a.status||401===a.status||400===a.status||500===a.status||409===a.status?s.f.error(a.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):s.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(a){s.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},r=e=>{try{const a=e.response;404!==a.status&&401!==a.status&&400!==a.status||s.f.error(a.data.errors?a.data.errors[Object.keys(a.data.errors)[0]]:a.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(a){s.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},c=e=>{const a=e.data.message||"success";s.f.success(a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},443:function(e,a,t){"use strict";t.d(a,"b",(function(){return c})),t.d(a,"c",(function(){return o})),t.d(a,"f",(function(){return i})),t.d(a,"e",(function(){return l})),t.d(a,"d",(function(){return d})),t.d(a,"a",(function(){return p}));var s=t(486),n=t.n(s);const r={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},c=e=>new Date(e).toLocaleDateString(void 0,r),o=e=>{e.endsWith("Z")&&(e=e.slice(0,-1));const a=e.indexOf("+");return-1!==a&&(e=e.slice(0,a)),n()(e).format("MMMM D, YYYY [at] h:mm A")},i=e=>String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),l=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),d=async e=>{401===e&&(window.location.href="/Adminlogin",await localStorage.clear())},p=(e,a,t)=>{const s=document.createElement("a");let n=function(e){let t;return t="",t+=a.join(","),t+="\n",e.forEach((e=>{let s=0;a.forEach((a=>{s>0&&(t+=","),t+=e[a],s++})),t+="\n"})),t}(e);if(null===n)return;const r=JSON.parse(localStorage.getItem("userData")),c="".concat(t,"_").concat((new Date).toISOString(),"_").concat(r.fullname.replaceAll(/\s/g,""),".csv");n.match(/^data:text\/csv/i)||(n="data:text/csv;charset=utf-8,".concat(n)),s.setAttribute("href",encodeURI(n)),s.setAttribute("download",c),s.click()}},469:function(e,a,t){"use strict";var s=t(0),n=t(1719),r=t(467),c=t(471),o=t.n(c),i=t(474),l=t.n(i),d=t(5);a.a=e=>{let{column:a,TableData:t,TableDataLoading:c}=e;const[i,p]=Object(s.useState)(0);return Object(d.jsx)(s.Fragment,{children:Object(d.jsx)(l.a,{noHeader:!0,pagination:!0,columns:a,paginationPerPage:10,className:"react-dataTable",sortIcon:Object(d.jsx)(n.a,{size:10}),paginationDefaultPage:i+1,paginationComponent:()=>Object(d.jsx)(o.a,{previousLabel:"",nextLabel:"",forcePage:i,onPageChange:e=>(e=>{p(e.selected)})(e),pageCount:t.length?t.length/10:1,breakLabel:"...",pageRangeDisplayed:2,marginPagesDisplayed:2,activeClassName:"active",pageClassName:"page-item",breakClassName:"page-item",breakLinkClassName:"page-link",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-1"}),data:t,progressPending:c,progressComponent:Object(d.jsx)(r.a,{color:"primary"}),responsive:!0,pointerOnHover:!0,highlightOnHover:!0,striped:!0})})}},558:function(e,a,t){"use strict";var s=t(0),n=t(1719),r=t(467),c=t(471),o=t.n(c),i=t(474),l=t.n(i),d=t(5);a.a=e=>{const{currentPage:a,handlePagination:t,RowCount:c,column:i,TableData:p,TableDataLoading:j,RowLimit:b}=e;return Object(d.jsx)(s.Fragment,{children:Object(d.jsx)(l.a,{noHeader:!0,pagination:!0,highlightOnHover:!0,paginationServer:!0,columns:i,paginationPerPage:b,className:"react-dataTable",sortIcon:Object(d.jsx)(n.a,{size:10}),paginationDefaultPage:a+1,paginationComponent:()=>Object(d.jsx)(o.a,{previousLabel:"",nextLabel:"",forcePage:a,onPageChange:e=>t(e),pageCount:p.length?c/b:1,breakLabel:"...",pageRangeDisplayed:2,marginPagesDisplayed:2,activeClassName:"active",pageClassName:"page-item",breakClassName:"page-item",breakLinkClassName:"page-link",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-1"}),data:p,progressPending:j,progressComponent:Object(d.jsx)(r.a,{color:"primary"}),responsive:!0})})}}}]);
//# sourceMappingURL=341.c46ff9c4.chunk.js.map